$(function(){var a=new MediaPlan();a.init();});function MediaPlan(){this.hadInit=false;this.isEdit=false;this.isFormDataChange=false;this.employeesSelect=new EmployeesSelect();
this.compareDate=false;this.allowSave=true;}MediaPlan._CONS_={EDIT_URL:ctx+"/ec/media/mediaPlan/edit.htm",DETAIL_URL:ctx+"/ec/media/mediaPlan/detail.htm",DELETE_URL:ctx+"/ec/media/mediaPlan/delete.htm",SAVE_ADD_URL:ctx+"/ec/media/mediaPlan/saveAdd.htm",SAVE_EDIT_URL:ctx+"/ec/media/mediaPlan/saveEdit.htm",LIST_DATA_URL:ctx+"/ec/media/mediaPlan/listData.htm",ASSIGN_URL:ctx+"/ec/media/mediaPlan/assignCallRes.htm",SAVE_ADD_LONG_URL:ctx+"/ec/media/mediaPlan/saveAddLong.htm",SAVE_EDIT_LONG_URL:ctx+"/ec/media/mediaPlan/saveEditLong.htm",EDIT_FORM_ID:"mediaPlanForm",EDIT_DIV_ID:"mediaPlanFormDiv",ADD_FORM_ID:"mediaPlanAddForm",GRID:"#mediaPlanGrid",PAGER:"#mediaPlanPager"};
MediaPlan.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindFormValidation();this._bindEventHander();this._initJqgrid(a);this._hideNotGrantBtn();
CateUtils.getOptions({typeKey:"system",pKey:"channelType-root",container:"channelType"});this.getChannel("channelSearch","");this.getChannel("channelId","n");
this.getChannel("channelIdAdd","y");this._locateToGlHelp();}},_locateToGlHelp:function(){var a="glHelp.operations.mediaPlan";glHelpUtil.init(a);},getChannel:function(a,c){var b=null;
if(a){var b=$("#"+a);if(b.length==0){throw new Error(a+"下拉列表容器不能为空");}}FormUtils.loadData(ctx+"/ec/media/mediaPlan/getChannel.htm?isLong="+c,function(f){if(f.success){var d=JSON.parse(f.msg);
if(d&&d.length>0){var g=new StringBuffer();g.append("<option value=''>请选择媒体渠道</option>");for(var e=0;e<d.length;e++){g.append("<option value='"+d[e].id+"'>"+d[e].name+"</option>");
}b.empty().append(g.toString());}}else{DialogUtils.error("错误",f.msg);}});},_hideNotGrantBtn:function(){if(!ResUtils.canShow("mediaPlan.button.detail")){$(".mediaPlanDetail").hide();
}if(!ResUtils.canShow("mediaPlan.button.add")){$(".mediaPlanAdd").hide();}if(!ResUtils.canShow("mediaPlan.button.edit")){$(".mediaPlanEdit").hide();}if(!ResUtils.canShow("mediaPlan.button.delete")){$(".mediaPlanDel").hide();
}if(!ResUtils.canShow("mediaPlan.button.addLong")){$(".mediaPlanAddLong").hide();}},clear:function(c){var a=this;function b(){a._showListWrapper();a.isFormDataChange=false;
a.isEdit=false;$(".form_wrapper .saveBtn").show();$(".form_wrapper .saveLongBtn").show();FormUtils.clear(MediaPlan._CONS_.EDIT_FORM_ID);FormUtils.enableForm(MediaPlan._CONS_.EDIT_FORM_ID);
FormUtils.clear(MediaPlan._CONS_.ADD_FORM_ID);FormUtils.enableForm(MediaPlan._CONS_.ADD_FORM_ID);if(c){a.reloadJqgrid();}}if(a.isEdit&&a.isFormDataChange){DialogUtils.warning(function(){b();
});}else{b();}},_showListWrapper:function(){$(".list_wrapper").show();$(".form_wrapper").hide();},_showFormWrapper:function(){$(".list_wrapper").hide();
$(".form_wrapper").show();},_add:function(){this._showFormWrapper();$(".toTime").show();$(".addMgrId").show();$(".operation").show();$(".addNewPlan").show();
$("#timeToTime").show();$("#adDateEnd").removeAttr("type");$("input[name=start]").val("09:00");$(".form_wrapper .saveBtn").show();$(".form_wrapper .saveLongBtn").hide();
$("input[name=deadlineNew]").val("08:59:59");$(".deadlineTime").attr("disabled"," disabled");$("#"+MediaPlan._CONS_.ADD_FORM_ID).hide();$("#"+MediaPlan._CONS_.EDIT_FORM_ID).show();
},_addLong:function(){$(".addMgrId").show();this._showFormWrapper();$(".form_wrapper .saveBtn").hide();$(".form_wrapper .saveLongBtn").show();$("#"+MediaPlan._CONS_.EDIT_FORM_ID).hide();
$("#"+MediaPlan._CONS_.ADD_FORM_ID).show();},_edit:function(a){this._showFormWrapper();this.edit=true;this._loadData(a);$(".addMgrId").show();$(".operation").hide();
$("#timeToTime").hide();$(".addNewPlan").hide();$("#adDateEnd").attr("type","hidden");$(".deadlineTime").removeAttr("disabled");$("#channelId").attr("disabled"," disabled");
$("#channelIdAdd").attr("disabled"," disabled");$(".adDateStart").attr("disabled"," disabled");},_detail:function(a){this._loadData(a);$(".addMgrId").hide();
$("#timeToTime").hide();this._showFormWrapper();$(".form_wrapper .saveBtn").hide();$("#adDateEnd").attr("type","hidden");$(".form_wrapper .saveLongBtn").hide();
FormUtils.disableForm(MediaPlan._CONS_.EDIT_FORM_ID);FormUtils.disableForm(MediaPlan._CONS_.ADD_FORM_ID);},_loadData:function(b){var a=this;FormUtils.loadData(MediaPlan._CONS_.EDIT_URL+"?id="+b,function(c){$("input[name=id]").val(c.id);
$("select[name=channelId]").val(c.channelId);$("select[name=channelType]").val(c.channelType);$("input[name=adDate]").val(c.adDate.substring(0,10));$("input[name=start]").val(c.start);
if(parseInt(c.duration/60)==c.duration/60){$("input[name=duration]").val(c.duration/60);$("#typeContainer").val("minute");}else{$("input[name=duration]").val(c.duration);
}$("input[name=cost]").val(c.cost);$("input[name=deadlineNew]").val(c.deadline.substring(11,19));$("input[name=deadline]").val(c.deadline);$("input[name=deadlineDate]").val(c.deadline.substring(0,10));
$("input[name=createTime]").val(c.createTime);$("input[name=createBy]").val(c.createBy);$("input[name=updateTime]").val(c.updateTime);$("input[name=mgrId]").val(c.mgrId);
$("input[name=mgrName]").val(c.mgrName);$("input[name=adStartTime]").val(c.adStartTime);if(DateUtils.getDateDiff(c.adDate,c.deadline,"hour")<24){$(".morrow").text("当日");
}});},_save:function(){var c=this;var g=$("#id").val();var a=null;var d=$("input[name=adDate]").val();var f=$("input[name=adDateEnd]").val();var e=$("select[name=channelId]").val();
if(g!=null&&g!=""){a=MediaPlan._CONS_.SAVE_EDIT_URL;}else{a=MediaPlan._CONS_.SAVE_ADD_URL;}$("input[name=deadline]").val($("input[name=deadline]").val().substring(0,11)+$("input[name=deadlineNew]").val());
if(c.getTableData()==null){}else{var b=$("#"+MediaPlan._CONS_.EDIT_FORM_ID).serialize()+"&MediaPlanJSON="+c.getTableData()+"&adDate="+d+"&adDateEnd="+f+"&channelId="+e;
if($("#"+MediaPlan._CONS_.EDIT_FORM_ID).valid()){if(DateUtils.getDateDiff(d+" 00:00:00",f+" 00:00:00","day")<0){DialogUtils.error(msgCode.FAIL_MSG,"广告结束日期不能大于开始日期");
return;}if(!c.allowSave){return;}ButtonUtils.disableBtn("saveBtn");FormUtils.submit(a,b,function(h){ButtonUtils.enableBtn("saveBtn");if(h.success){if(h.msgCode==actionCode.CREATE){DialogUtils.success(msgCode.INFO,msgCode.CREATE_MSG);
}else{if(h.msgCode==actionCode.UPDATE){DialogUtils.success(msgCode.INFO,msgCode.UPDATE_MSG);}}$("#planContainer").find(".planTr").nextAll().remove();c.isEdit=false;
c.clear(true);}else{DialogUtils.error(msgCode.FAIL_MSG,h.msg);}},function(){ButtonUtils.enableBtn("saveBtn");DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);
});}}},_saveLong:function(){var c=this;var g=$("#id").val();var a=null;var b=null;var d=$("#"+MediaPlan._CONS_.ADD_FORM_ID).find("input[name=adDate]").val();
var f=$("#"+MediaPlan._CONS_.ADD_FORM_ID).find("input[name=deadlineDate]").val();$("input[name=deadline]").val($("input[name=deadlineDate]").val()+" 23:59:59");
$("input[name=duration]").val(DateUtils.getDateDiff(d+" 00:00:00",f+" 23:59:59","minute")*60);var e=$("#"+MediaPlan._CONS_.ADD_FORM_ID).find("select[name=channelId]").val();
if(g!=null&&g!=""){a=MediaPlan._CONS_.SAVE_EDIT_LONG_URL;b=$("#"+MediaPlan._CONS_.ADD_FORM_ID).serialize()+"&channelId="+e;}else{b=$("#"+MediaPlan._CONS_.ADD_FORM_ID).serialize();
a=MediaPlan._CONS_.SAVE_ADD_LONG_URL;}if($("#"+MediaPlan._CONS_.ADD_FORM_ID).valid()){if(DateUtils.getDateDiff(d+" 00:00:00",f+" 00:00:00","day")<0){DialogUtils.error(msgCode.FAIL_MSG,"广告结束日期不能大于开始日期");
return;}ButtonUtils.disableBtn("saveLongBtn");FormUtils.submit(a,b,function(h){ButtonUtils.enableBtn("saveLongBtn");if(h.success){if(h.msgCode==actionCode.CREATE){DialogUtils.success(msgCode.INFO,msgCode.CREATE_MSG);
}else{if(h.msgCode==actionCode.UPDATE){DialogUtils.success(msgCode.INFO,msgCode.UPDATE_MSG);}}c.isEdit=false;c.clear(true);}else{DialogUtils.error(msgCode.FAIL_MSG,h.msg);
}},function(){ButtonUtils.enableBtn("saveLongBtn");DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});}},_delete:function(b){var a=this;DialogUtils.confirm(function(){FormUtils.del(MediaPlan._CONS_.DELETE_URL,b,function(c){if(c.success){DialogUtils.success(msgCode.INFO,msgCode.DELETE_MSG);
a.reloadJqgrid();}else{DialogUtils.error(msgCode.ERROR,c.msg);}});});},_showForm:function(a){var b=$(MediaPlan._CONS_.GRID).jqGrid("getRowData",a);var c=b["isLong"];
if(c=="y"){$(".form_wrapper .saveBtn").hide();$(".form_wrapper .saveLongBtn").show();$("#"+MediaPlan._CONS_.EDIT_FORM_ID).hide();$("#"+MediaPlan._CONS_.ADD_FORM_ID).show();
}else{$(".form_wrapper .saveBtn").show();$(".form_wrapper .saveLongBtn").hide();$("#"+MediaPlan._CONS_.EDIT_FORM_ID).show();$("#"+MediaPlan._CONS_.ADD_FORM_ID).hide();
}},getTableData:function(){var b=true;var a=$("input[name=mgrId]").val();var c=$("#channelId").val();var d=[];$("#planContainer").find(".planTr").each(function(){var f=$(this).find("input[name=start]").eq(0).val();
var m=$(this).find("#typeContainer").eq(0).val();if(m=="minute"){var i=$(this).find("input[name=duration]").eq(0).val()*60;}else{var i=$(this).find("input[name=duration]").eq(0).val();
}var h=$(this).find("input[name=cost]").eq(0).val();var e=$(this).find(".morrow").eq(0).text();var l=$(".adDateStart").val();var k=$(".adDateEnd").val();
var o=l.concat(" "+f+":00");var g=DateUtils.getDateDiff(l+" 00:00:00",k+" 00:00:00","day");var j=g*$(".planTr").length;if(j>20){DialogUtils.error("","不能超过20条记录");
b=false;}var n={mgrId:a,channelId:c,start:f,duration:i,cost:h,adStartTime:o,};d.push(n);});if(b){return JSON.stringify(d);}else{return null;}},_assign:function(a){JTTabUtils.addOrRefreshTab(MediaPlan._CONS_.ASSIGN_URL+"?id="+a,"分配进线资源");
},_bindEventHander:function(){var a=this;a._bindSearchEventHandler();$(document).on("click",".prevBtn",function(){a.clear(false);$("#planContainer").find(".planTr").nextAll().remove();
});$(document).on("click",".saveBtn",function(){a._save();});$(document).on("click",".saveLongBtn",function(){a._saveLong();});$(document).on("click",".addMgrId",function(){var b=0;
if(ResUtils.canShow("employeeSelector.button.media")){b:1;}var c={isShowAllGroup:b,grantType:"/media/",isMultiple:0,mode:0,isSale:0,callBack:function(d){$("input[name=mgrName]").val(d[0].name);
$("input[name=mgrId]").val(d[0].id);$("input[name=mgrName]").trigger("keyup");}};a.employeesSelect.init(c);});$("#"+MediaPlan._CONS_.EDIT_DIV_ID).on("change","input",function(){if(a.isEdit){a.isFormDataChange=true;
}});$("#"+MediaPlan._CONS_.EDIT_DIV_ID).on("change","select",function(){if(a.isEdit){a.isFormDataChange=true;}});$("#"+MediaPlan._CONS_.EDIT_DIV_ID).on("change","textarea",function(){if(a.isEdit){a.isFormDataChange=true;
}});$(document).on("click",".addNewPlan",function(){a._addNewPlan();});$(document).on("click",".removeNewPlan",function(){a._removeNewPlan($(this));});
$(document).on("keyup",".startTime",function(b){$(".startTime").each(function(c){var d=$(this).val();if(96<=b.keyCode<=105&&b.keyCode!=8){if(d.length==2&&/^[0-9]*$/.test(d)){$(this).val(d+":");
}}});});$(document).on("change",".startTime",function(){var g=$(this).parents(".planTr").next().children(".startTd").children().children().val();var f=$(this).parents(".planTr").prev().children(".startTd").children().children().val();
var i=$(this).parents(".startTd").nextAll(".thContainer").children(".morrowDiv").children();var c=$(this).parents(".planTr").prev().children().nextAll(".thContainer").children(".morrowDiv").children();
var e=$(this).parents(".startTd").nextAll(".thContainer").children(".deadlineDiv").children(".deadlineTime");var d=$(this).parents(".planTr").prev().children(".startTd").nextAll(".thContainer").children(".deadlineDiv").children(".deadlineTime");
var h=$(this).parents("#planContainer").children("tr:first").children(".startTd").children().children().val();var j=$(this).parents("#planContainer").children("tr:last").children(".startTd").nextAll(".thContainer").children(".deadlineDiv").children(".deadlineTime");
var b=DateUtils.getDateDiff("2016-08-22 "+f+":00","2016-08-22 "+$(this).val()+":00","minute");if(b<=0){$(this).parent().addClass("validate_input_error");
DialogUtils.error(msgCode.ERROR,"不能小于等于上个广告开始时间");a.allowSave=false;}else{$(this).parent("div").removeClass("validate_input_error");a.allowSave=true;if($(this).parents(".planTr").prev().length==0){if($(this).parents(".planTr").next().length==0||g==""){e.val(DateUtils.getHourMinuteSecond($(this).val()));
}else{j.val(DateUtils.getHourMinuteSecond($(this).val()));}}else{if($(this).parents(".planTr").next().length==0||g==""){i.text("次日");c.text("当日");d.val(DateUtils.getHourMinuteSecond($(this).val()));
e.val(DateUtils.getHourMinuteSecond(h));}else{d.val(DateUtils.getHourMinuteSecond($(this).val()));}}}});$(document).on("change",".deadlineTime",function(){$(this).parent("div").removeClass("validate_input_error");
a.allowSave=true;var d=$("input[name=deadline]").val();var b=$(".deadlineTime").val();var c=d.substring(0,11).concat(b);if((DateUtils.getDateDiff(d,c,"second")>0)){$(this).parent().addClass("validate_input_error");
DialogUtils.error("","请输入再此之前的时间");a.allowSave=false;}});$("body").on("change","#channelIdAdd",function(){var b=$(this).val();FormUtils.loadData(ctx+"/ec/media/mediaChannel/edit.htm?id="+b,function(c){$("select[name=channelType]").val(c.type);
});});$("body").on("click",".mediaPlanAdd",function(){a._add();ButtonUtils.enableBtn("saveBtn");});$("body").on("click",".mediaPlanAddLong",function(){a._addLong();
ButtonUtils.enableBtn("saveBtn");});$("body").on("click",".mediaPlanEdit",function(){a.isEdit=true;var b=$(this).attr("idVal");if(!b){b=$(MediaPlan._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b==null||b.length==0){DialogUtils.error(msgCode.error,msgCode.ERROR_NO_SELECT_EDIT);return;}else{if(b&&b.length>1){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_EDIT_MUL_RECORD);
return;}}}a._showForm(b);a._edit(b);$(".deadlineTime").bind("click");});$("body").on("click",".mediaPlanDel",function(){var b=$(this).attr("idVal");if(!b){b=$(MediaPlan._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b==null||b.length==0){DialogUtils.error(msgCode.error,msgCode.ERROR_NO_SELECT_DELETE);return;}}a._delete(b);});$("body").on("click",".mediaPlanAssign",function(){var b=$(this).attr("idVal");
if(!b){b=$(MediaPlan._CONS_.GRID).jqGrid("getGridParam","selarrrow");if(b==null||b.length==0){DialogUtils.error(msgCode.error,msgCode.ERROR_NO_SELECT_DELETE);
return;}}a._assign(b);});$("body").on("click",".mediaPlanDetail",function(){a.isEdit=true;var b=$(this).attr("idVal");if(!b){b=$(MediaPlan._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b==null||b.length==0){DialogUtils.error(msgCode.error,"请选择要查看明细的记录");return;}else{if(b&&b.length>1){DialogUtils.error(msgCode.error,msgCode.ERROR_DETAIL_MUL_RECORD);
return;}}}a._showForm(b);a._detail(b);});},_bindSearchEventHandler:function(){var a=this;$(".list_wrapper").on("click",".mediaPlanSearch",function(){if($("#adDateEndSearch").val()!=""){var b={"Q__S__LK__channel_id_":$("select[name='Q__S__LK__channel_id_']").val(),"Q__N__GTE__cost_":$("input[name='Q__N__GTE__cost_']").val(),"Q__N__LTE__plan.cost_":$("input[name='Q__N__LTE__plan.cost_']").val(),"Q__D__BW__plan.ad_date_":$("#adDateStartSearch").val()+","+$("#adDateEndSearch").val(),};
}else{var b={"Q__S__LK__channel_id_":$("select[name='Q__S__LK__channel_id_']").val(),"Q__N__GTE__cost_":$("input[name='Q__N__GTE__cost_']").val(),"Q__N__LTE__plan.cost_":$("input[name='Q__N__LTE__plan.cost_']").val(),"Q__D__BW__plan.ad_date_":"",};
}a.reloadJqgrid(b);});$(".toolbar-panel").on("keypress","form",function(b){if(b.keyCode=="13"){$(".mediaPlanSearch").eq(0).trigger("click");}});},_bindFormValidation:function(){jQuery.validator.addMethod("isDateTime",function(d,c){return this.optional(c)||/^(20|21|22|23|[0-1]{1}[0-9]{1}):[0-5]{1}[0-9]{1}:[0-5]{1}[0-9]{1}$/.test(d);
},"格式必须是HH:mm:ss");jQuery.validator.addMethod("isDate",function(d,c){return this.optional(c)||/^(20|21|22|23|[0-1]{1}[0-9]{1}):[0-5]{1}[0-9]{1}$/.test(d);
},"格式必须是HH:mm");var a={rules:{channelId:{required:true},adDate:{required:true},adDateEnd:{required:true},start:{required:true,isDate:true,},duration:{required:true,digits:true},cost:{required:true,digits:true},deadlineNew:{required:true,isDateTime:true},mgrName:{required:true}},messages:{}};
var b={rules:{channelId:{required:true},adDate:{required:true},deadlineDate:{required:true},mgrName:{required:true},cost:{required:true,digits:true}},messages:{}};
FormUtils.bindFormValidation(MediaPlan._CONS_.ADD_FORM_ID,b);FormUtils.bindFormValidation(MediaPlan._CONS_.EDIT_FORM_ID,a);},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(MediaPlan._CONS_.GRID,a);
},_getManagerBtns:function(){var a=[];if(ResUtils.canShow("mediaPlan.button.delete")){a.push({lable:msgCode.DELETE_BTN_TEXT,btnClasses:"btn btn-danger mediaPlanDel",iconClasses:"fa fa-remove"});
}if(ResUtils.canShow("mediaPlan.button.edit")){a.push({lable:msgCode.EDIT_BTN_TEXT,btnClasses:"btn btn-primary mediaPlanEdit",iconClasses:"fa fa-edit"});
}if(ResUtils.canShow("mediaPlan.button.detail")){a.push({lable:msgCode.DETAIL_BTN_TEXT,btnClasses:"btn btn-primary mediaPlanDetail",iconClasses:"fa fa-list"});
}return a;},_removeNewPlan:function(a){a.parent().parent().parent("tr").eq(0).remove();$("#planContainer").find(".planTr:last").find(".morrow").text("次日");
$("#planContainer").find(".planTr:last").find(".deadlineTime").val(DateUtils.getHourMinuteSecond($("#planContainer").find(".planTr:first").find(".startTime").val()));
},_addNewPlan:function(){var a=new StringBuffer();a.append("<tr class='planTr'>");a.append("<td class='startTd'>");a.append("<div class='col-sm-6'>");a.append("<input type='text' name='start'  class='form-control startTime' placeholder='hh:mm'  validateType='default' />");
a.append("</div>");a.append("</td>");a.append("<td>");a.append("<div class='col-sm-4'>");a.append("<input type='text' name='duration' class='form-control' validateType='default'/>");
a.append("</div>");a.append("<div class='col-sm-6'>");a.append("<select class='form-control' name='type' id='typeContainer' validateType='default' selected='minute'>");
a.append("<option value='second'>秒钟</option>");a.append("<option selected='true' value='minute'>分钟</option>");a.append("</select>");a.append("</div>");
a.append("</td>");a.append("<td>");a.append("<div class='col-sm-7'>");a.append("<input type='text' name='cost' class='form-control' validateType='default' />");
a.append("</div>");a.append("</td>");a.append("<td class='thContainer'>");a.append("<div class='col-sm-3 morrowDiv'>");a.append("<span class='morrow'>当日</span>");
a.append("</div>");a.append("<div class='col-sm-6 deadlineDiv'>");a.append("<input type='hidden' name='deadline' validateType='default'>");a.append("<input type='text' name='deadlineNew'  class='form-control deadlineTime' validateType='default' disabled='disabled'/>");
a.append("</div>");a.append("</td>");a.append("<td >");a.append("<div class='col-sm-12'>");a.append("<button type='button' class='addNewPlan btn btn-sm btn-outline btn-primary'><i class='fa fa-plus'></i></button>&nbsp");
a.append("<button type='button' class='removeNewPlan btn btn-sm btn-outline btn-danger'><i class='fa fa-minus'></i></button>");a.append("</div>");a.append("</td>");
a.append("</tr>");$("#planContainer").append(a.toString());},_initJqgrid:function(a){if(a==null||typeof a==undefined){a={};}$(MediaPlan._CONS_.GRID).JTJqgrid({url:MediaPlan._CONS_.LIST_DATA_URL,pager:MediaPlan._CONS_.PAGER,postData:a,colNames:["渠道 ID","渠道","是否长期广告","广告日期","开始时间","广告时长（秒）","费用（元）","广告效用持续截止","资源负责人","创建时间","更新时间","操作"],colModel:[{name:"channelId",index:"channel_id_",hidedlg:true,hidden:true},{name:"channelName",width:120,formatter:function(b,c,d){if(d.isExecute=="y"){return"<span style='color:red'>"+b+"</span>";
}else{return b;}}},{name:"isLong",hidedlg:true,hidden:true},{name:"adDate",index:"ad_date_",width:90,formatter:function(b){return b.substring(0,10);}},{name:"start",index:"start_",width:90},{name:"duration",index:"duration_",width:110},{name:"cost",index:"cost_",width:100},{name:"deadline",index:"deadline_",width:150},{name:"mgrName",width:100,sortable:false},{name:"createTime",index:"create_time_",width:100,hidedlg:true,hidden:true,formatter:function(b){return DateUtils.miniTime(b);
}},{name:"updateTime",index:"update_time_",width:100,classes:"autoHideCol",formatter:function(b){return DateUtils.miniTime(b);}},{name:"__manage",width:60,classes:"rowOps",sortable:false,align:"center",formatter:"manage",formatoptions:this._getManagerBtns()}]});
}};