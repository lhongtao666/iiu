var ProdImageUtils={bindEventHanlder:function(){if(this.hadInit){return;}this.hadInit=true;var a=this;$("#selectCommonImageBtn").on("click",function(){ImageUtils.selectImage(1,function(d){var c=$("#commonImageContainer");
if(c.find("ul").length==0){var e=new StringBuffer();e.append("<ul class='dragsort'>");for(var b=0;b<d.length;b++){e.append("<li>");e.append(ImageUtils.createImageDivStr([d[b]],true));
e.append("</li>");}e.append("</ul>");c.append(e.toString());a._initDragSort(c);}else{var e=new StringBuffer();for(var b=0;b<d.length;b++){e.append("<li>");
e.append(ImageUtils.createImageDivStr([d[b]],true));e.append("</li>");}c.find("ul").append(e.toString());}});});$("#imageContainer").on("click",".selectMainImageBtn",function(){var b=$(this).parent().prev();
ImageUtils.selectImage(0,function(c){b.empty().append(ImageUtils.createImageDivStr(c,true));});});$("#imageContainer").on("click",".selectOtherImageBtn",function(){var c=$(this);
var b=c.parent().prev();ImageUtils.selectImage(1,function(e){if(c.siblings().length==0){var f=new StringBuffer();f.append("<ul class='dragsort'>");for(var d=0;
d<e.length;d++){f.append("<li>");f.append(ImageUtils.createImageDivStr([e[d]],true));f.append("</li>");}f.append("</ul>");b.append(f.toString());a._initDragSort(b);
}else{var f=new StringBuffer();for(var d=0;d<e.length;d++){f.append("<li>");f.append(ImageUtils.createImageDivStr([e[d]],true));f.append("</li>");}b.find("ul").append(f.toString());
}});});},getImages:function(){if(!this.hadInit){this.bindEventHanlder();this.hadInit=true;}var a=[];$("#imageContainer").find("tr").each(function(){var g=$(this).attr("optVal");
var h=$(this).find("td:eq(1)").find("div.file-box div.file");if(h.length>0){var j={};var e=h.attr("nameVal");var d=h.attr("urlVal");j.skuOpValue=g;j.name=e;
j.path=d;j.isSkuMain="y";a.push(j);}var i=$(this).find("td:eq(3)").find("ul.dragsort");if(i.length>0){var f=1;i.find("li").each(function(){var n={};var l=$(this).find("div.file-box div.file");
var k=l.attr("nameVal");var m=l.attr("urlVal");n.skuOpValue=g;n.isSkuMain="n";n.name=k;n.path=m;n.sort=f;f++;a.push(n);});}});var c=$("#commonImageContainer").find("ul.dragsort");
if(c.length>0){var b=1;c.find("li").each(function(){var g={};var e=$(this).find("div.file-box div.file");var d=e.attr("nameVal");var f=e.attr("urlVal");
g.name=d;g.path=f;g.isSkuMain="n";g.sort=b;b++;a.push(g);});}return"imageJson="+encodeURIComponent(JSON.stringify(a));},_initDragSort:function(a){a.find("ul.dragsort").dragsort({dragSelector:"li",dragSelectorExclude:".deleteImage",dragBetween:false,dragEnd:function(){},placeHolderTemplate:"<li class='placeHolder'><div></div></li>"});
},createImages:function(g){if(!this.hadInit){this.bindEventHanlder();this.hadInit=true;}var k=new Map();$("#imageContainer").find("tr").each(function(){k.put($(this).attr("optVal"),[]);
});var m=[];var a=k.keys();for(var f=0;f<g.length;f++){for(var e=0;e<a.length;e++){if(a[e]===g[f].skuOpValue){k.get(a[e]).push(g[f]);}}if(!g[f].skuOpValue){m.push(g[f]);
}}for(var f=0;f<a.length;f++){var c=$("#imageContainer").find("tr[optVal='"+a[f]+"']");var h=new StringBuffer();h.append("<ul class='dragsort'>");for(var e=0;
e<k.get(a[f]).length;e++){var d=k.get(a[f])[e];if(d.isSkuMain==="y"){c.find("td:eq(1)").append(ImageUtils.createImageDivStr([d],true));}else{h.append("<li>");
h.append(ImageUtils.createImageDivStr([d],true));h.append("</li>");}}h.append("</ul>");var l=c.find("td:eq(3)");l.append(h.toString());this._initDragSort(l);
}var h=new StringBuffer();h.append("<ul class='dragsort'>");for(var f=0;f<m.length;f++){h.append("<li>");h.append(ImageUtils.createImageDivStr([m[f]],true));
h.append("</li>");}h.append("</ul>");var b=$("#commonImageContainer");b.empty().append(h.toString());this._initDragSort(b);}};