jQuery.Carousel=function(a){this.setting={root:null,related:null,relatedlist:null,relateditems:null,carousel:null,pages:{prevBlock:null,nextBlock:null,prev:null,next:null,current:null,total:null},timer:null,curPage:0,maxPages:0,speed:1000,item:"li",items:null,itemsPrePage:0,itemsPreStep:0,direction:"V",auto:false,isButtonsOut:false};
$.extend(this.setting,a);this.init();return this;};jQuery.Carousel.prototype={init:function(){var f=this,m=f.setting,i=m.direction.toUpperCase(),l=m.carousel,a=0,b=m.pages,d=b.next,c=b.prev,j=m.related,h=m.relatedlist,e=b.current,g=b.total,k=0;
this.deleteItems();m.items=$(l).find(m.item);if(!m.itemsPreStep){m.itemsPrePage=$(l).parent().width()/$(m.items[0]).width();k=m.maxPages=Math.ceil($(m.items).length/m.itemsPrePage);
}else{if(m.itemsPreStep>0){if($(m.items).length<m.itemsPrePage){k=m.maxPages=1;}else{k=m.maxPages=1+Math.ceil(($(m.items).length-m.itemsPrePage)/m.itemsPreStep);
}}}if(k<2){$(d).addClass("hide");$(c).addClass("hide");}if(i==="H"){$(l).css("width",($(m.items[0]).width()*m.items.length)+"px");}if(j&&h){m.relateditems=$(h).find("li");
}if(e){$(e).html(m.curPage+1);}if(g){$(g).html(k);}this.bind();if(m.auto){m.timer=setTimeout(function(){f.auto.call(f);},4000);}return this;},bind:function(){var g=this,l=this.setting,i=$(l.root),j=l.related,c=l.relateditems,d=l.pages,a=d.prevBlock,e=d.nextBlock,b=$(i.find(d.next)[0]),k=$(i.find(d.prev)[0]),h=function(m){if(l.timer){clearTimeout(l.timer);
l.timer=null;}},f=function(m){l.timer=setTimeout(function(){g.auto.call(g);},4000);};if(l.auto){$(i).mouseover(h);$(i).mouseout(f);if(l.isButtonsOut){b.mouseover(h);
b.mouseout(f);k.mouseover(h);k.mouseout(f);}}if(a&&e){i.mouseover(function(){$(k).removeClass("hide");$(b).removeClass("hide");});i.mouseout(function(){$(k).addClass("hide");
$(b).addClass("hide");});$(a).click(function(m){g.prev.call(g);m.preventDefault();m.stopPropagation();});$(e).click(function(m){g.next.call(g);m.preventDefault();
m.stopPropagation();});}$(k).click(function(m){g.prev.call(g);m.preventDefault();m.stopPropagation();});$(b).click(function(m){g.next.call(g);m.preventDefault();
m.stopPropagation();});if(j){$(c).hover(function(m){$(this).addClass("hover");},function(m){$(this).removeClass("hover");});$("#lnk-back-beginning").click(function(m){l.curPage=0;
g.current.call(g,l.curPage);$(j).addClass("hide");m.preventDefault();m.stopPropagation();});}return this;},next:function(){var c=this.setting,a=c.pages,f=c.related,e=a.current,d=a.total,b=c.maxPages;
c.curPage+=1;if(c.curPage===b){if(!f){c.curPage=0;}}if(f){if(c.curPage===b){$(f).removeClass("hide");}else{this.current(c.curPage);}}else{this.current(c.curPage);
}return this;},prev:function(){var c=this.setting,a=c.pages,e=a.current,d=a.total,b=c.maxPages;c.curPage-=1;if(c.curPage<0){c.curPage=b-1;}this.current(c.curPage);
return this;},current:function(c){var g=this,d=this.setting,a=d.pages,f=a.current,e=a.total,b=d.maxPages;if(f){$(f).html(d.curPage+1);}if(e){$(e).html(b);
}this.move(d.curPage);return this;},move:function(a){var b=this.setting,d=b.direction,c=$(b.carousel);if(d.toUpperCase()==="H"){property="left";scrollValue=b.itemsPreStep?(b.itemsPreStep*$(b.items[0]).width())*a:(b.itemsPrePage?(b.itemsPrePage*$(b.items[0]).width())*a:$(b.root).width()*a);
c.animate({"left":"-"+scrollValue+"px"},b.speed);}else{if(d.toUpperCase()==="V"){scrollValue=b.itemsPreStep?(b.itemsPreStep*$(b.items[0]).height())*a:$(b.root).height()*a;
c.animate({"top":"-"+scrollValue+"px"},b.speed);}}return this;},deleteItems:function(){var a=$(this.setting.carousel).find("img");if(a.length===0){return false;
}a.each(function(c,b){if($(b).attr("src").indexOf(".jpg")===-1){$(b).parent().remove();}});return this;},auto:function(){var b=this,a=this.setting;if(a.timer){clearTimeout(a.timer);
a.timer=null;}if(a.maxPages<2){return false;}a.curPage+=1;if(a.curPage===a.maxPages){a.curPage=0;}this.current(a.curPage);a.timer=setTimeout(function(){b.auto.call(b);
},4000);return this;}};jQuery.carousels=function(){var c=[],b=0,a=arguments.length;for(;b<a;b+=1){c[b]=new jQuery.Carousel(arguments[b]);}return c;};