$(function(){var a=new SelectCoupon();a.init();});function SelectCoupon(){}SelectCoupon._CONS_={GRID:"#couponGrid",PAGER:"#couponPager",LIST_DATA_URL:ctx+"/ec/rule/couponDef/listData.htm"};
SelectCoupon.prototype={init:function(){this._initJqgrid();},_initJqgrid:function(){var a=this;this.initJqgrid=true;$.jgrid.defaults.styleUI="Bootstrap";
$(SelectCoupon._CONS_.GRID).jqGrid({url:SelectCoupon._CONS_.LIST_DATA_URL,pager:SelectCoupon._CONS_.PAGER,datatype:"json",mtype:"post",autowidth:true,postData:{Q__S__EQ__belong_type_:"self",Q__S__EQ__status_:"actived"},shrinkToFix:true,height:"auto",multiselect:true,pagerpos:"center",rowNum:20,rowList:[20,40,60,80,100],viewrecords:true,hidegrid:false,colNames:["名称","业务键","生成方式","归属范围","发行数量","可用次数","持有数量","有效期起始","有效期结束"],colModel:[{name:"name",index:"name_",width:120},{name:"key",index:"key_",width:120,sortable:true},{name:"genType",index:"gen_type_",width:80,sortable:false,formatter:function(c){var b="";
switch(c){case"manual":b="人工";break;case"get":b="前端获取";break;case"random":b="随机生成";break;}return b;}},{name:"belongType",index:"belong_type_",width:80,sortable:false,formatter:function(b){if(b=="open"){return"<label class='label label-primary'>公开</label>";
}else{if(b=="self"){return"<label class='label label-warning'>私有</label>";}}}},{name:"maxCount",index:"max_count_",width:60},{name:"usableCount",index:"usable_count_",width:60},{name:"memberCount",index:"member_count_",width:60},{name:"usefulStart",index:"useful_start_",width:180},{name:"usefulEnd",index:"useful_end_",width:180}],rowNum:1000,sortable:true,hidegrid:false,onSelectRow:function(b){if(isMultiple==0){if(a.lastSelectedId){$(SelectCoupon._CONS_.GRID).jqGrid("setSelection",a.lastSelectedId,false);
}a.lastSelectedId=b;}}});}};