$(function(){function a(){this.hadInit=false;this.type=null;this.$container=$("div[srcVal='/ec/finance/desktop/comPaymentStatic.htm']");}a._CONS_={LIST_DATA_URL:ctx+"/ec/finance/financeBill/comPayment.htm",CHART_DIV:"financeTrend"};
a.prototype={init:function(g){if(!this.hadInit){this.hadInit=true;this._bindEventHander();ReportDateUtil.initDate(".report-content",this.$container);this.$container.find("select[name=yearSearch]").val(new Date().getFullYear());
this.$container.find("select[name=monthSearch]").val(new Date().getMonth()+1);var d=ReportDateUtil.getDateRangeStr();var e=this.$container.find("#yearSearch").val();
var f=this.$container.find("#monthSearch").val();var c={dateStr:d,year:e,month:f};this._getData(c);}},_bindEventHander:function(){var c=this;$(document).on("click",".financeBillSearch",function(){var e=ReportDateUtil.getDateRangeStr();
var f=$("#yearSearch").val();var g=$("#monthSearch").val();var d={dateStr:e,year:f,month:g};c._getData(d);});},_getData:function(c){var d=this;$.ajax({type:"GET",url:a._CONS_.LIST_DATA_URL,data:c,contentType:"application/json",dataType:"json",success:function(e){d.createReport(e);
},error:function(e){DialogUtils.error("错误",e);}});},createReport:function(f){var d=this;var c=new Report();c.data=f;c.setLegend(true,["支出","收入"],null);
c.legend.formatter=function(g){if(g=="支出"){return"支出";}else{if(g=="收入"){return"收入";}}};c.setToolboxShow(false,false);c.tooltip.trigger="axis";c.tooltip.formatter=function(m,k,n){var j=m[0].name;
for(var h=0,g=m.length;h<g;h++){j+="<br/>"+m[h].seriesName+" : "+m[h].value+"元";}return j;};c.initSeries([{type:"bar",colName:"outTotal",legendName:"支出"},{type:"bar",colName:"inTotal",legendName:"收入"}],"yearStr");
c.setXAxisInfo("账户 年/月",{show:true,onZero:true,lineStyle:{color:"#C1C1C1",width:2,type:"solid"}});c.setYAxisInfo("金额(元)",{show:true,onZero:true,lineStyle:{color:"#C1C1C1",width:2,type:"solid"}});
var e=["#ed5565","#18a689"];c._initChart(a._CONS_.CHART_DIV,"",e);}};var b=new a();b.init();});