$(function(){function b(){this.hadInit=false;this.type=null;this.$container=$('div[srcVal="/ec/finance/desktop/accPaymentStatic.htm"]');}b._CONS_={LIST_DATA_URL:ctx+"/ec/finance/financeBill/accPayment.htm",CHART_DIV:"financeTrendForAcc",GRID:"#financeBillGrid",PAGER:"#financeBillPager",};
b.prototype={init:function(c){if(!this.hadInit){this.hadInit=true;this._bindEventHander();ReportDateUtil.initDate(".report-content",this.$container);this.$container.find("select[name=yearSearch]").val(new Date().getFullYear());
this.$container.find("select[name=monthSearch]").val(new Date().getMonth()+1);FinanceAccountSelect.initSelectIsUsed("cpAccount",null,this.loadDate(this));
}},loadDate:function(d){var g=d.$container.find("#cpAccount").val();var f=d.$container.find("#yearSearch").val();var c={account:g,year:f};var e=new b();
e._getData(c);},_bindEventHander:function(){var c=this;this.$container.on("click",".financeBillSearch",function(){var e=c.$container.find("#yearSearch").val();
var f=c.$container.find("#cpAccount").val();var d={account:f,year:e};c._getData(d);});},_getData:function(c){var d=this;$.ajax({type:"GET",url:b._CONS_.LIST_DATA_URL,data:c,contentType:"application/json",dataType:"json",success:function(e){d.createReport(e);
},error:function(e){DialogUtils.error("错误",e);}});},createReport:function(f){var d=this;var c=new Report();c.data=f;c.setLegend(true,["支出","收入"],null);
c.legend.formatter=function(g){if(g=="支出"){return"支出";}else{if(g=="收入"){return"收入";}}};c.setToolboxShow(false,false);c.tooltip.trigger="axis";c.tooltip.formatter=function(m,k,n){var j=m[0].name;
for(var h=0,g=m.length;h<g;h++){j+="<br/>"+m[h].seriesName+" : "+m[h].value+"元";}return j;};c.initSeries([{type:"line",colName:"outTotal",legendName:"支出"},{type:"line",colName:"inTotal",legendName:"收入"}],"yearStr");
c.setXAxisInfo("年/月",{show:true,onZero:true,lineStyle:{color:"#C1C1C1",width:1,type:"solid"}});c.setYAxisInfo("金额(元)",{show:true,onZero:true,lineStyle:{color:"#C1C1C1",width:1,type:"solid"}});
var e=["#ed5565","#18a689"];c._initChart(b._CONS_.CHART_DIV,"",e);}};var a=new b();a.init();});