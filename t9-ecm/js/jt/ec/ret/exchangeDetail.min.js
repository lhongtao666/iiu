$(function(){var a=new ExchangeEntityDetail();a.init();});function ExchangeEntityDetail(){this.hadInit=false;this.exchangeEntityBase=new ExchangeEntityBase();
this.exchangeEntityExchangeing=new ExchangeEntityExchangeing();this.exchangeLog=new ExchangeLog();}ExchangeEntityDetail._CONS_={EDIT_FORM_ID:"exchangeEntityForm",};
ExchangeEntityDetail.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initInputAndOption();this._detail();
if(isIframe){$("#closeBtn").hide();}}},_bindEventHander:function(){var a=this;$(document).on("click","#viewBill",function(){FormUtils.disableForm("refundAddForm");
$("#refundAddForm").find("[id=billStatusDiv]").show();a.exchangeEntityBase.openEditDialog(false,null);});$(document).on("click","#closeBtn",function(){JTTabUtils.closeTab(ctx+"/ec/ret/exchangeEntity/detail.htm?eno="+eno);
});},_initDetailBtn:function(){$("#saveDiv").hide();$("#comfirmDiv").hide();$("#receiveDiv").hide();$("#exchangeDiv").hide();ButtonUtils.enableBtn("closeBtn");
FormUtils.disableForm(ExchangeEntityDetail._CONS_.EDIT_FORM_ID);$("#commentDiv").hide();$(".selectImageBtn").hide();},_initInputAndOption:function(){CateUtils.getOptions({typeKey:"system",pKey:"shipCode",container:"shipCompany"});
},_detail:function(){var a=this;a._initDetailBtn();a.exchangeLog.init(exchangeId);a.exchangeEntityBase._edit(exchangeId,function(b){if(b&&("exchange"==b.status||"complete"==b.status)){if(b.exSoInfoVo){a.exchangeEntityBase.soItemList.genExchangeSoItemGrid({data:b.exSoInfoVo.soItemVos,soType:b.exSoInfoVo.soType});
}if(!(b.exchangeImgPos&&b.exchangeImgPos.length>0)){$("#imgDiv").hide();}$(".exchangeDetailDiv").find("[id=exchangeBillTabLi]").show();a.exchangeEntityExchangeing.initBillForm(b);
}});}};