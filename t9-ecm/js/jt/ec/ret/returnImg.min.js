function ReturnImg(){this.hadInit=false;this.isEdit=false;this.returnImgRowid=0;}ReturnImg._CONS_={GRID:"#returnImgGrid",GRID_ID:"returnImgGrid",PAGER:"#returnImgPager",PAGER_ID:"returnImgPager",JSON_ID:"returnImgJSON",};
ReturnImg.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;a._bindEventHander();a._initJqgrid(b);}},_bindEventHander:function(){var a=this;
},_initJqgrid:function(b){var a=this;$.jgrid.defaults.styleUI="Bootstrap";$(ReturnImg._CONS_.GRID).jqGrid({datatype:"json",url:ctx+"/ec/ret/returnEntity/returnImgListData.htm",height:350,autowidth:true,shrinkToFit:true,rowNum:20,mtype:"POST",viewrecords:true,multiselect:true,rowList:[10,20,30],rownumbers:true,colNames:["所属退货单 ID","所属退货单日志 ID","图片路径","创建时间","操作"],colModel:[{name:"entityId",editable:true,width:120},{name:"logId",editable:true,width:120},{name:"path",editable:true,width:120},{name:"createTime",editable:true,hidedlg:true,hidden:true,width:120},{name:"button",width:120}],pager:ReturnImg._CONS_.PAGER,hidegrid:false,gridComplete:function(){JTSubGridUtils.addRowButtons(ReturnImg._CONS_.GRID_ID);
}});$(ReturnImg._CONS_.GRID).jqGrid("navGrid",ReturnImg._CONS_.PAGER,{add:true,addtitle:"添加",addfunc:a.addReturnImgRow,del:true,deltitle:"删除",delfunc:a.delReturnImg,refresh:false,search:false,edit:false});
},addReturnImgRow:function(){var a=new Date().getTime();JTSubGridUtils.addRow(ReturnImg._CONS_.GRID_ID,"tmpreturnImg"+a);},delReturnImg:function(a){DialogUtils.confirm(function(){JTSubGridUtils.delRows(ReturnImg._CONS_.GRID_ID,a);
});},returnImgGridData2Json:function(){var e=$(ReturnImg._CONS_.GRID);var a=new StringBuffer();a.append("[");var c=e.jqGrid("getDataIDs");for(var b=0;b<c.length;
b++){var d=e.jqGrid("getRowData",c[b]);if(d["isGridRowEdit"]=="Y"){alert("有参数尚未保存，请选择保存或者取消变更!");getElementById(c[b]).focus();return false;}a.append("{");
a.append("'entityId':'").append(d["entityId"]).append("',");a.append("'logId':'").append(d["logId"]).append("',");a.append("'path':'").append(d["path"]).append("',");
a.append("'createTime':'").append(d["createTime"]).append("',");if(!c[b].startsWith("tmpreturnImg")){a.append("'id':'").append(c[b]).append("'");}a.append("},");
}var f=""+a;if(c.length>0){f=f.substring(0,f.length-1);}f=f+"]";$("#"+ReturnImg._CONS_.JSON_ID).val(f);return true;},validateReturnImgGrid:function(b,a){var c=$("#returnImgForm").validate();
return true;},reloadJqgrid:function(b){var a=this;$(ReturnImg._CONS_.GRID).jqGrid("setGridParam",{postData:b}).trigger("reloadGrid");},};