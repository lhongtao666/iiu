function SoLog(){this.hadInit=false;this.isEdit=false;this.soLogRowid=0;}SoLog._CONS_={GRID:"#soLogGrid",GRID_ID:"soLogGrid",DIV_ID:".soLogDiv",PAGER:"#soLogPager",PAGER_ID:"soLogPager",JSON_ID:"soLogJSON",};
SoLog.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;a._bindEventHander();}a._initJqgrid(b);},_bindEventHander:function(){var a=this;
},_initJqgrid:function(c){var a=this;var b=[];if(c){if(typeof c.data!=undefined&&c.data!=null&&c.data.length){b=c.data;}}$(SoLog._CONS_.DIV_ID).empty().append('<table id="'+SoLog._CONS_.GRID_ID+'"></table>                         <div id="'+SoLog._CONS_.PAGER_ID+'"></div>                         <input type="hidden"  name="'+SoLog._CONS_.JSON_ID+'"  id="'+SoLog._CONS_.JSON_ID+'">');
$.jgrid.defaults.styleUI="Bootstrap";$(SoLog._CONS_.GRID).jqGrid({datatype:"jsonstring",datastr:b,autowidth:true,height:"auto",shrinkToFit:true,multiselect:false,sortable:false,rownumbers:true,colNames:["所属订单 ID","操作者 ID","操作者类型 ","操作者","流水来源","操作类型","操作结果","操作时间","备注","订单前状态","当前状态","支付前状态","当前支付状态"],colModel:[{name:"soId",editable:true,width:120,hidedlg:true,hidden:true},{name:"partyId",editable:true,width:120,hidedlg:true,hidden:true},{name:"partyTypeKey",editable:true,width:120,hidedlg:true,hidden:true},{name:"name",editable:true,width:120,formatter:function(d,e,f){return f.name+":"+f.employeeAid;
}},{name:"srcType",editable:true,width:100,formatter:function(d,f,g){var e=g.srcType;if(g.srcType=="flow_sys"){e="订单状态变动生成";}else{if(g.srcType=="option_sys"){e="其他操作生成";
}else{if(g.srcType=="manual"){e="人工";}}}return e;}},{name:"type",editable:true,width:90,formatter:function(d,f,g){var e=g.type;if(g.type=="add"){e="创建";
}else{if(g.type=="edit"){e="修改";}else{if(g.type=="paid_up"){e="已支付";}else{if(g.type=="submit"){e="提交";}else{if(g.type=="pay"){e="支付确认";}else{if(g.type=="comfirm"){e="审核";
}else{if(g.type=="pack"){e="备货";}else{if(g.type=="deliver"){e="打包";}else{if(g.type=="shipping"){e="发货";}else{if(g.type=="back_deliver"){e="撤销发货";}else{if(g.type=="shipped"){e="订单跟进";
}else{if(g.type=="back_complete"){e="撤销完成";}else{if(g.type=="turndown"){e="驳回";}else{if(g.type=="close"){e="关闭";}else{if(g.type=="back"){e="退回处理";}else{if(g.type=="awaiting_refund"){e="退款申请";
}else{if(g.type=="refund"){e="退款完成";}else{if(g.type=="lock"){e="锁定";}else{if(g.type=="unlock"){e="解锁";}else{if(g.type=="other_oper"){e="其他操作";}else{if(g.type=="remark"){e="人工备注";
}else{if(g.type=="task"){e="跟进";}}}}}}}}}}}}}}}}}}}}}}return e;}},{name:"result",editable:true,width:170},{name:"createTime",editable:true,width:100},{name:"comment",editable:true,width:220},{name:"preStatus",editable:true,width:120,hidedlg:true,hidden:true,formatter:function(d,f,g){var e=g.preStatus;
if(g.preStatus=="awaiting_pay"){e="等待支付";}else{if(g.preStatus=="awaiting_post"){e="待提交";}else{if(g.preStatus=="paid_up"){e="已支付";}else{if(g.preStatus=="awaiting_comfirm"){e="待审核";
}else{if(g.preStatus=="lock"){e="锁定";}else{if(g.preStatus=="comfirm"){e="已审核";}else{if(g.preStatus=="packing"){e="待备货";}else{if(g.preStatus=="deliver"){e="待发货";
}else{if(g.preStatus=="shipping"){e="已发货";}else{if(g.preStatus=="shipped"){e="已签收";}else{if(g.preStatus=="complete"){e="已签收";}else{if(g.preStatus=="close"){e="订单关闭";
}else{if(g.preStatus=="back"){e="待退回";}else{if(g.preStatus=="awaiting_refund"){e="申请退款";}else{if(g.preStatus=="refund"){e="已退款";}else{if(g.preStatus=="reject"){e="拒收";
}else{if(g.preStatus=="close_repeat"){e="订单结束（需重发）";}else{if(g.preStatus=="close_lost"){e="包裹丢失";}}}}}}}}}}}}}}}}}}return e;}},{name:"curStatus",editable:true,width:120,hidedlg:true,hidden:true,formatter:function(d,f,g){var e=g.curStatus;
if(g.curStatus=="awaiting_pay"){e="等待支付";}else{if(g.curStatus=="awaiting_post"){e="待提交";}else{if(g.curStatus=="paid_up"){e="已支付";}else{if(g.curStatus=="awaiting_comfirm"){e="待审核";
}else{if(g.curStatus=="lock"){e="锁定";}else{if(g.curStatus=="comfirm"){e="待发货";}else{if(g.curStatus=="packing"){e="待备货";}else{if(g.curStatus=="deliver"){e="待发货";
}else{if(g.curStatus=="shipping"){e="已发货";}else{if(g.curStatus=="shipped"){e="已签收";}else{if(g.curStatus=="complete"){e="已签收";}else{if(g.curStatus=="close"){e="订单作废";
}else{if(g.curStatus=="back"){e="待退回";}else{if(g.curStatus=="awaiting_refund"){e="申请退款";}else{if(g.curStatus=="refund"){e="已退款";}else{if(g.curStatus=="reject"){e="拒收";
}else{if(g.curStatus=="close_repeat"){e="订单结束（需重发）";}else{if(g.curStatus=="close_lost"){e="包裹丢失";}}}}}}}}}}}}}}}}}}return e;}},{name:"prePayStatus",editable:true,width:120,hidedlg:true,hidden:true,formatter:function(d,f,g){var e=g.prePayStatus;
if(g.prePayStatus=="unpaid"){e="未支付";}else{if(g.prePayStatus=="partial"){e="部分支付";}else{if(g.prePayStatus=="paid_off"){e="已支付";}}}}},{name:"curPayStatus",editable:true,width:120,hidedlg:true,hidden:true,formatter:function(d,f,g){var e=g.curPayStatus;
if(g.curPayStatus=="unpaid"){e="未支付";}else{if(g.curPayStatus=="partial"){e="部分支付";}else{if(g.curPayStatus=="paid_off"){e="已支付";}}}return e;}}],pager:SoLog._CONS_.PAGER,hidegrid:false,});
},addSoLog2Grid:function(c){var a=this;if(a.validateSoLogGrid()){var b={soId:$("input[name=soLog_soId").val(),partyId:$("input[name=soLog_partyId").val(),partyTypeKey:$("input[name=soLog_partyTypeKey").val(),name:$("input[name=soLog_name").val(),srcType:$("input[name=soLog_srcType").val(),comment:$("input[name=soLog_comment").val(),preStatus:$("input[name=soLog_preStatus").val(),curStatus:$("input[name=soLog_curStatus").val(),prePayStatus:$("input[name=soLog_prePayStatus").val(),curPayStatus:$("input[name=soLog_curPayStatus").val(),createTime:$("input[name=soLog_createTime").val()};
$("#"+c).jqGrid("addRowData","tmp@soLog"+a.soLogRowid,b,"last");a.soLogRowid++;}},};