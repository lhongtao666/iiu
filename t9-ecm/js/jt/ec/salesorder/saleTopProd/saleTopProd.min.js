$(function(){function b(){this.hadInit=false;this.isEdit=false;this.intervalId=null;this.$container=$("div[srcVal='/ec/salesorder/soEntity/saleTopProd/list.htm']");
}b._CONS_={INDEX_URL:ctx+"/ec/salesorder/soEntity/findTotalAmtTop10ByProd.htm",CHART_DIV:"soTopProdChart",};b.prototype={init:function(d){var c=this;if(!c.hadInit){c.hadInit=true;
c._bindEventHander();c._getData("qryTimeType=this");this.$container.find("button.thisButtonProd").addClass("btn-primary");this.$container.find("button.preButtonProd").removeClass("btn-primary");
var c=this;c.intervalId=setInterval(function(){c._getData("qryTimeType=this");},60*60000);}},createReport:function(e){var d=this;var c=new Report();c.data=e;
c.setLegend(false);c.setToolboxShow(false,false);c.setBarSeriesStyle(true,"right","{c}元");c.setGridXY(140,4);c.initSeries([{type:"bar",colName:"totalAmount",legendName:"金额"}],"prodName",null,"transverse");
c._initChart(b._CONS_.CHART_DIV,null);},_bindEventHander:function(){var c=this;c.$container.off("click",".thisButtonProd").on("click",".thisButtonProd",function(){if(c.intervalId!=null){clearInterval(c.intervalId);
}$(this).addClass("btn-primary");c.$container.find("button.allButtonProd").removeClass("btn-primary");c.$container.find("button.preButtonProd").removeClass("btn-primary");
c._getData("qryTimeType=this");c.intervalId=setInterval(function(){c._getData("qryTimeType=this");},60*60000);});c.$container.off("click",".preButtonProd").on("click",".preButtonProd",function(){if(c.intervalId!=null){clearInterval(c.intervalId);
c.intervalId=null;}$(this).addClass("btn-primary");c.$container.find("button.allButtonProd").removeClass("btn-primary");c.$container.find("button.thisButtonProd").removeClass("btn-primary");
c._getData("qryTimeType=pre");});},_getData:function(c){var d=this;$.ajax({type:"GET",url:b._CONS_.INDEX_URL,data:c,contentType:"application/json",dataType:"json",success:function(e){d.createReport(e);
},error:function(e){DialogUtils.error("错误",e);}});}};var a=new b();a.init();});