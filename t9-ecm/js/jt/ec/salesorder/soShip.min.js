function SoShip(){this.hadInit=false;this.isEdit=false;this.soShipRowid=0;if(typeof SoShip._initialized=="undefined"){SoShip._initialized=true;SoShip.prototype.init=function(b){var a=this;
if(!a.hadInit){a.hadInit=true;a._bindEventHander();a._initJqgrid(b);}};SoShip.prototype._bindEventHander=function(){var a=this;$(document).on("click","#soShipButtonId",function(){a.addSoShip2Grid("soShipGrid");
});$(document).on("click","#soShipSaveButton",function(){a.editSoShip2Grid("soShipGrid");});$(document).on("click","#soShipRestButtonId",function(){});
};SoShip.prototype._initJqgrid=function(d){var b=this;$.jgrid.defaults.styleUI="Bootstrap";$(SoShip.GRID).jqGrid({datatype:"json",url:ctx+"/ec/ec/salesorder/soEntity/soShipListData.htm",height:350,autowidth:true,shrinkToFit:true,rowNum:20,mtype:"POST",viewrecords:true,multiselect:true,rowList:[10,20,30],rownumbers:true,colNames:["所属订单 ID","发货单类型。ship=发货；","收货地址快照 ID","快递公司名称","快递公司编码","快递公司物流单号","API - 物流状态。即第三方快递API的返回状态","API - 返回数据","API - 上次调用时间","API - 签收时间","API - 退回时间","实付物流运费","是否需代收货款","代收货款金额","商品损毁类型。lost=丢失；break=损坏（拒收，需退回）","物流赔偿金额","创建时间","更新时间","操作"],colModel:[{name:"soId",editable:true,width:120},{name:"type",edittype:"select",editoptions:{value:"1:选项 1;2:选项 2;3:选项 3;4:选项 4"},editable:false,width:120,formatter:function(e,f,g){if(g.type=="1"){return"选项 1";
}else{if(g.type=="2"){return"选项 2";}else{if(g.type=="3"){return"选项 3";}else{if(g.type=="4"){return"选项 3";}else{if(g.type==undefined){if(e=="1"){return"选项 1";
}else{if(e=="2"){return"选项 2";}else{if(e=="3"){return"选项 3";}else{if(e=="4"){return"选项 4";}}}}}}}}}return g.type;}},{name:"addrId",editable:true,width:120},{name:"scName",editable:true,width:120},{name:"scCode",editable:true,width:120},{name:"scTrackingNo",editable:true,width:120},{name:"apiStatus",editable:true,width:120},{name:"apiReturnData",editable:true,width:120},{name:"apiRevokeTime",editable:true,width:120},{name:"apiReceiveTime",editable:true,width:120},{name:"apiReturnTime",editable:true,width:120},{name:"actualAmount",editable:true,width:120},{name:"isProxy",edittype:"select",editoptions:{value:"n:否;y:是"},editable:false,width:120,formatter:function(e,f,g){if(g.isProxy=="n"){return"否";
}else{if(g.isProxy=="y"){return"是";}else{if(g.isProxy==undefined){if(e=="n"){return"否";}else{if(e=="y"){return"是";}}}}}return g.isProxy;}},{name:"proxyAmount",editable:true,width:120},{name:"breakType",editable:true,width:120},{name:"breakAmount",editable:true,width:120},{name:"createTime",editable:true,hidedlg:true,hidden:true,width:120},{name:"updateTime",editable:true,hidedlg:true,hidden:true,width:120},{name:"button",width:120}],pager:SoShip.PAGER,hidegrid:false,gridComplete:function(){addRowButtons("soShipGrid",true,b.soShipOperFunc);
},ondblClickRow:function(g,j,f,i){var h=$("#soShipGrid").jqGrid("getRowData",g);b.showSoShip(g,h);}});function a(){soShipRowid=addRow("soShipGrid",b.soShipRowid);
}function c(e){DialogUtils.confirm(function(){delRows("soShipGrid",e);});}$(SoShip.GRID).jqGrid("navGrid",SoShip.PAGER,{add:false,del:true,deltitle:"删除",delfunc:c,refresh:false,search:false,edit:false});
$(window).bind("resize",function(){var e=$(".jqGrid_wrapper").width();$(SoShip.GRID).setGridWidth(e);});};SoShip.prototype.soShipGridData2Json=function(){var b=$("#soShipGrid");
var a=new StringBuffer();a.append("[");var f=b.jqGrid("getDataIDs");for(var c=0;c<f.length;c++){var g=b.jqGrid("getRowData",f[c]);if(g["isGridRowEdit"]=="Y"){alert("有参数尚未保存，请选择保存或者取消变更!");
getElementById(f[c]).focus();return false;}a.append("{");a.append("'soId':'").append(g["soId"]).append("',");var d="";if(g["type"]=="选项 1"){d="1";}else{if(g["type"]=="选项 2"){d="2";
}else{if(g["type"]=="选项 3"){d="3";}else{if(g["type"]=="选项 4"){d="4";}}}}a.append("'type':'").append(d).append("',");a.append("'addrId':'").append(g["addrId"]).append("',");
a.append("'scName':'").append(g["scName"]).append("',");a.append("'scCode':'").append(g["scCode"]).append("',");a.append("'scTrackingNo':'").append(g["scTrackingNo"]).append("',");
a.append("'apiStatus':'").append(g["apiStatus"]).append("',");a.append("'apiReturnData':'").append(g["apiReturnData"]).append("',");a.append("'apiRevokeTime':'").append(g["apiRevokeTime"]).append("',");
a.append("'apiReceiveTime':'").append(g["apiReceiveTime"]).append("',");a.append("'apiReturnTime':'").append(g["apiReturnTime"]).append("',");a.append("'actualAmount':'").append(g["actualAmount"]).append("',");
var e="";if(g["isProxy"]=="否"){e="n";}else{if(g["isProxy"]=="是"){e="y";}}a.append("'isProxy':'").append(e).append("',");a.append("'proxyAmount':'").append(g["proxyAmount"]).append("',");
a.append("'breakType':'").append(g["breakType"]).append("',");a.append("'breakAmount':'").append(g["breakAmount"]).append("',");a.append("'createTime':'").append(g["createTime"]).append("',");
a.append("'updateTime':'").append(g["updateTime"]).append("',");if(!f[c].startsWith("tmp@")){a.append("'id':'").append(f[c]).append("'");}a.append("},");
}var h=""+a;if(f.length>0){h=h.substring(0,h.length-1);}h=h+"]";$("#soShipJSON").val(h);return true;};SoShip.prototype.soShipOperFunc=function(b,a){return b;
};SoShip.prototype.showSoShip=function(e,f){var d=document.getElementById("soShipDetailDiv");if(d.style.display=="none"){$("#soShipBut").click();}$("#soShipSaveButton").removeClass("free_shrink_save_button");
$("input[name=soShipEditRowId]").val(e);$("input[name=soShip_soId]").val(f["soId"]);var b="";if(f["type"]=="选项 1"){b="1";}else{if(f["type"]=="选项 2"){b="2";
}else{if(f["type"]=="选项 3"){b="3";}else{if(f["type"]=="选项 4"){b="4";}}}}var g=document.getElementById("soShip_type").options;for(var a=0;a<g.length;a++){if(g[a].value==b){g[a].selected=true;
break;}}$("input[name=soShip_addrId]").val(f["addrId"]);$("input[name=soShip_scName]").val(f["scName"]);$("input[name=soShip_scCode]").val(f["scCode"]);
$("input[name=soShip_scTrackingNo]").val(f["scTrackingNo"]);$("input[name=soShip_apiStatus]").val(f["apiStatus"]);$("input[name=soShip_apiReturnData]").val(f["apiReturnData"]);
$("input[name=soShip_apiRevokeTime]").val(f["apiRevokeTime"]);$("input[name=soShip_apiReceiveTime]").val(f["apiReceiveTime"]);$("input[name=soShip_apiReturnTime]").val(f["apiReturnTime"]);
$("input[name=soShip_actualAmount]").val(f["actualAmount"]);var c="";if(f["isProxy"]=="否"){c="n";}else{if(f["isProxy"]=="是"){c="y";}}var h=document.getElementById("soShip_isProxy").options;
for(var a=0;a<h.length;a++){if(h[a].value==c){h[a].selected=true;break;}}$("input[name=soShip_proxyAmount]").val(f["proxyAmount"]);$("input[name=soShip_breakType]").val(f["breakType"]);
$("input[name=soShip_breakAmount]").val(f["breakAmount"]);$("input[name=soShip_createTime]").val(f["createTime"]);$("input[name=soShip_updateTime]").val(f["updateTime"]);
};SoShip.prototype.addSoShip2Grid=function(c){var a=this;if(a.validateSoShipGrid()){var b={soId:$("input[name=soShip_soId").val(),type:JTOtherUtils.getcheckValue("soShip_type"),addrId:$("input[name=soShip_addrId").val(),scName:$("input[name=soShip_scName").val(),scCode:$("input[name=soShip_scCode").val(),scTrackingNo:$("input[name=soShip_scTrackingNo").val(),apiStatus:$("input[name=soShip_apiStatus").val(),apiReturnData:$("input[name=soShip_apiReturnData").val(),apiRevokeTime:$("input[name=soShip_apiRevokeTime").val(),apiReceiveTime:$("input[name=soShip_apiReceiveTime").val(),apiReturnTime:$("input[name=soShip_apiReturnTime").val(),actualAmount:$("input[name=soShip_actualAmount").val(),isProxy:JTOtherUtils.getcheckValue("soShip_isProxy"),proxyAmount:$("input[name=soShip_proxyAmount").val(),breakType:$("input[name=soShip_breakType").val(),breakAmount:$("input[name=soShip_breakAmount").val(),createTime:$("input[name=soShip_createTime").val(),updateTime:$("input[name=soShip_updateTime").val()};
$("#"+c).jqGrid("addRowData","tmp@soShip"+a.soShipRowid,b,"last");a.soShipRowid++;}};SoShip.prototype.editSoShip2Grid=function(c){var a=this;if(a.validateSoShipGrid()){var b={soId:$("input[name=soShip_soId").val(),type:JTOtherUtils.getcheckValue("soShip_type"),addrId:$("input[name=soShip_addrId").val(),scName:$("input[name=soShip_scName").val(),scCode:$("input[name=soShip_scCode").val(),scTrackingNo:$("input[name=soShip_scTrackingNo").val(),apiStatus:$("input[name=soShip_apiStatus").val(),apiReturnData:$("input[name=soShip_apiReturnData").val(),apiRevokeTime:$("input[name=soShip_apiRevokeTime").val(),apiReceiveTime:$("input[name=soShip_apiReceiveTime").val(),apiReturnTime:$("input[name=soShip_apiReturnTime").val(),actualAmount:$("input[name=soShip_actualAmount").val(),isProxy:JTOtherUtils.getcheckValue("soShip_isProxy"),proxyAmount:$("input[name=soShip_proxyAmount").val(),breakType:$("input[name=soShip_breakType").val(),breakAmount:$("input[name=soShip_breakAmount").val(),createTime:$("input[name=soShip_createTime").val(),updateTime:$("input[name=soShip_updateTime").val()};
$("#"+c).jqGrid("setRowData",$("#soShipEditRowId").val(),b);}};SoShip.prototype.addSoShipValidate=function(){};SoShip.prototype.removeSoShipValidate=function(){};
SoShip.prototype.validateSoShipGrid=function(b,a){var c=$("#soShipForm").validate();return true;};SoShip.prototype.reloadJqgrid=function(g){var c=this;
var f={};if(g&&jQuery.type(g)=="string"){g=decodeURIComponent(g,true);var b=g.split("&");if(b.length){for(var d=0;d<b.length;d++){var e=b[d].split("=");
if(e.length==2&&e[1]){f[e[0]]=e[1];}}}}else{f=g;}var a=$(SoShip.GRID).jqGrid("getGridParam","postData");$.extend(a,f);$(SoShip.GRID).jqGrid("setGridParam",{search:true}).trigger("reloadGrid",[{page:1}]);
};}}SoShip.GRID="#soShipGrid";SoShip.PAGER="#soShipPager";