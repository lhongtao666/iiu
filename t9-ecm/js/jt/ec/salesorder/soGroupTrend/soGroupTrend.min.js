$(function(){function b(){this.hadInit=false;this.isEdit=false;}b._CONS_={INDEX_URL:ctx+"/ec/rp/reportProfit/getDayProfitData.htm",CHART_DIV:"soGroupTrend"};
b.prototype={init:function(d){var c=this;if(!c.hadInit){c.hadInit=true;if(qryType=="group"){$(".titleName").html("我的部门日订单走势");}else{if(qryType=="all"){$(".titleName").html("日订单走势");
}}$(".thisButton").addClass("btn-primary");c._bindEventHander();c._refreshChart();}},createReport:function(h){var o=this;var f=new Report();f.data=h;var k=0;
var l=0;var p=0;var c=0;var d=0;var j=0;var n=0;var m=0;for(var g=0;g<h.length;g++){l=l+h[g].placeCount;k=k+h[g].placeAmount;c=c+h[g].auditCount;p=p+h[g].auditAmount;
j=j+h[g].shipCount;d=d+h[g].shipAmount;m=m+h[g].signCount;n=n+h[g].signAmount;}f.setLegend(true,["下单","审单","发货","签收"],null);f.legend.formatter=function(i){if(i=="下单"){return i+"("+l+"单/"+k+"元)";
}else{if(i=="审单"){return i+"("+c+"单/"+p+"元)";}else{if(i=="发货"){return i+"("+j+"单/"+d+"元)";}else{if(i=="签收"){return i+"("+m+"单/"+n+"元)";}}}}};f.setToolboxShow(false,false);
f.tooltip.trigger="axis";f.tooltip.formatter=function(u,t,v){if(u[0].value=="-"){return"暂无数据";}var s=u[0].name+"时";for(var r=0,q=u.length;r<q;r++){s+="<br/>"+u[r].seriesName+" : "+u[r].value+"元";
}return s;};f.initSeries([{type:"line",colName:"placeAmount",legendName:"下单"},{type:"line",colName:"auditAmount",legendName:"审单"},{type:"line",colName:"shipAmount",legendName:"发货"},{type:"line",colName:"signAmount",legendName:"签收"}],"timeFrame");
f.setXAxisInfo("时间",{show:true,onZero:true,lineStyle:{color:"#C1C1C1",width:2,type:"solid"}});f.setYAxisInfo("金额",{show:true,onZero:true,lineStyle:{color:"#C1C1C1",width:2,type:"solid"}});
f._initChart(b._CONS_.CHART_DIV);var e=new Date();},_bindEventHander:function(){var c=this;$(".thisButton").unbind("click");$(document).on("click",".thisButton",function(){$(this).addClass("btn-primary");
$(".preButton").removeClass("btn-primary");c._refreshChart();});$(".preButton").unbind("click");$(document).on("click",".preButton",function(){$(this).addClass("btn-primary");
$(".thisButton").removeClass("btn-primary");c._refreshChart();});},_refreshChart:function(){var c="Q__D__BW__place_time_="+DateUtils.format(new Date(),"yyyy-MM-dd")+" 00:00:00,"+DateUtils.format(new Date(),"yyyy-MM-dd")+" 23:59:59,";
if($(".preButton").hasClass("btn-primary")){c="Q__D__BW__place_time_="+DateUtils.getBeforeDate(1)+" 00:00:00"+DateUtils.getBeforeDate(1)+" 23:59:59";}c+="&qryType="+qryType;
this._getData(c);},_getData:function(c){var d=this;$.ajax({type:"GET",url:b._CONS_.INDEX_URL,data:c,contentType:"application/json",dataType:"json",success:function(e){d.createReport(e);
},error:function(e){DialogUtils.error("错误",e);}});}};var a=new b();a.init();});