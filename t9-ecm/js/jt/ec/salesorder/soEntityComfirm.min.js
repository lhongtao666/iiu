$(function(){var a=new SoEntityComfirm();a.init();});function SoEntityComfirm(){this.soEntityBase=new SoEntityBase();}SoEntityComfirm._CONS_={SO_COMFIRM_URL:ctx+"/ec/salesorder/soEntity/comfirm.htm",SO_TO_COMFIRM_URL:ctx+"/ec/salesorder/soEntity/toComfirm.htm",SO_PLACE_HISTORY_URL:ctx+"/ec/salesorder/soEntity/orderHistory.htm",SO_DETAIL_PAGE_URL:ctx+"/ec/salesorder/soEntity/detail.htm",};
$(document).ready(function(){$("#isCloudWarehourse").trigger("change");});SoEntityComfirm.prototype={init:function(){this.soEntityBase.init();this._initComfirm();
this._bindEventHander();if(ResUtils.canShow("soEntityConfirm.button.orderHistory")){this._orderHistory();}},_orderHistory:function(){var a=this;var b=$("#soEntityForm").find("input[name=csCode]").val();
var c=DateUtils.getBeforeMonth(1)+" 00:00:00";FormUtils.loadData(SoEntityComfirm._CONS_.SO_PLACE_HISTORY_URL+"?csSearchParam="+b+"&Q__D__BW__entity.place_time_="+c,function(k){var h=k.rows;
if(h&&h.length>0){var l=new StringBuffer();for(var g=0;g<h.length;g++){var f=SoEntityUtils.formatCashType(h[g].cashType);var d=SoEntityUtils.formatStatus(h[g]);
var e=g+1;l.append("<tr>");l.append("<td style='width: 5%'>"+e+"</td>");l.append("<td style='width: 15%' ><a href='#' class='soNoDetail' value='"+h[g].soNo+"'>"+h[g].soNo+"</a></td>");
l.append("<td style='width: 20%'>"+h[g].prodNames+"</td>");l.append("<td style='width: 10%'>"+f+"</td>");l.append("<td style='width: 10%'>"+h[g].totalAmount+"</td>");
l.append("<td style='width: 15%'>"+d+"</td>");l.append("<td style='width: 10%'>"+h[g].placerName+"</td>");l.append("<td style='width: 15%'>"+h[g].placeTime+"</td>");
l.append("</tr>");}$("#orderHistory").empty().append(l.toString());}},null,true);},_initComfirm:function(){if($("select[name=payType]").val()=="cash"||$("select[name=payType]").val()=="point"){$("select[name=account]").attr("disabled",true);
FinanceAccountSelect.initSelectActived("account",null);}else{FinanceAccountSelect.initSelectActived("account",$("input[name=accountHide]").val());}if(isConfirmPage=="y"){ConfigUtils.findByKey("system.isBanDelayConfirm",function(a){if(a.success){$(".othersDiv").hide();
}else{$(".othersDiv").show();}$(".delayConfirmTime").find(".simple-time-select").remove();$("#delayConfirmTime").removeAttr("disabled");});}ConfigUtils.findByKey("soEntity.isReceivePhone",function(a){if(a.success){$("#receivePhoneDiv").show();
$("input[name=tranPhone]").attr("readonly",true);$("input[name=recPhone]").attr("readonly",true);}else{$("#receivePhoneDiv").hide();}});this._initPreNextBtn();
this._initTabName();this._comfirmTypeSearch();this._hideNotGrantBtn();this._dealBtnStatus();$(".cashSettingDiv").hide();if($("input[name=cashCode]").val()){$(".cashSettingInfoDiv").show();
}},_dealBtnStatus:function(){var a=$("#soEntityForm").find("[name=isLock]").val();if(a=="y"){$(".soUnLock").removeAttr("disabled");$(".soAddLock").attr("disabled","disabled");
$(".comfirmSoBtn").attr("disabled","disabled");$(".repeatAuditSoBtn").attr("disabled","disabled");$(".trunDSoBtn").attr("disabled","disabled");$(".closeSoBtn").attr("disabled","disabled");
}if(a=="n"){$(".soUnLock").attr("disabled","disabled");$(".soAddLock").removeAttr("disabled");$(".comfirmSoBtn").removeAttr("disabled");$(".repeatAuditSoBtn").removeAttr("disabled");
$(".trunDSoBtn").removeAttr("disabled");$(".closeSoBtn").removeAttr("disabled");}$(".cashSettingDiv").hide();if($("input[name=cashCode]").val()){$(".cashSettingDiv").show();
}},_hideNotGrantBtn:function(){if(!ResUtils.canShow("soEntityConfirm.button.splitOrder")){$(".splitOrderBtn").hide();}if(!ResUtils.canShow("soEntityConfirm.button.orderHistory")){$(".playHistory").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.soAddLock")){$(".soAddLock").hide();}if(!ResUtils.canShow("soEntityConfirm.button.soUnLock")){$(".soUnLock").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.comfirm")){$(".comfirmSoBtn").hide();$(".saveSoBtn").hide();}if(!ResUtils.canShow("soEntityConfirm.button.repeatAudit")){$(".repeatAuditSoBtn").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.close")){$(".closeSoBtn").hide();}if(!ResUtils.canShow("soEntityConfirm.button.turndown")){$(".trunDSoBtn").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.save")){$(".saveSoBtn").hide();}if(ResUtils.canShow("soEntityConfirm.button.viewPhone")){$(".viewPhone").show();
}else{$(".viewPhone").hide();}},_bindEventHander:function(){var a=this;$(document).on("click",".soNoDetail",function(){var d=$("#soEntityForm").find(".csName").val();
var c=$(this).attr("value");var b=ResUtils.canShow("mySoEntity.button.showScTrackNo")?"can":"cannot";JTTabUtils.addOrRefreshTab(SoEntityComfirm._CONS_.SO_DETAIL_PAGE_URL+"?soNo="+c+"&canShowScTrankNo="+b,d+"的订单明细");
});$(document).on("mouseenter",".playHistory",function(){$("#orderHistoryContent").stop().show("fast");});$("#orderHistoryContent").hover(function(b){$("#orderHistoryContent").stop(true,true).show();
},function(b){if(!$(".playHistory").hasClass("playHistoryOn")){$("#orderHistoryContent").stop().hide("fast");}});$(document).on("mouseleave",".playHistory",function(){if(!$(".playHistory").hasClass("playHistoryOn")){$("#orderHistoryContent").stop().hide("fast");
}});$(document).on("click",".playHistory",function(){if($(this).hasClass("playHistoryOn")){$(this).removeClass("playHistoryOn");}else{$(this).addClass("playHistoryOn");
}});$("body").on("click",".splitOrderBtn",function(){var c=$("input[name=soNo]").val();var b=$("input[name=id]").val();a._splitSo(c,b.toString());});$("body").on("click",".splitPordBtn",function(){var b=$(".splitCount").val();
if(b){a._splitSoList(b);}else{DialogUtils.error(msgCode.ERROR,"请填写拆分次数",$("div.splitSoPane"));}});$("body").on("click",".splitSoBtn",function(){a._splitSoSave();
});$("body").on("click",".soAddLock",function(){var b=$("#soEntityForm").find("[name=id]").val();SoEntityUtils.lock(b,null,function(){a._dealBtnStatus();
});});$("body").on("click",".soUnLock",function(){var b=$("#soEntityForm").find("[name=id]").val();SoEntityUtils.unLock(b,null,function(){a._dealBtnStatus();
});});$(document).on("click",".saveSoBtn",function(){a._save("n");});$(document).on("click",".comfirmSoBtn",function(){a._save("y","n");});$(document).on("click",".repeatAuditSoBtn",function(){a._save("y","y");
});$(document).on("change","#scCode",function(){$("[name='soShipPo.scCode']").val($(this).val());var b=$("#scCode").find("option:selected").attr("attr-mobile");
$("#servicePhoneBtn").attr("masknum",b);});$(document).on("change",".splitAmount",function(){var m=0;var e=0;var b=$(this).val();var g=$(this).closest("tr");
var o=$($(this).closest("td")).attr("rowspan");var t=$(g);var h=[];h.push(t);var j=false;if(parseInt(o)>1){var d=t;for(var n=0;n<parseInt(o)-1;n++){var s=d.next();
var f=$(s);d=f;h.push(f);}}for(var n=0;n<h.length;n++){var q=$(h[n]).find(".splitCountItem").val();var p=$(h[n]).find(".prodSkuPrice").text();var r=parseInt($(h[n]).find(".skuPercentLimit").text());
if(!r){r=0;}var c=parseFloat(r);if(percentLimit&&parseInt(percentLimit)&&parseInt(percentLimit)<c||c<1){c=parseInt(percentLimit);}if(parseFloat(c)>0){e=parseFloat(parseFloat(e)+parseFloat(p)*parseInt(q)*parseFloat(c)/100).toFixed(2);
j=true;}else{e=parseFloat(parseFloat(e)+parseFloat(p)*parseInt(q)).toFixed(2);}}if(j&&parseFloat(b)<parseFloat(e)){var l=$(this);var k="商品有折扣限制, 最低金额为"+parseFloat(e);
l.attr("title","").attr("data-container","body").attr("data-toggle","popover").attr("data-content","<h4 style='color:red;'>"+k+"</h4>").attr("data-html","true").attr("data-placement","bottom");
l.popover("show");l.val(parseFloat(e));setTimeout(function(){a.destroyTipPopover(l);},3000);}$(".splitSoListDiv tbody").find(".splitAmount").each(function(){m=m+parseFloat($(this).val());
});$(".splitAmountDiv").empty().append(m);});$(document).on("click",".trunDSoBtn",function(){var c=[$("#soEntityForm").find("[name=id]").val()];var b=[$("input[name=soNo]").val()];
SoEntityUtils.trunDownOrderLayer(c,b,function(){if(a.nextSoId){window.location.href=SoEntityComfirm._CONS_.SO_TO_COMFIRM_URL+"?soId="+a.nextSoId+"&filterType=belong";
}else{window.location.href=SoEntityBase._CONS_.SO_DETAIL_URL+"?soNo="+$("input[name=soNo]").val()+"&canShowScTrankNo=true";}});});$(document).on("click",".closeSoBtn",function(){var c=[$("#soEntityForm").find("[name=id]").val()];
var b=[$("input[name=soNo]").val()];SoEntityUtils.closeOrderLayer(c,b,function(){if(!isPoint){isPoint="false";}if(a.nextSoId){window.location.href=SoEntityComfirm._CONS_.SO_TO_COMFIRM_URL+"?soId="+a.nextSoId+"&filterType=belong";
}else{window.location.href=SoEntityBase._CONS_.SO_DETAIL_URL+"?soNo="+$("input[name=soNo]").val()+"&canShowScTrankNo=true";}});});$(document).on("change","#isCloudWarehourse",function(){var b=noCloudShipCompany.split(",");
if($(this).val()=="1"){for(var d=0;d<b.length;d++){$("#scCode").find("option[value='"+b[d]+"']").css("display","none");}if($("[name='soShipPo.scCode']").val()){$("#scCode").find("option[value='"+$("[name='soShipPo.scCode']").val()+"']").prop("selected","selected");
$("#scCode").trigger("change");}else{$("#scCode option").each(function(){if($(this).css("display")=="block"){$(this).prop("selected","selected");$("#scCode").trigger("change");
return false;}});}}else{for(var d=0;d<b.length;d++){$("#scCode").find("option[value='"+b[d]+"']").css("display","block");}}var c=$("#scCode").find("option:selected").attr("attr-mobile");
$("#servicePhoneBtn").attr("masknum",c);});$(document).on("change","#scCode",function(){var c=$("#scCode option:selected").attr("jdPayStyle");var b=$("#cashType").find("option:selected").val();
if(c=="1"){$("#cashType option").each(function(){$(this).css("display","none");});$("#cashType").find("option[value='cod']").css("display","block");if(!b){$("#cashType").find("option[value='cod']").prop("selected","selected");
}$("#cashType").find("option[value='pay_sub']").css("display","block");}else{if(c=="2"){$("#cashType option").each(function(){$(this).css("display","none");
});$("#cashType").find("option[value='pay']").css("display","block");if(!b){$("#cashType").find("option[value='pay']").prop("selected","selected");}$("#cashType").find("option[value='green']").css("display","block");
$("#cashType").find("option[value='free']").css("display","block");}else{if(c=="3"||!c){$("#cashType option").each(function(){$(this).css("display","block");
});}}}});$(document).on("click",".preSoBtn",function(){window.location.href=SoEntityComfirm._CONS_.SO_TO_COMFIRM_URL+"?soId="+a.preSoId+"&filterType=belong";
});$(document).on("click",".nextSoBtn",function(){window.location.href=SoEntityComfirm._CONS_.SO_TO_COMFIRM_URL+"?soId="+a.nextSoId+"&filterType=belong";
});$(document).on("click",".prevBtn",function(){JTTabUtils.closeTab($(window.top.document).find(".page-tabs-content").find(".active").attr("data-id"));
});},_splitSo:function(b,c,d){var a=this;$("#splitSoModalContainer").modal("show");$(".splitSoListContent").hide();$(".splitSoBtnContent").hide();$(".splitSoListDiv").empty();
$("#splitSoModal").text(b+" -- 订单拆分");a._buildSplitStr(b,c);},_splitSoList:function(a){var n=this;var l=new StringBuffer();var k=n.soItemPos;var g=n.soEntityPo;
l.append("<table class='table table-bordered'>");l.append("<thead>");l.append("<tr>");l.append("<th width='5%'>#</th>");l.append("<th width='12%'>拆分订单</th>");
l.append("<th width='25%'>产品名称</th>");l.append("<th style='display:none;'>折扣限制</th>");l.append("<th style='display:none;'>商品原价</th>");l.append("<th width='12%'>拆出数量</th>");
l.append("<th width='12%'>产品金额</th>");l.append("<th width='12%'>订单金额</th>");l.append("<th width='22%'>发货时间</th>");l.append("</tr>");l.append("</thead>");
l.append("<tbody>");var c=g.totalAmount-g.subAmount;var f=parseInt(c/a);var b=c-(f*(a-1));if(b.toString().indexOf(".")!=-1){b=b.toFixed(2);}$(".splitAmountDiv").empty().append(c);
for(var e=1;e<=a;e++){var m=0;for(var d=0;d<k.length;d++){var h=parseInt((k[d].count/a).toFixed(0));m=e*h;if(m>k[d].count){h=k[d].count-((e-1)*h);}else{if(e==a&&m<k[d].count){h=(k[d].count-m)+h;
}}if(a==1){break;}else{l.append("<tr");if(d==0){if(e==1){l.append(" soId="+$("#splitSoForm").find("input[name=soId]").val()+" soNo="+$("#splitSoForm").find("input[name=soNo]").val());
}l.append(" count="+k.length+">");l.append("<td rowspan='"+k.length+"'>"+e+"</td>");if(e==1){l.append("<td rowspan='"+k.length+"'>"+$("#splitSoForm").find("input[name=soNo]").val()+"</td>");
}else{l.append("<td rowspan='"+k.length+"'></td>");}}else{l.append(">");}l.append("<td >"+k[d].prodName+"</td>");l.append("<td style='display:none;' class='skuPercentLimit'>"+k[d].skuPercentLimit+"</td>");
l.append("<td style='display:none;' class='prodSkuPrice'>"+k[d].prodSkuPrice+"</td>");l.append("<td class='itemCount itemPord"+d+"' itemProd=itemPord"+d+" ");
l.append("itemCount="+h+" itemCountTotal="+k[d].count+" itemId="+k[d].id+"><input type='number' class='form-control splitCountItem' validatetype='default' value='"+h+"'></td>");
l.append("<td class='splitMoney' splitPrice="+k[d].salesPrice+">"+(k[d].salesPrice*h).toFixed(1)+"</td>");if(d==0){l.append("<td rowspan='"+k.length+"'><input type='number' class='form-control splitAmount' validatetype='default' value='"+(e==a?b:f)+"'></td>");
}if(d==0){l.append("<td rowspan='"+k.length+"'><input class='laydate-icon form-control layer-date' name='splitShipTime' placeholder='yyyy-mm-dd hh:mm:ss' onclick='laydate({istime: true, min: laydate.now(1), format: \"YYYY-MM-DD hh:mm:ss\"})'></td>");
l.append("</tr>");}}}}l.append("</tbody>");l.append("<tfoot>");l.append("<tr>");l.append("<td colspan='4'></td>");l.append("<td>拆分金额:</td>");l.append("<td colspan='2' class='splitAmountDiv'>"+c+"</td>");
l.append("</tr");l.append("</tfoot>");l.append("</table>");$(".splitSoListContent").show();$(".splitSoBtnContent").show();$(".splitSoListDiv").empty().append(l.toString());
},_splitSoSave:function(){var i=[];var g=0;var h=[];var f="";var b="";var j="";var a="";var c="";var e=false;var d=parseFloat($(".splitAmountDiv").text());
if(d!=(this.soEntityPo.totalAmount-this.soEntityPo.subAmount)){DialogUtils.error(msgCode.ERROR,"拆分金额必须等于订单总金额");return false;}$(".splitSoListDiv tbody").find("tr").each(function(){g++;
if($(this).attr("count")){f=$(this).attr("soId");b=$(this).attr("soNo");j=$(this).find("input[name=splitShipTime]").val();a=$(this).attr("count");c=$(this).find(".splitAmount").val();
}var l={itemId:$(this).find(".itemCount").attr("itemId"),count:$(this).find(".splitCountItem").val(),};if(l.count<0){e=true;return;}h.push(l);if(g==a){var k={id:f,soNo:b,shipTime:j,soItems:h,totalAmount:c};
i.push(k);g=0;h=[];}});if(e){DialogUtils.error(msgCode.ERROR,"产品数量不能小于0");return;}FormUtils.submit(ctx+"/ec/salesorder/soEntity/splitOrder.htm","splitPos="+JSON.stringify(i),function(k){if(k.success){$("#splitSoModalContainer").modal("hide");
DialogUtils.success(msgCode.SUCCESS,k.msg);$("#tabSoWaitDeliver").find(".soEntitySearch").trigger("click");}else{DialogUtils.error(msgCode.ERROR,k.msg);
}});},_buildSplitStr:function(b,c){var a=this;var d=new StringBuffer();$("#splitSoForm").find("input[name=soNo]").val(b);$("#splitSoForm").find("input[name=soId]").val(c);
FormUtils.submit(ctx+"/ec/salesorder/soEntity/edit.htm","soNo="+b,function(g){var f=g.soEntityPo.soItemPos;a.soItemPos=f;a.soEntityPo=g.soEntityPo;d.append("<table class='table table-bordered'>");
d.append("<thead>");d.append("<tr>");d.append("<th width='10%'>#</th>");d.append("<th width='30%'>商品名称</th>");d.append("<th width='15%'>总数量</th>");d.append("<th width='20%'>待分金额</th>");
d.append("<th width='25%'>拆分次数</th>");d.append("</tr>");d.append("</thead>");d.append("</tbody>");for(var e=0;e<f.length;e++){d.append("<tr>");d.append("<td>"+(e+1)+"</td>");
d.append("<td>"+f[e].prodName+"</td>");d.append("<td>"+f[e].count+"</td>");if(e==0){d.append("<td rowspan='"+f.length+"'>"+(g.soEntityPo.totalAmount-g.soEntityPo.subAmount)+"</td>");
d.append("<td rowspan='"+f.length+"'><div class='col-sm-8'><input type='number' class='form-control splitCount' validatetype='default'></div>");d.append("<button type='button' class='btn btn-sm  btn-primary splitPordBtn'>拆分</button>");
d.append("</td>");}d.append("</tr>");}d.append("</tbody>");d.append("</table>");$(".splitPordDiv").empty().append(d.toString());});},_save:function(n,h){var i=this;
var t=$("[name='auditCount']").val();if("y"==h&&t==0){DialogUtils.error(msgCode.ERROR,"未审核过的订单不能复审");return;}else{if("n"==h&&t==1){DialogUtils.error(msgCode.ERROR,"已初审过的订单不能审核");
return;}}var c=$("[name='addrId']").val();if(!c){DialogUtils.error(msgCode.ERROR,"请选择收货地址");return;}var d=$(".defaultAddr").find(".addrName").val();if(!d){DialogUtils.error(msgCode.ERROR,"收货地址请填写收货人");
return;}var s=$(".defaultAddr").find(".addrMobile").val();if(!s){DialogUtils.error(msgCode.ERROR,"收货地址请填写联系方式");return;}var b=$(".defaultAddr").find(".addrInfo").val();
if(!b){DialogUtils.error(msgCode.ERROR,"收货地址请填写地址信息");return;}if(!$("#soProfitTip").is(":hidden")){DialogUtils.error(msgCode.ERROR,$("#soProfitTip").val());
return;}var f=$("#scCode").val();if(!f){DialogUtils.error(msgCode.ERROR,"请选择快递方式");return;}var k=true;$("#soItemTbody").find(".soItemCount").each(function(){if($(this).val()==0){k=false;
DialogUtils.error(msgCode.ERROR,"商品数量不能为0");return false;}});if(!k){return;}var m=$("[name=totalAmount]").val();if(m==0){var p=$("[name=cashType]").val();
if("free"!=p){DialogUtils.error(msgCode.ERROR,"非免费已付的订单总金额不能为0");return;}}var l=$("#delayConfirmTime").val();if(l!=""){$("#isDelay").val("y");var j=l.replace(/-/g,"/");
var r=new Date(j);var a=r.getTime();var o=new Date().getTime();if(a<o){DialogUtils.error(msgCode.ERROR,"延期审单时间必须为未来的某个时间");return;}}else{$("#isDelay").val("n");
}if($("#soEntityForm").valid()){var e=$("#soItemTbody").find("tr");if(!e||e.length<1){DialogUtils.error(msgCode.ERROR,"请添加要购买的商品");return;}$("[name='soShipPo.scName']").val($("#scCode").find("option:selected").text());
$("[name='soShipPo.scCode']").val($("#scCode").find("option:selected").val());$("input[name=prodAmount]").val($("#prodPriceTotal").text());$("input[name=prodQty]").val($("#itemCountTotal").text());
var q=$("#"+SoEntityBase._CONS_.EDIT_FORM_ID).serialize()+"&isComfirm="+n+"&isRepeatAudit="+h+"&soItemJson="+i.soEntityBase.getSoItemData()+"&soProfitJson="+i.soEntityBase.getSoProfitData()+"&operComment="+$("input[name=operComment]").val()+"&isBatch=n";
if(n=="y"){var g="是否确认审核订单？";}else{var g="是否确认保存订单？";}DialogUtils.confirmWithOptions({title:g,text:"",confirmButtonText:"确认",yesFunc:function(){i._submitEntity(q,n);
}});}},_submitEntity:function(d,b){var c=this.nextSoId;ButtonUtils.disableBtn("saveSoBtn");var a=SoEntityComfirm._CONS_.SO_COMFIRM_URL;FormUtils.submit(a,d,function(f){ButtonUtils.enableBtn("saveSoBtn");
if(f.success){if(b=="y"){DialogUtils.success("审核通过");if(c){window.location.href=SoEntityComfirm._CONS_.SO_TO_COMFIRM_URL+"?soId="+c+"&filterType=belong";
}else{window.location.href=SoEntityBase._CONS_.SO_DETAIL_URL+"?soNo="+$("input[name=soNo]").val()+"&canShowScTrankNo=true";}JTTabUtils.refreshTable(ctx+"/ec/salesorder/soEntity/comfirmMgr/list.htm","订单审核","parentCMD");
}else{if(b=="n"){DialogUtils.success("保存成功");var e=f.soEntityPo;if(e&&e.soShipPo){$("input[name=addrId]").val(e.soShipPo.addrId);$("input[name=oldAddrId]").val(e.soShipPo.addrId);
}JTTabUtils.refreshTable(ctx+"/ec/salesorder/soEntity/comfirmMgr/list.htm","订单审核","parentCMD");}}}else{DialogUtils.error(msgCode.FAIL_MSG,f.msg);}},function(){ButtonUtils.enableBtn("saveSoBtn");
DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});},_initPreNextBtn:function(){var d=$("#soEntityForm").find("[name=id]").val();var b=window.localStorage.getItem("comfirm_"+currentUserId);
if(b){var c=b.split(",");for(var a=0;a<c.length;a++){if(d==c[a]){if(a>0){this.preSoId=c[a-1];$(".preSoBtn").show();}if(a<c.length-1){this.nextSoId=c[a+1];
$(".nextSoBtn").show();}break;}}}},_initTabName:function(){var a=$("input[name=soNo]").val();if($("select[name=payType]").val()=="cash"){$("select[name=account]").attr("disabled",true);
}var b="订单["+a+"]审核";JTTabUtils.renameForActiveTab(b);},_comfirmTypeSearch:function(){var a=this;$("#operComment").bsSuggest("destroy");$("#operComment").bsSuggest({url:ctx+"/gl/cate/cate/getOptions.htm?typeKey=system&pKey=ApprovedType",effectiveFields:["name"],searchFields:["name"],effectiveFieldsAlias:{name:"审核备注"},showBtn:false,inputWarnColor:"",showHeader:false,idField:"id",keyField:"name",getDataMethod:"url",processData:function(d){var c,b,e={value:[]};
if(!d||d.records===0){return false;}b=d.length;for(c=0;c<b;c++){e.value.push({id:d[c].id,name:d[c].name});}return e;}});},destroyTipPopover:function(a){a.popover("destroy");
},};