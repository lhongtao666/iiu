$(function(){var a=new StockPrintShipList();a.init();});function StockPrintShipList(){this.hadInit=false;this.isEdit=false;this.pageCount=0;this.data=null;
}StockPrintShipList._CONS_={};StockPrintShipList.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();$(".prevShipBtn").attr("disabled","disabled");
}},_bindEventHander:function(){var a=this;$("body").on("click",".saveAndNextBtn",function(){var d=$("input[name=scTrackingNo]").val();var c=$("input[name=soId]").val();
var e={soId:c,key:"scTrackingNo",value:d};var b=WaitDeliver._CONS_.SAVE_GRID_URL;FormUtils.submit(b,e,function(f){if(f.success){if($(".totalCount").text()!=1){$(".nextShipBtn").trigger("click");
}$("input[name=scTrackingNo]").val("");DialogUtils.success(msgCode.INFO,f.msg);}else{DialogUtils.error(msgCode.FAIL_MSG,f.msg);}},function(){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);
});});$("body").on("click",".prevShipBtn",function(){a.pageCount-=1;$(".firstCount").text(a.pageCount+1);a._loadNextData(a.pageCount);$(".firstCount").trigger("change");
});$("body").on("click",".nextShipBtn",function(){a.pageCount+=1;$(".firstCount").text(a.pageCount+1);a._loadNextData(a.pageCount);$(".firstCount").trigger("change");
});$("body").on("click",".printShip",function(){$(".printShipIframe").removeAttr("src");$(".printShipIframe").attr("src",ctx+"/gl/tpl/tplPrint/print.htm?entityId="+$("input[name=soId]").val()+"&entityType=ship"+"&proxyType="+proxyType);
$(".printShip").attr("disabled",true);$(".printOutSale").attr("disabled",false);});$("body").on("click",".printOutSale",function(){$(".printShipIframe").removeAttr("src");
$(".printShipIframe").attr("src",ctx+"/gl/tpl/tplPrint/print.htm?entityId="+$("input[name=soId]").val()+"&entityType=out_sale"+"&proxyType="+proxyType);
$(".printShip").attr("disabled",false);$(".printOutSale").attr("disabled",true);});$("body").on("click",".soEntityReload",function(){var b=$("input[name=soId]").val();
$(".printShipIframe").removeAttr("src");$(".printShipIframe").attr("src",ctx+"/gl/tpl/tplPrint/print.htm?entityId="+$("input[name=soId]").val()+"&entityType="+entityType+"&proxyType="+proxyType);
});$(document).on("click",".prevBtn",function(){JTTabUtils.closeTab($(window.top.document).find(".page-tabs-content").find(".active").attr("data-id"));
var b=new WaitDeliver();b.clear(true);});$("body").on("change",".firstCount",function(){if($(this).text()==1){$(".prevShipBtn").attr("disabled","disabled");
}else{$(".prevShipBtn").removeAttr("disabled");}if($(this).text()==$(".totalCount").text()){$(".nextShipBtn").attr("disabled","disabled");}else{$(".nextShipBtn").removeAttr("disabled");
}});},_loadNextData:function(a){if(entityType=="out_sale"){$(".printShip").attr("disabled",false);$(".printOutSale").attr("disabled",true);}else{if(entityType=="ship"){$(".printShip").attr("disabled",true);
$(".printOutSale").attr("disabled",false);}else{$(".printShip").attr("disabled",true);$(".printOutSale").attr("disabled",true);}}$("input[name=scTrackingNo]").trigger("select");
$(".totalCount").text(soInfos.length);if(soInfos.length==1){$(".nextShipBtn").attr("disabled","disabled");}$("input[name=soId]").val(soInfos[a].entityId);
$("input[name=soNo]").val(soInfos[a].soNo);$("input[name=csName]").val(soInfos[a].csName);$("input[name=scName]").val(soInfos[a].scName);$("input[name=scTrackingNo]").val(soInfos[a].scTrackingNo);
$(".printShipIframe").removeAttr("src");$(".printShipIframe").attr("src",ctx+"/gl/tpl/tplPrint/print.htm?entityId="+soInfos[a].entityId+"&entityType="+entityType+"&proxyType="+proxyType);
}};