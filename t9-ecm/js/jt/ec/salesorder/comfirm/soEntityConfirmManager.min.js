function SoEntityConfirmManager(){this.simpleShowLastFollow=(simpleShowLastFollow=="n"?false:true);this.simpleShowComment=(simpleShowComment=="n"?false:true);
}SoEntityConfirmManager._CONS_={EMPLOYEE_LIST_URL:ctx+"/crm/ou/employee/listEmployees.htm",};SoEntityConfirmManager.prototype={init:function(){var a=this;
this._locateToGlHelp();this._initSearch();this._initConfirm();ConfigUtils.findByKey("system.isBanDelayConfirm",function(b){if(b.success){$("#soDelayComfirmTabLi").hide();
}else{$("#soDelayComfirmTabLi").show();a._initDelayConfirm();}});ConfigUtils.findByKey("soEntity.canAuditCount",function(b){if(b.msg==1){$(".isFirstAuditDiv").hide();
}else{$(".isFirstAuditDiv").show();}});this._initConfirmed();this._initClose();this._bindEventHandler();this._hideNotGrantBtn();},_locateToGlHelp:function(){var a="glHelp.soEntity.soAudit";
glHelpUtil.init(a);},_initSearch:function(){var a=this;a._buildEmployeeSelect("","planMan");FormUtils.loadData(ctx+"/ec/ship/shipCompany/allActiveCompany.htm",function(b){var d=new StringBuffer();
d.append("<option value=''>全部</option>");for(var c=0;c<b.length;c++){d.append("<option value='").append(b[c].id).append("' hotVar='").append(b[c].isHot).append("'>").append(b[c].name).append("</option>");
}$(".scCodeQryWait").empty().append(d.toString());});CateUtils.findCatePos({typeKey:"soEntity",pKey:"soType",container:"soTypeQry"});CateUtils.getOptions([{typeKey:"system",pKey:"soEntityStoreName",container:"storeNameSearch"}]);
CashSettingUtils.getOptions({container:"cashSearch",caption:"全部"});},_hideNotGrantBtn:function(){if(!ResUtils.canShow("soEntityConfirm.button.soAddLock")){$(".soAddLock").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.soUnLock")){$(".soUnLock").hide();}if(!ResUtils.canShow("soEntityConfirm.button.toComfirm")){$(".soEntityComfirm").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.repeatAudit")){$(".soEntityRepeatAudit").hide();}if(!ResUtils.canShow("soEntityConfirm.button.close")){$(".soEntityClose").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.turndown")){$(".soEntityTrunDown").hide();}if(!ResUtils.canShow("soEntityConfirm.delay.button.toComfirm")){$(".soEntityDelayComfirm").hide();
}if(!ResUtils.canShow("soEntityConfirm.delay.button.comfirmBatch")){$(".soEntityDelayComfirmBatch").hide();}if(!ResUtils.canShow("soEntityConfirm.delay.button.close")){$(".soEntityDelayTrunDown").hide();
}if(!ResUtils.canShow("soEntityConfirm.delay.button.turndown")){$(".soEntityDelayClose").hide();}if(!ResUtils.canShow("soEntityConfirm.button.delete")){$(".soEntityDelete").hide();
}if(!ResUtils.canShow("soEntityConfirm.button.splitOrder")){$(".soEntitySplitOrder").hide();}},isLastFollow:function(a){var b=this;var c=window.localStorage.getItem(a+"Config");
if(c){return false;}else{return b.simpleShowLastFollow;}console.log(simpleShowLastFollow);},_initConfirm:function(){var b=this;var a="soEntityComfirmGrid";
b._buildEmployeeOption("","belongEmployeeConfirm");this.soEntityConfirm=new SoEntity({pager:"soEntityComfirmPager",grid:a,tabContainer:"tabSoWaitComfirm",status:"awaiting_comfirm",simpleShowLastFollow:b.isLastFollow("soEntityComfirmGrid"),simpleShowComment:this.simpleShowComment,bindEventHandler:function(){$("#belongOgnConfirm").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#belongOgnIdConfirm").val(),container:"belongOgnConfirm",positionType:"order_auditor",fn:function(d){$("#belongOgnIdConfirm").val(d);
b._buildEmployeeOption(d,"belongEmployeeConfirm");}});});$("#plaerConfirm").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#plaerIdConfirm").val(),container:"plaerConfirm",positionType:"order_auditor",fn:function(d){$("#plaerIdConfirm").val(d);
b._buildEmployeeSelect(d,"planMan");}});});$("body").on("click",".soEntityComfirm",function(){var d=$(this).attr("idVal");if(!d){d=$("#"+a).jqGrid("getGridParam","selarrrow");
if(d==null||d.length==0){DialogUtils.error("错误","请选择要审核的订单");return null;}}else{d=[d];}var j=$("#"+a).jqGrid("getRowData",d[0]);var e=j["soNo"];var g=j["soType"];
var h=new Array();for(var f=0;f<d.length;f++){var j=$("#"+a).jqGrid("getRowData",d[f]);h.push(j["soNo"]);}if(d&&d.length>1){b.confirmOrderLayer(d,h,"n");
}else{SoEntityUtils.confirm(d,e,g);}});$("body").on("click",".soEntityRepeatAudit",function(){var d=$(this).attr("idVal");if(!d){d=$("#"+a).jqGrid("getGridParam","selarrrow");
if(d==null||d.length==0){DialogUtils.error("错误","请选择要审核的订单");return null;}}else{d=[d];}var j=$("#"+a).jqGrid("getRowData",d[0]);var e=j["soNo"];var g=j["soType"];
var h=new Array();for(var f=0;f<d.length;f++){var j=$("#"+a).jqGrid("getRowData",d[f]);h.push(j["soNo"]);}if(d&&d.length>1){b.confirmOrderLayer(d,h,"y");
}else{SoEntityUtils.confirm(d,e,g);}});$(".sowait_wrapper").on("click",".soAddLock",function(){var d=$("#"+a).jqGrid("getGridParam","selarrrow");if(d==null||d.length==0){DialogUtils.error("错误","请选择要冻结的订单");
return;}DialogUtils.confirmWithOptions({title:"您确定要冻结选中订单吗？",text:"",confirmButtonText:"确定",yesFunc:function(){SoEntityUtils.lock(d);}});});$(".sowait_wrapper").on("click",".soUnLock",function(){var d=$("#"+a).jqGrid("getGridParam","selarrrow");
if(d==null||d.length==0){DialogUtils.error("错误","请选择要解冻的订单");return;}DialogUtils.confirmWithOptions({title:"您确定要解冻选中订单吗？",text:"",confirmButtonText:"确定",yesFunc:function(){SoEntityUtils.unLock(d);
}});});$("body").on("click",".soEntitySplitOrder",function(){var d=$(this).attr("idVal");if(!d){d=$("#"+a).jqGrid("getGridParam","selarrrow");if(d==null||d.length==0){DialogUtils.error(msgCode.error,"请选择要拆分的记录");
return;}else{if(d&&d.length>1){DialogUtils.error(msgCode.ERROR,"不能拆分多条记录");return;}}}var f=$("#"+a).jqGrid("getRowData",d);var e=f["soNo"];b._splitSo(e,d.toString());
});$("body").on("click",".splitPordBtn",function(){var d=$(".splitCount").val();if(d){b._splitSoList(d);}else{DialogUtils.error(msgCode.ERROR,"请填写拆分次数",$("div.splitSoPane"));
}});$("body").on("click",".splitSoBtn",function(){b._splitSoSave();});$("body").on("change",".splitCountItem",function(){$(this).parent().addClass("isUpdated");
var d=$(this).parent().attr("itemProd");var g=$(this).parent().attr("itemCountTotal");var e=$(this).val();var f=$(this).parent().attr("itemCount");$(this).parents("tr").eq(0).find(".splitMoney").text(e*$(this).parents("tr").eq(0).find(".splitMoney").attr("splitPrice"));
$(".splitSoListDiv tbody").find("."+d).each(function(){if(!$(this).hasClass("isUpdated")){var h=$(this).attr("itemCount")-(e-f);$(this).find(".splitCountItem").val(h);
$(this).parents("tr").eq(0).find(".splitMoney").text(h*$(this).parents("tr").eq(0).find(".splitMoney").attr("splitPrice"));return false;}});$(this).removeClass("isUpdated");
});$(document).on("change",".splitAmount",function(){var o=0;var g=0;var d=$(this).val();var j=$(this).closest("tr");var q=$($(this).closest("td")).attr("rowspan");
var v=$(j);var k=[];k.push(v);var l=false;if(parseInt(q)>1){var f=v;for(var p=0;p<parseInt(q)-1;p++){var u=f.next();var h=$(u);f=h;k.push(h);}}for(var p=0;
p<k.length;p++){var s=$(k[p]).find(".splitCountItem").val();var r=$(k[p]).find(".prodSkuPrice").text();var t=parseInt($(k[p]).find(".skuPercentLimit").text());
if(!t){t=0;}var e=parseFloat(t);if(percentLimit&&parseInt(percentLimit)&&parseInt(percentLimit)<e||e<1){e=parseInt(percentLimit);}if(parseFloat(e)>0){g=parseFloat(parseFloat(g)+parseFloat(r)*parseInt(s)*parseFloat(e)/100).toFixed(2);
l=true;}else{g=parseFloat(parseFloat(g)+parseFloat(r)*parseInt(s)).toFixed(2);}}if(l&&parseFloat(d)<parseFloat(g)){var n=$(this);var m="商品有折扣限制, 最低金额为"+parseFloat(g);
n.attr("title","").attr("data-container","body").attr("data-toggle","popover").attr("data-content","<h4 style='color:red;'>"+m+"</h4>").attr("data-html","true").attr("data-placement","bottom");
n.popover("show");n.val(parseFloat(g));setTimeout(function(){b.destroyTipPopover(n);},3000);}$(".splitSoListDiv tbody").find(".splitAmount").each(function(){o=o+parseFloat($(this).val());
});$(".splitAmountDiv").empty().append(o);});var c=new SoEntityRefreshTool();c.init({callBackFunc:function(){$("#tabSoWaitComfirm").find(".soEntitySearch").click();
}});}});this.soEntityConfirm.init();},confirmOrderLayer:function(d,c,b){var a=this;layer.open({type:1,title:"订单审核确认",maxmin:false,move:false,scrollbar:false,shadeClose:false,btn:["确定","取消"],area:["600px","450px"],content:$(".soEntityConfirmPane"),success:function(e,f){var h=new StringBuffer();
for(var g=0;g<c.length;g++){if(g!=0){h.append("，");}h.append("<span style='line-height:30px;'>"+c[g]+"</span>");}$("#confirmSaveReForm").find(".soNoDiv").empty().append(h.toString());
$("#confirmSaveReForm").find("#soIds").val(d.toString());(function(){var i=this;$("#operComment").bsSuggest("destroy");$("#operComment").bsSuggest({url:ctx+"/gl/cate/cate/getOptions.htm?typeKey=system&pKey=ApprovedType",effectiveFields:["name"],searchFields:["name"],effectiveFieldsAlias:{name:"审核备注"},showBtn:false,inputWarnColor:"",showHeader:false,idField:"id",keyField:"name",getDataMethod:"url",processData:function(l){var k,j,m={value:[]};
if(!l||l.records===0){return false;}j=l.length;for(k=0;k<j;k++){m.value.push({id:l[k].id,name:l[k].name});}return m;}});})();},yes:function(f,e){SoEntityUtils.confirmBatch(d,b,$("input[name=operComment]").val());
layer.close(f);},cancel:function(){FormUtils.clear("confirmSaveReForm");}});},_splitSo:function(b,c,d){var a=this;$("#splitSoModalContainer").modal("show");
$(".splitSoListContent").hide();$(".splitSoBtnContent").hide();$(".splitSoListDiv").empty();$("#splitSoModal").text(b+" -- 订单拆分");a._buildSplitStr(b,c);
},_splitSoSave:function(){var i=[];var g=0;var h=[];var f="";var b="";var j="";var a="";var c="";var e=false;var d=parseFloat($(".splitAmountDiv").text());
if(d!=(this.soEntityPo.totalAmount-this.soEntityPo.subAmount)){DialogUtils.error(msgCode.ERROR,"拆分金额必须等于订单总金额");return false;}$(".splitSoListDiv tbody").find("tr").each(function(){g++;
if($(this).attr("count")){f=$(this).attr("soId");b=$(this).attr("soNo");j=$(this).find("input[name=splitShipTime]").val();a=$(this).attr("count");c=$(this).find(".splitAmount").val();
}var l={itemId:$(this).find(".itemCount").attr("itemId"),count:$(this).find(".splitCountItem").val(),};if(l.count<0){e=true;return;}h.push(l);if(g==a){var k={id:f,soNo:b,shipTime:j,soItems:h,totalAmount:c};
i.push(k);g=0;h=[];}});if(e){DialogUtils.error(msgCode.ERROR,"产品数量不能小于0");return;}FormUtils.submit(ctx+"/ec/salesorder/soEntity/splitOrder.htm","splitPos="+JSON.stringify(i),function(k){if(k.success){$("#splitSoModalContainer").modal("hide");
DialogUtils.success(msgCode.SUCCESS,k.msg);$("#tabSoWaitDeliver").find(".soEntitySearch").trigger("click");}else{DialogUtils.error(msgCode.ERROR,k.msg);
}});},_buildSplitStr:function(b,c){var a=this;var d=new StringBuffer();$("#splitSoForm").find("input[name=soNo]").val(b);$("#splitSoForm").find("input[name=soId]").val(c);
FormUtils.submit(ctx+"/ec/salesorder/soEntity/edit.htm","soNo="+b,function(g){var f=g.soEntityPo.soItemPos;a.soItemPos=f;a.soEntityPo=g.soEntityPo;d.append("<table class='table table-bordered'>");
d.append("<thead>");d.append("<tr>");d.append("<th width='10%'>#</th>");d.append("<th width='30%'>商品名称</th>");d.append("<th width='15%'>总数量</th>");d.append("<th width='20%'>待分金额</th>");
d.append("<th width='25%'>拆分次数</th>");d.append("</tr>");d.append("</thead>");d.append("</tbody>");for(var e=0;e<f.length;e++){d.append("<tr>");d.append("<td>"+(e+1)+"</td>");
d.append("<td>"+f[e].prodName+"</td>");d.append("<td>"+f[e].count+"</td>");if(e==0){d.append("<td rowspan='"+f.length+"'>"+(g.soEntityPo.totalAmount-g.soEntityPo.subAmount)+"</td>");
d.append("<td rowspan='"+f.length+"'><div class='col-sm-8'><input type='number' class='form-control splitCount' validatetype='default'></div>");d.append("<button type='button' class='btn btn-sm  btn-primary splitPordBtn'>拆分</button>");
d.append("</td>");}d.append("</tr>");}d.append("</tbody>");d.append("</table>");$(".splitPordDiv").empty().append(d.toString());});},_splitSoList:function(a){var n=this;
var l=new StringBuffer();var k=n.soItemPos;var g=n.soEntityPo;l.append("<table class='table table-bordered'>");l.append("<thead>");l.append("<tr>");l.append("<th width='5%'>#</th>");
l.append("<th width='12%'>拆分订单</th>");l.append("<th width='25%'>产品名称</th>");l.append("<th style='display:none;'>折扣限制</th>");l.append("<th style='display:none;'>商品原价</th>");
l.append("<th width='12%'>拆出数量</th>");l.append("<th width='12%'>产品金额</th>");l.append("<th width='12%'>订单金额</th>");l.append("<th width='22%'>发货时间</th>");
l.append("</tr>");l.append("</thead>");l.append("<tbody>");var c=g.totalAmount-g.subAmount;var f=parseInt(c/a);var b=c-(f*(a-1));if(b.toString().indexOf(".")!=-1){b=b.toFixed(2);
}$(".splitAmountDiv").empty().append(c);for(var e=1;e<=a;e++){var m=0;for(var d=0;d<k.length;d++){var h=parseInt((k[d].count/a).toFixed(0));m=e*h;if(m>k[d].count){h=k[d].count-((e-1)*h);
}else{if(e==a&&m<k[d].count){h=(k[d].count-m)+h;}}if(a==1){break;}else{l.append("<tr");if(d==0){if(e==1){l.append(" soId="+$("#splitSoForm").find("input[name=soId]").val()+" soNo="+$("#splitSoForm").find("input[name=soNo]").val());
}l.append(" count="+k.length+">");l.append("<td rowspan='"+k.length+"'>"+e+"</td>");if(e==1){l.append("<td rowspan='"+k.length+"'>"+$("#splitSoForm").find("input[name=soNo]").val()+"</td>");
}else{l.append("<td rowspan='"+k.length+"'></td>");}}else{l.append(">");}l.append("<td >"+k[d].prodName+"</td>");l.append("<td style='display:none;' class='skuPercentLimit'>"+k[d].skuPercentLimit+"</td>");
l.append("<td style='display:none;' class='prodSkuPrice'>"+k[d].prodSkuPrice+"</td>");l.append("<td class='itemCount itemPord"+d+"' itemProd=itemPord"+d+" ");
l.append("itemCount="+h+" itemCountTotal="+k[d].count+" itemId="+k[d].id+"><input type='number' class='form-control splitCountItem' validatetype='default' value='"+h+"'></td>");
l.append("<td class='splitMoney' splitPrice="+k[d].salesPrice+">"+(k[d].salesPrice*h).toFixed(1)+"</td>");if(d==0){l.append("<td rowspan='"+k.length+"'><input type='number' class='form-control splitAmount' validatetype='default' value='"+(e==a?b:f)+"'></td>");
}if(d==0){l.append("<td rowspan='"+k.length+"'><input class='laydate-icon form-control layer-date' name='splitShipTime' placeholder='yyyy-mm-dd hh:mm:ss' onclick='laydate({istime: true, min: laydate.now(1), format: \"YYYY-MM-DD hh:mm:ss\"})'></td>");
l.append("</tr>");}}}}l.append("</tbody>");l.append("<tfoot>");l.append("<tr>");l.append("<td colspan='4'></td>");l.append("<td>拆分金额:</td>");l.append("<td colspan='2' class='splitAmountDiv'>"+c+"</td>");
l.append("</tr");l.append("</tfoot>");l.append("</table>");$(".splitSoListContent").show();$(".splitSoBtnContent").show();$(".splitSoListDiv").empty().append(l.toString());
},_initDelayConfirm:function(){var b=this;$(".delayConfirmTime").find(".simple-time-select").remove();var a="soEntityDelayComfirmGrid";b._buildEmployeeOption("","belongEmployeeDelayConfirm");
this.soEntityDelayConfirm=new SoEntity({pager:"soEntityDelayComfirmPager",grid:a,tabContainer:"tabSoDelayComfirm",status:"awaiting_comfirm",simpleShowLastFollow:b.isLastFollow("soEntityDelayComfirmGrid"),simpleShowComment:this.simpleShowComment,bindEventHandler:function(){$("#belongOgnDelayConfirm").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#belongOgnIdDelayConfirm").val(),container:"belongOgnDelayConfirm",positionType:"order_auditor",fn:function(d){$("#belongOgnIdDelayConfirm").val(d);
b._buildEmployeeOption(d,"belongEmployeeDelayConfirm");}});});$("#plaerDelayConfirm").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#plaerIdDelayConfirm").val(),container:"plaerDelayConfirm",positionType:"order_auditor",fn:function(d){$("#plaerIdDelayConfirm").val(d);
b._buildEmployeeSelect(d,"planMan");}});});$("body").on("click",".soEntityDelayComfirm",function(){var d=$(this).attr("idVal");if(!d){d=$("#"+a).jqGrid("getGridParam","selarrrow");
if(d==null||d.length==0){DialogUtils.error("错误","请选择要审核的订单");return null;}}else{d=[d];}var g=$("#"+a).jqGrid("getRowData",d[0]);var e=g["soNo"];var f=g["soType"];
SoEntityUtils.confirm(d,e,f);});$(".so_delay_wrapper").on("click",".soAddLock",function(){var d=$("#"+a).jqGrid("getGridParam","selarrrow");if(d==null||d.length==0){DialogUtils.error("错误","请选择要冻结的订单");
return;}DialogUtils.confirmWithOptions({title:"您确定要冻结选中订单吗？",text:"",confirmButtonText:"确定",yesFunc:function(){SoEntityUtils.lock(d);}});});$(".so_delay_wrapper").on("click",".soUnLock",function(){var d=$("#"+a).jqGrid("getGridParam","selarrrow");
if(d==null||d.length==0){DialogUtils.error("错误","请选择要解冻的订单");return;}DialogUtils.confirmWithOptions({title:"您确定要解冻选中订单吗？",text:"",confirmButtonText:"确定",yesFunc:function(){SoEntityUtils.lock(d);
}});});$("body").on("click",".soEntityDelayComfirmBatch",function(){var d=$("#"+a).jqGrid("getGridParam","selarrrow");if(d==null||d.length==0){DialogUtils.error("错误","请选择要审核的订单");
return;}DialogUtils.confirmWithOptions({title:"您确定要审核通过选中订单吗？",text:"",confirmButtonText:"确定",yesFunc:function(){SoEntityUtils.confirmBatch(d);}});});var c=new SoEntityRefreshTool();
c.init({callBackFunc:function(){$("#tabSoDelayComfirm").find(".soEntitySearch").click();}});}});},_initConfirmed:function(){var a=this;a._buildEmployeeOption("","belongEmployeeConfirmed");
this.soEntityConfirmed=new SoEntity({pager:"soEntityComfirmedPager",grid:"soEntityComfirmedGrid",tabContainer:"tabSoComfirmed",status:"comfirm,awaiting_pay,packing,shipping,complete,close_reject,close_lost",simpleShowLastFollow:a.isLastFollow("soEntityComfirmedGrid"),simpleShowComment:this.simpleShowComment,bindEventHandler:function(){$("#belongOgnComfirmed").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#belongOgnIdConfirmed").val(),container:"belongOgnComfirmed",positionType:"order_auditor",fn:function(b){$("#belongOgnIdConfirmed").val(b);
a._buildEmployeeOption(b,"belongEmployeeConfirmed");}});});$("#plaerComfirmed").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#plaerIdConfirmed").val(),container:"plaerComfirmed",positionType:"order_auditor",fn:function(b){$("#plaerIdConfirmed").val(b);
a._buildEmployeeSelect(b,"planMan");}});});}});},_initClose:function(){var a=this;a._buildEmployeeOption("","belongEmployeeClose");this.soEntityClose=new SoEntity({pager:"soEntityEndPager",grid:"soEntityEndGrid",tabContainer:"tabSoClose",status:"close",simpleShowLastFollow:a.isLastFollow("soEntityEndGrid"),simpleShowComment:this.simpleShowComment,bindEventHandler:function(){$(".end_wrapper").on("click",".soEntityDelete",function(){var b=$("#soEntityEndGrid").jqGrid("getGridParam","selarrrow");
if(!b||b.length<=0){DialogUtils.error("提示","请选择要删除的订单");return false;}SoEntityUtils.deleteSoEntity(b);});$("#belongOgnClose").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#belongOgnIdClose").val(),container:"belongOgnClose",positionType:"order_auditor",fn:function(b){$("#belongOgnIdClose").val(b);
a._buildEmployeeOption(b,"belongEmployeeClose");}});});$("#plaerClose").on("click",function(){GroupUtils.selectGroupTreeBox({isMultiple:1,selectedGroupId:$("#plaerIdClose").val(),container:"plaerClose",positionType:"order_auditor",fn:function(b){$("#plaerIdClose").val(b);
a._buildEmployeeSelect(b,"planMan");}});});}});},_buildEmployeeOption:function(b,a){FormUtils.loadData(SoEntityConfirmManager._CONS_.EMPLOYEE_LIST_URL+"?groupId="+b,function(d){if(d&&d.length>0){var e=new StringBuffer();
e.append('<option value="">请选择</option>');for(var c=0;c<d.length;c++){e.append("<option value='"+d[c].id+"'>"+d[c].aid+":"+d[c].name+"</option>");}$("#"+a).empty().append(e.toString()).select2();
}},null,true);},_buildEmployeeSelect:function(b,a){FormUtils.loadData(SoEntityConfirmManager._CONS_.EMPLOYEE_LIST_URL+"?groupId="+b,function(d){if(d&&d.length>0){var e=new StringBuffer();
e.append('<option value="">请选择</option>');for(var c=0;c<d.length;c++){e.append("<option value='"+d[c].id+"'>"+d[c].aid+":"+d[c].name+"</option>");}$("."+a).empty().append(e.toString()).select2();
}},null,true);},_bindEventHandler:function(){var a=this;$(".tabs-container").on("click",".tabli",function(){var b=$(this).attr("id");switch(b){case"soWaitComfirmTabLi":if(!a.soEntityConfirm.isInit){a.soEntityConfirm.init();
}break;case"soDelayComfirmTabLi":if(!a.soEntityDelayConfirm.isInit){a.soEntityDelayConfirm.init();}break;case"soComfirmedTabLi":if(!a.soEntityConfirmed.isInit){a.soEntityConfirmed.init();
}break;case"soCloseTabLi":if(!a.soEntityClose.isInit){a.soEntityClose.init();}break;}});},destroyTipPopover:function(a){a.popover("destroy");},};$(function(){var a=new SoEntityConfirmManager();
a.init();});function parentCMD(){$(".soEntitySearch").trigger("click");}