$(function(){function b(){this.hadInit=false;this.isEdit=false;this.isFormDataChange=false;}b._CONS_={LIST_DATA_URL:ctx+"/ec/stock/stStock/listAlertData.htm",EDIT_FORM_ID:"stStockForm",GRID:"#stStockGrid",PAGER:"#stStockPager"};
b.prototype={init:function(c){if(!this.hadInit){this._bindEventHander();this._initTable();}},_bindEventHander:function(){},reloadJqgrid:function(c){JTJqgridUtils.reloadJqgrid(b._CONS_.GRID,c);
},_initTable:function(){var c=this;FormUtils.loadData(b._CONS_.LIST_DATA_URL+"?rows=7",function(f){var g=new StringBuffer();for(var d=0;d<f.rows.length;
d++){var e=f.rows[d];g.append("<tr>").append("<td>").append(e.prodName).append("</td><td>").append(e.skuCode).append("</td><td>").append(e.storeName).append("</td><td>").append(e.total).append("</td><td>").append(e.salesDays).append("</td><td>").append(e.salesAvg).append("</td><td>").append(e.alertMin).append("</td><td>").append(c._getStatus(e)).append("</td></tr>");
}$("#stStockGrid").find("tbody").empty().append(g.toString());IframeUtils.resizeHeight($(parent.document).find('iframe[srcVal="/ec/stock/desktop/desktopAlert/list.htm"]'),$(".panel").height());
});},_getStatus:function(d){var c=d.total;var f=d.alertMin;var e=c/f;if(e<0.8){return"<sapn class='text text-danger'>紧急</sapn>";}else{if(e<1&&e>=0.8){return"<span class='text text-warning'>警告</span>";
}else{return"<span class='text text-info'>提醒</span>";}}}};var a=new b();a.init();});