$(function(){var a=new BuyHistory();a.init();});function BuyHistory(){}BuyHistory._CONS_={LIST_DATA_URL:ctx+"/ec/stock/stStock/listStockHistoryData.htm",GRID:"#historyGrid",PAGER:"#historyPager"};
BuyHistory.prototype={init:function(a){StoreUtils.loadStores("","storeIdSearchContainer");StoreUtils.loadData({container:"storeSearch1",isSale:false});
this._initJqgrid(a);this._bindEventHandler();},_bindEventHandler:function(){var a=this;$(".list_wrapper").on("click",".historySearch",function(){var b=$(this).closest("form").serialize();
a.reloadJqgrid(b);});$("body").on("click",".resetHisBtn",function(){var b=$(this).parents("form").attr("id");FormUtils.clear("#"+b);});},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(BuyHistory._CONS_.GRID,a);
},_initJqgrid:function(c){var a=this;if(c==null||typeof c==undefined){c={};}var b=new Date();b.setMonth(b.getMonth()-1);$(".startTimeSearch").val(DateUtils.format(b,"yyyy-MM-dd"));
c["Q__D__BW__slog.create_time_"]=DateUtils.format(b,"yyyy-MM-dd");$(BuyHistory._CONS_.GRID).JTJqgrid({url:BuyHistory._CONS_.LIST_DATA_URL+"?Q__S__EQ__slog.type_=in",pager:BuyHistory._CONS_.PAGER,postData:c,footerrow:true,userDataOnFooter:true,colNames:["id","单据号码","产品编码","产品名称","仓库","入库数量","采购价格","入库时间","操作"],colModel:[{name:"id",index:"id_",width:700,hidden:true},{name:"billCode",index:"bill.code_",width:90},{name:"skuCode",index:"sku.code_",width:90,sortable:false},{name:"prodName",index:"prod.name_",width:120,sortable:false},{name:"storeName",index:"slog.store_id_",width:90,sortable:false},{name:"qty",index:"slog.qty_",width:90,sortable:false},{name:"price",index:"item.price_",width:90,sortable:false},{name:"createTime",index:"create_time_",width:110,formatter:function(d,e,f){if(f.hideCheckBox=="y"){return"";
}return DateUtils.miniTime(d);}},{name:"__manage",width:60,classes:"rowOps",sortable:false,align:"center",formatter:"manage",formatoptions:[]}]});}};