function TRKSheetRecord4Adn(){this.hadInit=false;}TRKSheetRecord4Adn._CONS_={LIST_DATA_URL:ctx+"/gl/cti/tRKSheetRecord/listDataForRecordByReqType.htm?reqType=adn_error",GRID:"#insideLineSheetRecordGrid4adn",PAGER:"#insideLineSheetRecordPager4adn"};
TRKSheetRecord4Adn.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initJqgrid(a);}},_bindEventHander:function(){var a=this;
$(".list_wrapper").on("click","#tabAdn .insideLineSheetRecordSearch",function(){if(!$('input[name="startTime"]').val()){var b=new Date();var c=b.currentDate();
$('input[name="startTime"]').val(c);}var d=$(this).closest("form").serialize();a.reloadJqgrid(d);});},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(TRKSheetRecord4Adn._CONS_.GRID,a);
},_generateCode:function(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1);};return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a());
},_initJqgrid:function(h){var c=this;if(h==null||typeof h==undefined){h={};}var b=new Date();var e=b.currentDate()+" 00:00:00";$('input[name="startTime"]').val(e);
var g=true;if(ResUtils.canShow("trkSheetRecord.isShowCsPhone")){g=false;}var f=["客户ID","客户号码","隐藏号码","客户归属","地区","方向","类型","分机","员工工号","部门","性质","来源(外显)","主叫","被叫","开始时间","通话时长","呼叫时长","标识","评价","录音"];
var d=[{name:"csCode",align:"center",index:"cs_code_",sortable:true,width:120,formatter:function(j,l,i){if(j){var k=j+":"+i.csName;if($(window).width()<1024){k=j+"<br>"+i.csName;
}return"<a csCode='"+j+"' href='javascript: void(0);' csIdVal='"+i.csId+"' csNameVal='"+i.csName+"' class='csEntityDetailBtn'>"+k+"</a>";}else{return"";
}}},{name:"csPhone",align:"center",sortable:false,width:140,hidden:g,formatter:function(m,j,l){if(!l.csId){var k=null;var i=l.source;if(l.direction==0){k=l.encryptAno;
}else{k=l.encryptBno;}if(reqType&&reqType=="recordIdParams"){return"<span title='创建客户' class='' href='javascript: void(0);' encryptInNumberVal='"+k+"'  encryptNumberVal='"+l.encryptNumber+"'>"+m+"</span>";
}else{return"<a inNumVal='"+i+"' title='创建客户' class='csEntityInBtn' href='javascript: void(0);' encryptInNumberVal='"+k+"'  encryptNumberVal='"+l.encryptNumber+"'>"+m+"</a>";
}}else{return m;}}},{name:"encryptNumber",align:"center",sortable:false,width:140,hidden:true},{name:"belongEmployeeAid",align:"center",index:"belongEmployeeAid",width:120,sortable:false,formatter:function(i){if($(window).width()<1024&&i.indexOf(":")!=-1){return i.split(":")[0]+"<br>"+i.split(":")[1];
}else{return i;}}},{name:"addr",align:"center",index:"addr",sortable:false,width:120},{name:"direction",align:"center",index:"Direction",width:60,formatter:function(i){if(i==0){return"呼出";
}else{if(i==1){return"呼入";}}}},{name:"recfile",align:"center",index:"IsRouteAgent",width:60,formatter:function(j,i,k){if(j){return"<span class='text text-primary'>已接</span>";
}else{return"<span class='text text-danger'>未接</span>";}}},{name:"adn",align:"center",sortable:false,width:80},{name:"employeeAid",align:"center",sortable:false,width:140,formatter:function(j,i,k){if($(window).width()<1024){return j+"<br>"+k.employeeName;
}else{return j+":"+k.employeeName;}}},{name:"groupName",align:"center",sortable:false,width:120},{name:"csId",sortable:false,width:60,formatter:function(i){if(i&&i.trim()){return"<span class='text text-primary'>已注册</span>";
}else{return"<span class='text text-danger'>未注册</span>";}}},{name:"source",align:"center",sortable:true,width:120,formatter:function(k,j,i){if(k){return i.source;
}else{return"无";}}},{name:"ano",hidden:true,align:"center",sortable:false,width:120,formatter:function(k,j,i){if(i.direction==0){return i.source;}else{if(i.direction==1){return i.csPhone;
}}}},{name:"bno",hidden:true,align:"center",sortable:false,width:120,formatter:function(k,j,i){if(i.direction==0){return i.csPhone;}else{if(i.direction==1){return i.source;
}}}},{name:"begtime",align:"center",index:"BegTime",width:100,formatter:function(i){return DateUtils.mini2Time(i);}},{name:"duration",align:"center",sortable:true,width:80,formatter:function(k,j,i){if(i.recfile){return DateUtils.toChineseTime(k);
}else{return"";}}},{name:"ringduration",align:"center",sortable:false,width:80,formatter:function(k,j,i){if(!i.recfile){return DateUtils.toChineseTime(i.duration);
}else{return"";}}},{name:"mark",align:"center",sortable:false,width:120,hidden:markCtiRecord!="y",formatter:function(k,i,j){if(k){return'<div style="width:auto;overflow:hidden; white-space:nowrap; text-overflow:ellipsis">'+k+":"+j.markDes+"</div>";
}else{return"";}},},{name:"uud",align:"center",sortable:false,width:80,hidden:showPJ!="show",formatter:function(k,j,i){if(!k){return"无";}if(k.indexOf("PJ:1")!=-1){return"满意";
}else{if(k.indexOf("PJ:2")!=-1){return"一般";}else{if(k.indexOf("PJ:3")!=-1){return"不满意";}}}return"无";}},{name:"recfile",align:"center",width:180,formatter:function(l,k,i){if(l){var j=c._generateCode();
var m=new StringBuffer();if(ResUtils.canShow("trkSheetRecord.button.listen")){m.append("<button title='调取录音' uniqueCode='"+j+"'   id-value ='"+i.id+"'  recfileVal='"+l+"' class='listenBtn jt-btn-safe'><i class='fa fa-caret-square-o-left' ></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.download")){m.append("<button title='下载录音' uniqueCode='"+j+"'   id-value ='"+i.id+"'  recfileVal='"+l+"' class='downloadBtn jt-btn-safe'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.delete")){m.append("<button title='删除录音' uniqueCode='"+j+"'  id-value ='"+i.id+"'  recfileVal='"+l+"' class='deleteBtn jt-btn-error'><i class='fa fa-remove'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.operateRecordMark")){m.append("<button title='通话标识' uniqueCode='"+j+"' id-value ='"+i.id+"' recfileVal='"+l+"' class='operateRecordMarkBtn jt-btn-safe'><i class='fa fa-bookmark'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.operateRecordRecomm")){m.append("<button title='录音推荐' uniqueCode='"+j+"' id-value ='"+i.id+"' recfileVal='"+l+"' class='operateRecordShareBtn jt-btn-safe'><i class='fa fa-thumbs-o-up'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.operateRecordHi")){m.append("<button title='操作记录' uniqueCode='"+j+"' id-value ='"+i.id+"' recfileVal='"+l+"' class='operateRecordHiBtn jt-btn-safe'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}return m.toString();}else{return"";}}}];var a=null;a=TRKSheetRecord4Adn._CONS_.LIST_DATA_URL;if(versionType=="finance"){a+="&sidx=cs_code_&sord=asc";}$(TRKSheetRecord4Adn._CONS_.GRID).JTJqgrid({url:a,pager:TRKSheetRecord4Adn._CONS_.PAGER,postData:{startTime:e,wipeRepeat:"n"},colNames:f,colModel:d});
}};