$(function(){var a=new FixJobPlan();a.init();});function FixJobPlan(){}FixJobPlan._CONS_={GRID:"#fixPlanGrid",PAGER:"#fixPlanPager",LIST_DATA_URL:ctx+"/gl/job/jobPlan/listData.htm?Q__S__EQ__type_=fix_plan&Q__S__EQ__is_default_=n",EXECUTE_PLAN_URL:ctx+"/gl/job/jobPlan/executeFixPlans.htm",};
FixJobPlan.prototype={init:function(a){this.options=a;this._bindEventHanlder();this._initJqgrid();},_bindEventHanlder:function(){var a=this;$("body").on("click",".excuteChooseTask",function(){var b=$(FixJobPlan._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b&&b.length>0){var c=jQuery.isArray(b)?b.join(","):b;var d=jQuery("#searchEmployeeForm").serialize()+"&ids="+c;FormUtils.submit(FixJobPlan._CONS_.EXECUTE_PLAN_URL,d,function(e){if(e.success){DialogUtils.success(msgCode.SUCCESS,e.msg);
}else{DialogUtils.error(msgCode.ERROR,"操作失败");}});}else{DialogUtils.error("错误","请选择要操作的记录");}});},_initJqgrid:function(d){var a=this;$.jgrid.defaults.styleUI="Bootstrap";
$.jgrid.styleUI.Bootstrap.base.rowTable="table table-bordered table-striped";var c=$("#searchEmployeeForm").width()-10;var b=FixJobPlan._CONS_.LIST_DATA_URL;
$(FixJobPlan._CONS_.GRID).jqGrid({url:b,pager:FixJobPlan._CONS_.PAGER,datatype:"json",mtype:"post",shrinkToFix:true,multiselect:true,width:c,pagerpos:"center",rownumbers:true,rowNum:50,rowList:[10,20,50,100],viewrecords:true,postData:d,colNames:["id","任务名称","BEAN","计划名称","所属组值",],colModel:[{name:"id",index:"id_",hidedlg:true,hidden:true,width:120},{name:"jobDefPo.name",width:140,sortable:false},{name:"jobDefPo.bean",width:140,sortable:false},{name:"name",width:140,index:"name_"},{name:"group",width:140,index:"group_"}],gridComplete:function(){var f=$(FixJobPlan._CONS_.GRID).jqGrid("getGridParam","records");
if(f<=0){if($(".norecords").html()==null){$(FixJobPlan._CONS_.GRID).parent().append('<div class="norecords">没有符合数据！</div>');$(".norecords").show();}else{$(".norecords").show();
}}else{$(".norecords").hide();}if(!a._hadSetHeight){a._hadSetHeight=true;var e=$(window).height()-$(".panel-heading").outerHeight()-$(FixJobPlan._CONS_.PAGER).outerHeight()-$(".ui-jqgrid-hdiv").outerHeight()-25;
$(FixJobPlan._CONS_.GRID).jqGrid("setGridHeight",e);}},});},};