function JobParam(){this.rowid=0;this.formId="#jobDefForm";}JobParam._CONS_={GRID:"#jobParamGrid",GRID_ID:"jobParamGrid",PAGER:"#jobParamPager",PAGER_ID:"jobParamPager",GRID_DIV:"#jobParamDiv",JSON_ID:"jobParamJSON",};
JobParam.prototype={initJqgrid:function(d){var a=this;for(var c=0;c<d.length;c++){d[c].paramName=d[c].name;}var b='<table id="'+JobParam._CONS_.GRID_ID+'"  ></table><div id="'+JobParam._CONS_.PAGER_ID+'"></div><input type="hidden"  id="'+JobParam._CONS_.JSON_ID+'" name="'+JobParam._CONS_.JSON_ID+'">';
$(JobParam._CONS_.GRID_DIV).empty().html($(b));$.jgrid.defaults.styleUI="Bootstrap";$(JobParam._CONS_.GRID).jqGrid({datatype:"jsonstring",datastr:d,height:350,autowidth:true,shrinkToFit:true,rowNum:20,mtype:"POST",multiselect:true,caption:"异步任务参数定义列表",rowList:[10,20,30],colNames:["参数数据类型","参数名称","参数键","参数值","编辑状态","操作"],colModel:[{name:"dataType",edittype:"select",editoptions:{value:"string:字符串;int:整型;long:长整型;double:小数;date:日期;object:复合对象"},editable:true,width:120,formatter:function(e,f,g){if(g.dataType=="string"){return"字符串";
}else{if(g.dataType=="int"){return"整型";}else{if(g.dataType=="long"){return"长整型";}else{if(g.dataType=="double"){return"小数";}else{if(g.dataType=="date"){return"日期";
}else{if(g.dataType=="object"){return"复合对象";}else{if(g.dataType==undefined){return"";}}}}}}}return g.dataType;}},{name:"paramName",edittype:"text",editable:true,width:120},{name:"key",edittype:"text",editable:true,width:120,},{name:"value",edittype:"text",editable:true,width:120,},{name:"isGridRowEdit",edittype:"text",editable:false,hidedlg:true,hidden:true,width:120,},{name:"button",width:180}],pager:JobParam._CONS_.PAGER,hidegrid:false,gridComplete:function(){JTSubGridUtils.addRowButtons(JobParam._CONS_.GRID_ID);
},});$(JobParam._CONS_.GRID).setGridParam({cellEdit:false});$(JobParam._CONS_.GRID).jqGrid("navGrid",JobParam._CONS_.PAGER,{add:true,addtitle:"添加参数",addfunc:a._addParamRow,del:true,deltitle:"删除参数",delfunc:a._delParam,refresh:false,search:false,edit:false});
},_addParamRow:function(){var a=new Date().getTime();JTSubGridUtils.addRow(JobParam._CONS_.GRID_ID,a);},_delParam:function(a){DialogUtils.confirm(function(){JTSubGridUtils.delRows(JobParam._CONS_.GRID_ID,a);
});},validatejobParamGrid:function(b,a){var c=$(this.formId).validate();return c.element("#"+a+"_paramName")&&c.element("#"+a+"_key")&&c.element("#"+a+"_value")&&true;
},changeParamData:function(){var e="";var d=document.getElementById(JobParam._CONS_.GRID_ID);var a=d.rows.length;e="[";for(i=1;i<a;i++){var b=d.rows[i].cells[2].getElementsByTagName("input");
if(b.length>0){DialogUtils.error("有参数尚未保存，请选择保存或者取消变更!");d.rows[i].focus();return false;}var c="string";if(d.rows[i].cells[1].innerHTML=="整型"){c="int";
}else{if(d.rows[i].cells[1].innerHTML=="长整型"){c="long";}else{if(d.rows[i].cells[1].innerHTML=="小数"){c="double";}else{if(d.rows[i].cells[1].innerHTML=="日期"){c="date";
}else{if(d.rows[i].cells[1].innerHTML=="复合对象"){c="object";}}}}}e=e+"{'dataType':'"+c+"','name':'"+d.rows[i].cells[2].innerHTML+"','key':'"+d.rows[i].cells[3].innerHTML+"','value':'"+d.rows[i].cells[4].innerHTML+"'},";
}if(a>1){e=e.substring(0,e.length-1);}e=e+"]";$("#"+JobParam._CONS_.JSON_ID).val(e);return true;}};