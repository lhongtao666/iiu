$(function(){var a=new JobRunHiDetail();a.init();});function JobRunHiDetail(){this.hadInit=false;this.isEdit=false;this.isFormDataChange=false;}JobRunHiDetail._CONS_={JOB_RUNHI_DETAIL:ctx+"/gl/logger/glLogRecord/findLogRecordsByParams.htm",JOB_RUNHI_IMPORT_LOGS:ctx+"/gl/logger/glLogRecord/generatePdfLogRecords.htm",DOWNLOAD_LOGRECORDS_URL:ctx+"/gl/logger/glLogRecord/downLoadPdfLogRecords.htm",};
JobRunHiDetail.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._jobRunHiDetail(runHiId);this._bindEventHander();}},_jobRunHiDetail:function(c){var d=$("#logRecordDetatailList");
var b="";var a=$("#divDisplayNone");$(".form_wrapper").css("display","block");$.ajax({url:JobRunHiDetail._CONS_.JOB_RUNHI_DETAIL,data:{"runHiId":c},type:"POST",dataType:"json",async:false,cache:false,success:function(f){for(var e=0;
e<f.length;e++){var h=f[e];var g=a.clone().children().first();$(g.children()).each(function(){if($(this).attr("class")=="btn btn-white btn-xs showLevel"){$(this).html(h.level);
}else{if($(this).attr("class")=="btn btn-white btn-xs showTime"){$(this).html(h.createTime);}else{if($(this).attr("class")=="btn btn-white btn-xs showMethod"){$(this).html(h.clazz.fullyQualifiedClassName);
}}}});b+=g.html()+"<pre>"+h.message+"</pre>";}d.html(b);},error:function(){}});},_bindEventHander:function(){var c=this;$("body").on("click",".logRecordExport",function(){$.ajax({url:JobRunHiDetail._CONS_.JOB_RUNHI_IMPORT_LOGS,data:{"createTime":createTime,"threadName":threadName},type:"POST",dataType:"json",async:false,cache:false,success:function(f){if(f.success){var e=$("#downLoadLogRecord");
e.attr("action",JobRunHiDetail._CONS_.DOWNLOAD_LOGRECORDS_URL);e.submit();}},error:function(){DialogUtils.error("信息","导出日志失败");}});});$("#findTextValue").on("keypress",function(e){if(e.keyCode=="13"){b();
return false;}});$("body").on("click",".toLogRecordList",function(){JTTabUtils.closeTab($(window.top.document).find(".page-tabs-content").find(".active").attr("data-id"));
});var a=0;$("body").on("click",".findValue",function(){b();});var d="";function b(){if(a==0){d=$("#logRecordDetatailList").html();a+=1;}$("#logRecordDetatailList").html(d);
var i=$("#logRecordDetatailList").find("pre");var f=$("#findTextValue").val();var e=null;var g=null;var h=0;$(i).each(function(){g=$(this).html();e=$(this).html().replaceAll(f,"<span style='color:red'>"+f+"</span>");
if(e!=g){h++;}$(this).html(e);});if(h==0){DialogUtils.error("信息","没有记录匹配");}}},};