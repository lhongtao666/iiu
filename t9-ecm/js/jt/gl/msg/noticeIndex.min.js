function IndexMsg(){this.hadInit=false;this.totalMsgItem;this.currentMsgItem;this.result;}IndexMsg._CONS_={GET_TODAY_MSG_URL:ctx+"/gl/msg/msgEntity/listToDayMsgData.htm?type=notice&time=today",};
IndexMsg.prototype={init:function(){if(!this.hadInit){this.hadInit=true;this._loadToDayData();this._bindEventHandler();}},_loadToDayData:function(){var a=this;
FormUtils.loadData(IndexMsg._CONS_.GET_TODAY_MSG_URL,function(b){var g=b.rows;var f=b.records;var e=b.today;var c=new Date(e);var d=DateUtils.format(c,"今日公告(yyyy-MM-dd,xxxxx)");
var h=d.replace("xxxxx",DateUtils.getChineseWeeks(c));$("#timeString").empty().append(h);if(f>=1){a.currentMsgItem=1;a.totalMsgItem=f;a.result=b;$("#titleString").empty().append(a.result.rows[a.currentMsgItem-1].title);
$("#msgContentString").empty().append(a.result.rows[a.currentMsgItem-1].content);}else{a.currentMsgItem=0;a.totalMsgItem=f;a.result=b;$("#msgContentString").empty().append("今日暂无公告。");
}a._judeNextBtn(a.currentMsgItem,a.totalMsgItem);a._judePrevBtn(a.currentMsgItem);a._reloadHeight();});},_reloadHeight:function(){var b=$("div[srcVal='/gl/msg/msgdesktop/noticeIndex.htm']");
var a=b.height()-b.find(".panel-heading").outerHeight()-b.find("#noticeFooter").outerHeight();if(a<$("#msgContentString").height()){$("#msgContentString").css({height:(a-2-14-20)+"px",overflowY:"auto",overflowX:"hidden"});
}else{$("#msgContentString").css({height:(a-2-14-20)+"px",overflowY:"auto",overflowX:"hidden"});}},_bindEventHandler:function(){var a=this;$(".next-msg").on("click",function(){a.currentMsgItem=a.currentMsgItem+1;
$("#titleString").empty().append(a.result.rows[a.currentMsgItem-1].title);$("#msgContentString").empty().append(a.result.rows[a.currentMsgItem-1].content);
a._judeNextBtn(a.currentMsgItem,a.totalMsgItem);a._judePrevBtn(a.currentMsgItem);});$(".prev-msg").on("click",function(){a.currentMsgItem=a.currentMsgItem-1;
$("#titleString").empty().append(a.result.rows[a.currentMsgItem-1].title);$("#msgContentString").empty().append(a.result.rows[a.currentMsgItem-1].content);
a._judeNextBtn(a.currentMsgItem,a.totalMsgItem);a._judePrevBtn(a.currentMsgItem);});},_judeNextBtn:function(a,b){if(a>=b){$(".next-msg").attr("disabled","disabled").removeClass("btn-primary").addClass("btn-default");
a>b?(a=b):"";}else{$(".next-msg").removeAttr("disabled").removeClass("btn-default").addClass("btn-primary");}this._reloadHeight();},_judePrevBtn:function(a){if(a<=1){$(".prev-msg").attr("disabled","disabled").removeClass("btn-primary").addClass("btn-default");
a<1?(a=1):"";}else{$(".prev-msg").removeAttr("disabled").removeClass("btn-default").addClass("btn-primary");}this._reloadHeight();}};