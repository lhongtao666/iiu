$(function(){var a=new EmployeeWeiXin();a.init();});function EmployeeWeiXin(){this.hadInit=false;this.isEdit=false;this.isFormDataChange=false;this.seniorSearch=new SeniorSearch();
}EmployeeWeiXin._CONS_={EMPLOYEE_LIST_URL:ctx+"/crm/ou/employee/listEmployees.htm",EDIT_URL:ctx+"/gl/ou/employeeWeiXin/edit.htm",DETAIL_URL:ctx+"/gl/ou/employeeWeiXin/detail.htm",DELETE_URL:ctx+"/gl/ou/employeeWeiXin/delete.htm",LOGOUT_URL:ctx+"/gl/ou/employeeWeiXin/logout.htm",SAVE_ADD_URL:ctx+"/gl/ou/employeeWeiXin/saveAdd.htm",SAVE_EDIT_URL:ctx+"/gl/ou/employeeWeiXin/saveEdit.htm",LIST_DATA_URL:ctx+"/gl/ou/employeeWeiXin/listData.htm",SELECT_EMPLOYEE_URL:ctx+"/gl/ou/employeeWeiXin/selectEmployee.htm",FIND_EMPLOYEE_WEIXIN:ctx+"/gl/ou/employeeWeiXin/findByEmployee.htm",IMPORT_EXCEL_URL:ctx+"/gl/ou/employeeWeiXin/importExcel.htm",EDIT_FORM_ID:"employeeWeiXinForm",GRID:"#employeeWeiXinGrid",PAGER:"#employeeWeiXinPager",CURRENORGINID:"",CURRENTYPE:""};
EmployeeWeiXin.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindFormValidation();this._bindEventHander();this._hideNotGrantBtn();
this._locateToGlHelp();this._getEmployeeOption("");this._buildEmployeeOption("");this.initOrganizationTree();this.seniorSearch.init();this._initWxStatuslabel();
this._initOperLogJqgrid({});this._initChannelSelect();CateUtils.getOptions([{typeKey:"system",pKey:"weixinByGroup",container:"selectGroup"},{typeKey:"system",pKey:"weixinStatus",container:"weixinStatus"}]);
}},_initChannelSelect:function(){FormUtils.loadData(ctx+"/ec/media/mediaChannel/findActived.htm",function(b){if(b&&b.length>0){var c=new StringBuffer();
c.append("<option value=''>请选择</option>");for(var a=0;a<b.length;a++){c.append("<option value='"+b[a].id+"'>"+b[a].name+"</option>");}$("#mediaChannel").empty().append(c.toString());
}});},_initWxStatuslabel:function(){var a=this;var b=ctx+"/gl/cate/cate/getOptions.htm?typeKey=system&pKey=weixinStatus";FormUtils.loadData(b,function(c){if(c.length>0){a.msgTagDatas=c;
}});},_locateToGlHelp:function(){var a="glHelp.group_employee.employeeWeixin";glHelpUtil.init(a);},_hideNotGrantBtn:function(){if(!ResUtils.canShow("employeeWeiXin.button.detail")){$(".employeeWeiXinDetail").hide();
}if(!ResUtils.canShow("employeeWeiXin.button.add")){$(".employeeWeiXinAdd").hide();}if(!ResUtils.canShow("employeeWeiXin.button.edit")){$(".employeeWeiXinEdit").hide();
}if(!ResUtils.canShow("employeeWeiXin.button.delete")){$(".employeeWeiXinDel").hide();}if(!ResUtils.canShow("employeeWeiXin.button.logout")){$(".employeeWeiXinLogout").hide();
}if(!ResUtils.canShow("employeeWeiXin.button.selectEmployee")){$(".employeeWeiXinSelectEmployee").hide();}if(!ResUtils.canShow("employeeWeiXin.button.export")){$(".moduleExport").hide();
}},_initTree:function(){var a=this;var b=new StringBuffer();FormUtils.loadData(ctx+"/gl/cate/cateOpt/listData4CateId.htm?cateId=1110851285290176512",function(c){var d=c.cateOptPos;
if(d&&d.length){var g="";b.append("<li class='wxGroupLi' idVal='' name=''>全部</li>");for(var e=0;e<d.length;e++){var f="";b.append("<li class='wxGroupLi' idVal='").append(d[e].id).append("' name='"+d[e].name+"'>").append(d[e].name).append("</li>");
}}else{b.append("<li class='wxGroupLi' idVal='' name=''>全部</li>");}$(".wxGroupUl").empty().append(b.toString());$(".wxGroupUl").find("li:eq(0)").addClass("active");
$(".wxGroupUl").find("li:eq(0)").trigger("click");a._initJqgrid();});},initOrganizationTree:function(c){var a=this;var b={async:{enable:true,url:ctx+"/gl/ou/group/findVisiableEmployeeTreeForWx.htm",contentType:"application/json",dataType:"json",type:"get",autoParam:["id"],dataFilter:function(e,d,f){return f;
},},data:{simpleData:{enable:true,idKey:"id",pIdKey:"parentId"}},callback:{onClick:function(d,f,e){a._removeOtherWx();if(!a.hadInitJqgrid){a.hadInitJqgrid=true;
var g={startDate:$(".startDate").val()};if(e.type=="group"){g.belongOgn=e.id;a.partyId=e.id;a.partyType="group";EmployeeWeiXin._CONS_.CURRENORGINID=e.id;
EmployeeWeiXin._CONS_.CURRENTYPE="group";}else{g.employeeId=e.id;a.partyId=e.id;a.partyType="employee";EmployeeWeiXin._CONS_.CURRENORGINID=e.id;EmployeeWeiXin._CONS_.CURRENTYPE="employee";
}a._initJqgrid();}else{if(e.type=="group"){a.partyId=e.id;a.partyType="group";EmployeeWeiXin._CONS_.CURRENORGINID=e.id;EmployeeWeiXin._CONS_.CURRENTYPE="group";
}else{a.partyId=e.id;a.partyType="employee";EmployeeWeiXin._CONS_.CURRENORGINID=e.id;EmployeeWeiXin._CONS_.CURRENTYPE="employee";}a.reloadJqgrid();}a.seniorSearch.initCrumbs(e,"organizationTree");
},onAsyncSuccess:function(g,i,h,j){var f=$.fn.zTree.getZTreeObj("organizationTree");if(h==null){var f=$.fn.zTree.getZTreeObj("organizationTree");var d=f.getNodes();
if(d&&d.length){var e=d[0];f.expandNode(e,true,false,false);f.selectNode(e);f.setting.callback.onClick(null,e.id,e);}}}},view:{selectedMulti:false,fontCss:function(e,d){return(!!d.highlight)?{color:"#A60000","font-weight":"bold"}:{color:"#333","font-weight":"normal"};
}}};$.fn.zTree.init($("#organizationTree"),b);},_removeOtherWx:function(){$(".employee-wx").remove();},clear:function(c){var a=this;function b(){a._showListWrapper();
a.isFormDataChange=false;a.isEdit=false;$(".form_wrapper .saveBtn").show();FormUtils.clear(EmployeeWeiXin._CONS_.EDIT_FORM_ID);FormUtils.enableForm(EmployeeWeiXin._CONS_.EDIT_FORM_ID);
if(c){a.reloadJqgrid();}}if(a.isEdit&&a.isFormDataChange){DialogUtils.warning(function(){b();});}else{b();}},_showListWrapper:function(){$(".list_wrapper").show();
$(".form_wrapper").hide();},_showFormWrapper:function(){$(".list_wrapper").hide();$(".form_wrapper").show();},_add:function(){this._showFormWrapper();},_edit:function(a){this._showFormWrapper();
this.edit=true;this._loadData(a);},_detail:function(a){this._showFormWrapper();this._loadData(a);$(".form_wrapper .saveBtn").hide();FormUtils.disableForm(EmployeeWeiXin._CONS_.EDIT_FORM_ID);
},_loadData:function(b){var a=this;FormUtils.loadData(EmployeeWeiXin._CONS_.EDIT_URL+"?id="+b,function(c){$("input[name=id]").val(c.id);$("input[name=employeeId]").val(c.employeeId);
$("input[name=weixin]").val(c.weixin);$("input[name=alias]").val(c.alias);$("input[name=nickName]").val(c.nickName);$("input[name=nickNameRemark]").val(c.nickNameRemark);
$("input[name=weixinMobile]").val(c.weixinMobile);$("input[name=createTime]").val(c.createTime);$("input[name=employeeName]").val(c.employeeAid+":"+c.employeeName);
$("input[name=loginTime]").val(c.loginTime);$("input[name=lastLogoutTime]").val(c.lastLogoutTime);$("input[name=headImg]").val(c.headImg);$("input[name=status]").val(c.status);
$("input[name=userName]").val(c.userName);$("select[name=group]").val(c.group);$("select[name=weixinStatus]").val(c.weixinStatus);$("input[name=fromType]").val(c.fromType);
$("#fromTypeName").val(c.fromType=="excel"?"导入":"自动识别");$("select[name=mediaChannel]").val(c.mediaChannel);$("input[name=mgrName]").val(c.mgrName);});a._reloadOperLogJqgrid(b[0]);
},_save:function(){var b=this;var c=$("#id").val();var a=null;if(c!=null&&c!=""){a=EmployeeWeiXin._CONS_.SAVE_EDIT_URL;}else{a=EmployeeWeiXin._CONS_.SAVE_ADD_URL;
$("input[name=status]").val(0);$("input[name=fromType]").val("add");$("input[name=userName]").val($("input[name=alias]").val());}if($("#employeeWeiXinForm").valid()){ButtonUtils.disableBtn("saveBtn");
FormUtils.submitByFormId(a,EmployeeWeiXin._CONS_.EDIT_FORM_ID,function(d){ButtonUtils.enableBtn("saveBtn");if(d.success){if(d.msgCode==actionCode.CREATE){DialogUtils.success(msgCode.INFO,msgCode.CREATE_MSG);
}else{if(d.msgCode==actionCode.UPDATE){DialogUtils.success(msgCode.INFO,msgCode.UPDATE_MSG);}}b.isEdit=false;b.clear(true);}else{DialogUtils.error(msgCode.FAIL_MSG,d.msg);
}},function(){ButtonUtils.enableBtn("saveBtn");DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});}},_delete:function(b){var a=this;DialogUtils.confirm(function(){FormUtils.del(EmployeeWeiXin._CONS_.DELETE_URL,b,function(c){if(c.success){DialogUtils.success(msgCode.INFO,msgCode.DELETE_MSG);
a.reloadJqgrid();}else{DialogUtils.error(msgCode.ERROR,c.msg);}});});},_logout:function(b){var a=this;DialogUtils.confirmWithOptions({title:"",text:"确定将导致该微信号从系统中下线，将监控不到聊天信息",confirmButtonText:"确定",yesFunc:function(){FormUtils.del(EmployeeWeiXin._CONS_.LOGOUT_URL,b,function(c){if(c.success){DialogUtils.success(msgCode.INFO,"强制退出成功");
a.reloadJqgrid();}else{DialogUtils.error(msgCode.ERROR,c.msg);}});}});},_showPersonalLoginLog:function(d){var e=d.nickName;var c=d.employeeId;var a=d.weixin;
var b=d.userName;var f=ctx+"/gl/ou/employeeWeiXin/toLog.htm?userName="+b+"&weixin="+a;JTTabUtils.addOrRefreshTab(f,"'"+e+"' 日志记录");},_buildEmployeeOption:function(b){var a=EmployeeWeiXin._CONS_.EMPLOYEE_LIST_URL+"?groupId="+b+"&type=dept_manager";
FormUtils.loadData(a,function(d){$("#belongEmployeeSearch").empty();if(d&&d.length>0){var e=new StringBuffer();e.append("<option value=''>请选择</option>");
for(var c=0;c<d.length;c++){e.append("<option value='"+d[c].id+"'>"+d[c].aid+":"+d[c].name+"</option>");}$("#belongEmployeeSearch").append(e.toString()).select2();
}},null,true);},_bindEventHander:function(){var a=this;$("#groupName").on("click",function(){var b={isMultiple:0,selectedGroupId:$("input[name='belongOgn']").val(),container:"groupName",nolimit:true,positionType:"statistics,dept_manager",fn:function(c){$("input[name=belongOgn]").val(c);
a._buildEmployeeOption(c);}};GroupUtils.selectGroupTreeBox(b);});$(document).on("click",".prevBtn",function(){a.clear(false);});$(document).on("click",".saveBtn",function(){a._save();
});$("#"+EmployeeWeiXin._CONS_.EDIT_FORM_ID).on("change","input",function(){if(a.isEdit){a.isFormDataChange=true;}});$("#"+EmployeeWeiXin._CONS_.EDIT_FORM_ID).on("change","select",function(){if(a.isEdit){a.isFormDataChange=true;
}});$("#"+EmployeeWeiXin._CONS_.EDIT_FORM_ID).on("change","textarea",function(){if(a.isEdit){a.isFormDataChange=true;}});$(".employeeWeiXinSearch").on("click",function(){a.reloadJqgrid();
});$("#employeeWeiXinSearchForm").on("keypress",function(b){if(b.keyCode=="13"){$(".employeeWeiXinSearch").trigger("click");}});$("#clearSearchBtn").on("click",function(){$("#employeeWeiXinSearchForm").find("input").val("");
});$("body").on("click",".employeeWeiXinAdd",function(){a._add();});$("body").on("click",".employeeWeiXinEdit",function(){a.isEdit=true;var b=$(this).attr("idVal");
if(!b){b=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selarrrow");if(b==null||b.length==0){DialogUtils.error(msgCode.error,msgCode.ERROR_NO_SELECT_EDIT);
return;}else{if(b&&b.length>1){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_EDIT_MUL_RECORD);return;}}}a._edit(b);});$("body").on("click",".employeeWeiXinDel",function(){var b=$(this).attr("idVal");
if(!b){b=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selarrrow");if(b==null||b.length==0){DialogUtils.error(msgCode.error,msgCode.ERROR_NO_SELECT_DELETE);
return;}}a._delete(b);});$("body").on("click",".employeeWeiXinDetail",function(){a.isEdit=true;var b=$(this).attr("idVal");if(!b){b=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b==null||b.length==0){DialogUtils.error(msgCode.error,msgCode.ERROR_NO_SELECT_DETAIL);return;}else{if(b&&b.length>1){DialogUtils.error(msgCode.error,msgCode.ERROR_DETAIL_MUL_RECORD);
return;}}}a._detail(b);});$("body").on("click",".selectEmployee",function(){a._selectEmployee();});$("body").on("click",".selectMgr",function(){a._selectMgr();
});$("body").on("click",".employeeWeiXinLogout",function(){var b=$(this).attr("idVal");if(!b){b=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b==null||b.length==0){DialogUtils.error(msgCode.error,"请选择要强制退出的微信号");return;}}a._logout(b);});$("body").on("click",".employeeWeiXinLog",function(){var b=$(this).attr("idVal");
if(!b){b=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selarrrow");if(b==null||b.length==0){DialogUtils.error(msgCode.error,"请选择要查看的微信号");return;
}else{if(b&&b.length>1){DialogUtils.error(msgCode.error,msgCode.ERROR_DETAIL_MUL_RECORD);return;}}var d=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selrow");
var c=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getRowData",d);}a._showPersonalLoginLog(c);});$("body").on("click",".employeeWeiXinSelectEmployee",function(){var b=$(EmployeeWeiXin._CONS_.GRID).jqGrid("getGridParam","selarrrow");
if(b==null||b.length==0){DialogUtils.error("提示","请选择要绑定员工的微信号");return;}a.layerIndex=layer.open({type:1,title:"选择员工",shade:false,btn:["确定","取消"],area:["400px","400px"],offset:"10%",content:$(".jt-select-employee-pane"),scrollbar:true,success:function(c,d){$("#select-employee").val("");
$("#select-employee").trigger("change");},yes:function(d,c){a._saveEmployee(b,d);}});});$("body").on("click",".wxGroupLi",function(){$(".wxGroupUl li.active").removeClass("active");
$(this).addClass("active");a.reloadJqgrid();});$("body").on("click",".tabli",function(c){var b=$(this).attr("id");EmployeeWeiXin._CONS_.CURRENORGINID="";
EmployeeWeiXin._CONS_.CURRENTYPE="";if(b=="organizationTabLi"){a.initOrganizationTree();$("#organizationDiv").show();$("#wxGroupDiv").hide();}else{a._initTree();
$("#organizationDiv").hide();$("#wxGroupDiv").show();}});$("#organizationTreeSearch").on("keyup",function(b){if(b.keyCode==13){a._searchNode(b);a._callNumber();
}});$("body").on("click",".moduleExport",function(){excelUtil.toGenExcel("employeeWeixin","生成excel模板","员工微信模块");});},_searchNode:function(d){var a=$.fn.zTree.getZTreeObj("organizationTree");
var c=$.trim($("#organizationTreeSearch").val());var b="name";if(this.lastValue===c){return;}this.lastValue=c;this._updateNodes(false,this.nodeList);if(c!=""){this.nodeList=a.getNodesByParamFuzzy(b,c);
this._updateNodes(true,this.nodeList);}else{this.nodeList=[];}},_callNumber:function(){var a=$.fn.zTree.getZTreeObj("organizationTree");if(this.nodeList.length){a.selectNode(this.nodeList[0],false);
this.clickCount=1;document.getElementById("number").innerHTML="["+this.clickCount+"/"+this.nodeList.length+"]";}else{if(this.nodeList.length==0){document.getElementById("number").innerHTML="[0/0]";
a.cancelSelectedNode();}}if($.trim($("#organizationTreeSearch").val())==""){document.getElementById("number").innerHTML="";a.cancelSelectedNode();}},_updateNodes:function(b,d){var c=$.fn.zTree.getZTreeObj("organizationTree");
if(d){for(var e=0,a=d.length;e<a;e++){d[e].highlight=b;if(b){c.expandNode(d[e].getParentNode(),true,false,false);}c.updateNode(d[e]);}}},_postParams:function(){var a=this;
var b=EmployeeWeiXin._CONS_.CURRENORGINID;var d=EmployeeWeiXin._CONS_.CURRENTYPE;var f=$("#employeeWeiXinSearchForm").closest("form").serialize();var c=$(".tabUl li.active").attr("id");
if(c=="organizationTabLi"){if(d!=""&&d){if(d=="group"){f+="&belongOgn="+b;}else{f+="&Q__S__EQ__employee.id_="+b;}}}else{var e=$(".wxGroupUl li.active").text();
if(e!=""){if(e!="全部"){f+="&Q__S__EQ__group_="+e;}}}return f;},_saveEmployee:function(d,c){var a=this;var f=$("#select-employee").val();if(f==null||f==""){DialogUtils.error("提示","请选择员工");
return;}var b=EmployeeWeiXin._CONS_.SELECT_EMPLOYEE_URL;var e={ids:d,employeeId:f};FormUtils.submit(b,e,function(g){if(g.success){layer.close(c);a.reloadJqgrid();
DialogUtils.success(msgCode.INFO,g.msg);}else{DialogUtils.error("提示",g.msg);}});},_getEmployeeOption:function(b){var a=EmployeeWeiXin._CONS_.EMPLOYEE_LIST_URL+"?groupId="+b+"&type=dept_manager";
FormUtils.loadData(a,function(d){var e=new StringBuffer();e.append("<option value=''>请选择</option>");if(d&&d.length>0){for(var c=0;c<d.length;c++){e.append("<option value='"+d[c].id+"'>"+d[c].aid+":"+d[c].name+"</option>");
}}$("#select-employee").empty().append(e.toString()).select2();},null,true);},_selectEmployee:function(){var a=this;var b=0;var d={isShowAllGroup:b,isMultiple:0,mode:0,isSale:0,callBack:function(e){if(e!=null){if(e.length>0){$("input[name=employeeId]").val(e[0].id);
$("input[name=employeeName]").val(e[0].aid+"："+e[0].name);}}}};var c=new EmployeesSelect();c.init(d);},_selectMgr:function(){var a=this;var b=0;var d={isShowAllGroup:b,isMultiple:0,mode:0,isSale:0,callBack:function(e){if(e!=null){if(e.length>0){$("input[name=mgrId]").val(e[0].id);
$("input[name=mgrName]").val(e[0].aid+"："+e[0].name);}}}};var c=new EmployeesSelect();c.init(d);},_bindFormValidation:function(){var a={rules:{employeeId:{required:true},employeeName:{required:true}},messages:{}};
FormUtils.bindFormValidation(EmployeeWeiXin._CONS_.EDIT_FORM_ID,a);},reloadJqgrid:function(b){var a=this;JTJqgridUtils.reloadJqgrid(EmployeeWeiXin._CONS_.GRID,a._postParams());
},_getManagerBtns:function(){var a=[];if(ResUtils.canShow("employeeWeiXin.button.delete")){a.push({lable:msgCode.DELETE_BTN_TEXT,btnClasses:"employeeWeiXinDel",iconClasses:"fa fa-remove"});
}if(ResUtils.canShow("employeeWeiXin.button.edit")){a.push({lable:msgCode.EDIT_BTN_TEXT,btnClasses:"employeeWeiXinEdit",iconClasses:"fa fa-edit"});}if(ResUtils.canShow("employeeWeiXin.button.detail")){a.push({lable:msgCode.DETAIL_BTN_TEXT,btnClasses:"employeeWeiXinDetail",iconClasses:"fa fa-list"});
}return a;},_initJqgrid:function(){var a=this;var b=EmployeeWeiXin._CONS_.LIST_DATA_URL;if(weixin){b+="?Q__S__EQ__wx.alias_="+weixin;}$(EmployeeWeiXin._CONS_.GRID).JTJqgrid({url:b,pager:EmployeeWeiXin._CONS_.PAGER,colNames:["ID","微信ID","员工","微信号","微信昵称","昵称备注","微信状态","渠道","推广员","在线","本次登录时间","上一次退出时间",],colModel:[{name:"employeeId",index:"employee_id_",width:120,hidden:true},{name:"userName",index:"user_name_",width:120,hidden:true},{name:"employeeName",index:"employee_id_",width:120,formatter:function(c,d,e){return e.employeeAid+":"+c;
}},{name:"alias",index:"alias_",width:120},{name:"nickName",index:"nick_name_",width:120},{name:"nickNameRemark",index:"nick_name_remark_",width:120},{name:"weixinStatus",index:"weixin_status_",width:80},{name:"channelName",index:"media_channel_",width:120},{name:"mgrName",index:"mgr_id_",width:120},{name:"status",index:"status_",width:60,formatter:function(c,d,e){if(c==0){return"<font style='color:red;'>否</font>";
}else{return"是";}}},{name:"loginTime",index:"login_time_",width:120},{name:"lastLogoutTime",index:"last_logout_time_",width:120}]});},_reloadOperLogJqgrid:function(b){var a=$("#weixinOperLogGrid").jqGrid("getGridParam","postData");
a["Q__S__EQ__weixin_id_"]=b;$("#weixinOperLogGrid").jqGrid("setGridParam",{datatype:"json",search:true}).trigger("reloadGrid",[{page:1}]);},_resizeJqgridWidth:function(){var a=0;
a=$("#weixinOperLogContainer").width()-10;$("#weixinOperLogGrid").jqGrid("setGridWidth",a);},_initOperLogJqgrid:function(b){var a=this;$.jgrid.defaults.styleUI="Bootstrap";
$("#weixinOperLogGrid").jqGrid({datatype:"local",url:ctx+"/gl/ou/employeeWeiXin/listOperLog.htm",height:350,autowidth:true,shrinkToFit:true,rowNum:20,postData:b,mtype:"POST",viewrecords:true,multiselect:false,rowList:[10,20,30],pager:"#weixinOperLogPager",hidegrid:false,rownumbers:true,colNames:["序号","操作人","操作时间","操作内容"],colModel:[{name:"employeeId",index:"employeeId",width:120,hidden:true},{name:"employeeId",index:"employee_id_",width:120,formatter:function(c,d,e){return e.employeeAid+":"+e.employeeName;
}},{name:"createTime",index:"create_time_",width:120,sortable:true,formatter:function(c){return DateUtils.miniTime(c);}},{name:"content",index:"content_",width:300}],loadComplete:function(){a._resizeJqgridWidth();
}});}};