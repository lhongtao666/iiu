$(function(){function a(){this.$container=$('div[srcVal="/crm/ou/employee/salePerformanceForGroup.htm"]');}a._CONS_={FIND_SALE_PERFORMANCE:ctx+"/ec/rp/reportProfit/listDeskTopGroupData.htm",FIND_ALL_GROUP:ctx+"/gl/ou/group/listData.htm",};
a.prototype={init:function(){var c=this;ReportDateUtil.initDate(".report-content",c.$container);c.$container.find("select[name=yearSearch]").val(new Date().getFullYear());
c.$container.find("select[name=monthSearch]").val(new Date().getMonth()+1);c._bindEventHander();},_bindEventHander:function(){var c=this;c.$container.on("click",".selectBtn",function(){c._loadData();
c.$container.find(".dataDiv").show();});c.$container.on("change","#belongOgn",function(){if(c.$container.find("#belongOgn").val()==""){c.$container.find(".selectBtn").hide();
}else{c.$container.find(".selectBtn").show();}});$("#groupName").on("click",function(){var d={isMultiple:0,selectedGroupId:$("input[name='belongOgn']").val(),container:"groupName",nolimit:true,positionType:"statistics,dept_manager",fn:function(e){$("input[name=belongOgn]").val(e);
$("#belongOgn").trigger("change");}};GroupUtils.selectGroupTreeBox(d);});},_loadData:function(){var c=this;var d="";d+="Q__D__BW__place_time_="+ReportDateUtil.getDateRangeStr(c.$container);
d+="&belongOgn="+$("#belongOgn").val();FormUtils.loadData(a._CONS_.FIND_SALE_PERFORMANCE+"?"+d,function(e){if(e!=null&&e!=""){c.$container.find("#placeCount").text(e.placeCount+"个/");
c.$container.find("#placeAmount").text(parseFloat(e.placeAmount).toFixed(0)+"元");if(e.placeCount!=0&&e.newCsCount==0){c.$container.find("#done").text(100+"%");
}else{if(e.placeCount!=0&&e.newCsCount!=0){if((e.placeCount/e.newCsCount)>1){c.$container.find("#done").text(100+"%");}else{c.$container.find("#done").text(parseFloat((e.placeCount/e.newCsCount*100)).toFixed(0)+"%");
}}else{if(e.placeCount==0){c.$container.find("#done").text(0+"%");}}}c.$container.find("#auditCount").text(e.auditCount+"个/");c.$container.find("#auditAmount").text(parseFloat(e.auditAmount).toFixed(0)+"元");
if(e.auditCount!=0&&e.placeCount==0){c.$container.find("#check").text(100+"%");}else{if(e.auditCount!=0&&e.placeCount!=0){if((e.auditCount/e.placeCount)>1){c.$container.find("#check").text(100+"%");
}else{c.$container.find("#check").text(parseFloat(e.auditCount/e.placeCount*100).toFixed(0)+"%");}}else{if(e.auditCount==0){c.$container.find("#check").text(0+"%");
}}}c.$container.find("#signCount").text(e.signCount+"个/");c.$container.find("#signAmount").text(parseFloat(e.signAmount).toFixed(0)+"元");if(e.signCount!=0&&e.placeCount==0){c.$container.find("#sign").text(100+"%");
}else{if(e.signCount!=0&&e.placeCount!=0){if((e.signCount/e.placeCount)>1){c.$container.find("#sign").text(100+"%");}else{c.$container.find("#sign").text(parseFloat(e.signCount/e.placeCount*100).toFixed(0)+"%");
}}else{if(e.signCount==0){c.$container.find("#sign").text(0+"%");}}}c.$container.find("#shipCount").text(e.shipCount+"个/");c.$container.find("#shipAmount").text(parseFloat(e.shipAmount).toFixed(0)+"元");
c.$container.find("#rejectCount").text(e.rejectCount+"个/");c.$container.find("#rejectAmount").text(parseFloat(e.rejectAmount).toFixed(0)+"元");}else{c.$container.find("#auditCount").text("无");
c.$container.find("#auditAmount").text("");c.$container.find("#done").text("无");c.$container.find("#checkCount").text("无");c.$container.find("#checkAmount").text("");
c.$container.find("#check").text("无");c.$container.find("#signCount").text("无");c.$container.find("#signAmount").text("");c.$container.find("#sign").text("无");
c.$container.find("#shipCount").text("无");c.$container.find("#shipAmount").text("");c.$container.find("#rejectCount").text("无");c.$container.find("#rejectAmount").text("");
}});}};var b=new a();b.init();});