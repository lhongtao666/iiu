function VersionTipPanel(){var a=false;}VersionTipPanel._CONS_={};VersionTipPanel.prototype={init:function(){if(!this.isInit){this.isInit=true;this._bindEventHander();
}},initVersionTip:function(){var a=this;FormUtils.loadData(ctx+"/gl/version/version/versionTip.htm",function(b){if(b&&b.length>0){a._openVersionTipPanel(b);
}});},showHistoryVersion:function(){var a=this;FormUtils.loadData(ctx+"/gl/version/version/findAll.htm",function(b){if(b&&b.length>0){a._openVersionTipPanel(b);
}});},_openVersionTipPanel:function(b){var a=this;a.layerIndex=layer.open({type:1,title:"版本提示",shade:false,btn:[],area:["800px","600px"],offset:"10%",content:$(".versionTipPanel"),scrollbar:true,success:function(c,d){window.localStorage.setItem("versionList",JSON.stringify(b));
$("#preVersion").attr("disabled",true);if(b.length>1){$("#nextVersion").attr("nextIndex",1);}else{$("#nextVersion").attr("disabled",true);}var e=b[0];a._initVersionForm(e);
}});},_initVersionForm:function(e){var b=this;$("#versionTipForm").find("#version").val(e.version);$("#versionTipForm").find("#versionTags").val(e.tags);
$("#versionTipForm").find("#versionDesc").val(e.desc);var d=[];var f=e.versionItemPos;if(f){for(var c=0;c<f.length;c++){var a=[c+1,f[c].module,f[c].tag,f[c].desc,"<button class='viewItemDoc' attr-url='"+f[c].doc+"'>查看</button>"];
d.push(a);}}b._initVersionItemTable(d);},_initVersionItemTable:function(b){$("#versionItemDiv").empty().append("<table id='versionItemTable' class='table table-striped table-bordered'></table>");
var a=[{title:"序号",width:"6%"},{title:"模块",width:"8%"},{title:"标签",width:"10%"},{title:"描述",width:"66%"},{title:"帮助文档",width:"10%"}];versionItemTable=$("#versionItemTable").DataTable({data:b,columns:a,lengthMenu:[[20]],searching:false,paging:true,pagingType:"simple",lengthChange:false,autoWidth:false,ordering:false});
},_bindEventHander:function(){var a=this;$(document).on("click","#preVersion",function(){var d=$(this).attr("preIndex");var c=window.localStorage.getItem("versionList");
if(c){var e=JSON.parse(c);var b=e[d];if(d==0){$(this).attr("disabled",true);}$("#nextVersion").attr("disabled",false);if(b){a._initVersionForm(b);$("#nextVersion").attr("nextIndex",parseInt(d)+1);
$(this).attr("preIndex",parseInt(d)-1);}}});$(document).on("click","#nextVersion",function(){var d=$(this).attr("nextIndex");var c=window.localStorage.getItem("versionList");
if(c){var e=JSON.parse(c);var b=e[d];if(d==e.length-1){$(this).attr("disabled",true);}$("#preVersion").attr("disabled",false);if(b){a._initVersionForm(b);
$("#preVersion").attr("preIndex",parseInt(d)-1);$(this).attr("nextIndex",parseInt(d)+1);}}});$(document).on("click",".viewItemDoc",function(){var b=$(this).attr("attr-url");
window.open(b);return false;});},};