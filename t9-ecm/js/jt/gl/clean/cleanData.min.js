$(function(){var a=new CleanData();a.init();});function CleanData(){this.hadInit=false;this.isEdit=false;}CleanData._CONS_={TRANSFER_EMPDATA_URL:ctx+"/crm/cs/csEntity/transferEmpData.htm",TRANSFER_GROUPDATA_URL:ctx+"/crm/cs/csEntity/transferGroupData.htm",DELETE_CS_FOLLOW_URL:ctx+"/crm/cs/csFollow/deleteFollows.htm",ADD_EMP_FILE:ctx+"/gl/cate/cate/addEmpFile.htm",CHECK_STORE:ctx+"/ec/salesorder/soEntity/checkStore.htm",};
CleanData.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;a._bindEventHander();CateUtils.getOptions([{typeKey:"system",pKey:"CsBizTypes",container:"bizTypeSearch",callBack:function(){$("#bizTypeSearch").chosen();
}},{typeKey:"system",pKey:"CsFollowType",container:"followSearch",callBack:function(){$("#followSearch").chosen();}}]);}this._locateToGlHelp();},_locateToGlHelp:function(){var a="glHelp.runtime.handle";
glHelpUtil.init(a);},_bindEventHander:function(){var a=this;$("#updateEmpDataBtn").on("click",function(){var c=$("#aidThree").val();var b=$("#aidFour").val();
if(c&&b){FormUtils.submit(CleanData._CONS_.TRANSFER_EMPDATA_URL,{aidOne:c,aidTwo:b,isTransferProfit:"n"},function(d){if(d.success){DialogUtils.success(msgCode.SUCCESS,d.msg);
}else{DialogUtils.error(msgCode.ERROR,d.msg);}});}else{DialogUtils.success(msgCode.INFO,"请填写数据！");}});$("#transferDataBtn").on("click",function(){var c=$("#aidOne").val();
var b=$("#aidTwo").val();if(c&&b){FormUtils.submit(CleanData._CONS_.TRANSFER_EMPDATA_URL,{aidOne:c,aidTwo:b,isTransferProfit:"y"},function(d){if(d.success){DialogUtils.success(msgCode.SUCCESS,d.msg);
}else{DialogUtils.error(msgCode.ERROR,d.msg);}});}else{DialogUtils.success(msgCode.INFO,"请填写数据！");}});$("#updateGroupDataBtn").on("click",function(){var b=$("input[name=belongOgn]").val();
var c=$("#aid").val();if(b&&c){FormUtils.submit(CleanData._CONS_.TRANSFER_GROUPDATA_URL,{belongOgn:b,aid:c},function(d){if(d.success){DialogUtils.success(msgCode.SUCCESS,d.msg);
}else{DialogUtils.error(msgCode.ERROR,d.msg);}});}else{DialogUtils.success(msgCode.INFO,"请填写数据！");}});$("#groupName").on("click",function(){var b={isMultiple:0,selectedGroupId:$("input[name='belongOgn']").val(),container:"groupName",nolimit:true,positionType:"statistics,dept_manager",fn:function(c){$("input[name=belongOgn]").val(c);
}};GroupUtils.selectGroupTreeBox(b);});$("#deleteFollowBtn").on("click",function(){var d=$("#deleteFollowForm input[name='aid']").val();var c=$("#bizTypeSearch").val();
var b=$("#followSearch").val();var f={};var e="";if(d==""||d==null){DialogUtils.error(msgCode.ERROR,"请输入工号！");return;}else{f.aid=d;f.follow="";f.bizType="";
if((c==""||c==null)&&(b==""||b==null)){e="你将删除工号"+d+"下的所有客户的所有跟进记录";}else{if((b==""||b==null)){f.bizType=c;f.follow="";e="你将删除工号"+d+"下的,等级为"+c+"的所有跟进记录";
}else{if((c==""||c==null)){f.follow=b;e="你将删除工号"+d+"下的所有客户的"+b+"类型的跟进记录";}else{f.bizType=c;f.follow=b;e="你将删除工号"+d+"下的，等级为"+c+"的"+b+"类型的跟进记录";}}}a._beforeDeleteFollow(f,e);
}});$("#addEmpFileBtn").on("click",function(){FormUtils.submit(CleanData._CONS_.ADD_EMP_FILE,function(b){if(b.success){DialogUtils.success(msgCode.SUCCESS,b.msg);
}else{DialogUtils.error(msgCode.ERROR,b.msg);}});});$("#checkStoreBtn").on("click",function(){FormUtils.submit(CleanData._CONS_.CHECK_STORE,function(b){if(b.success){DialogUtils.success(msgCode.SUCCESS,b.msg);
}else{DialogUtils.error(msgCode.ERROR,b.msg);}});});$("body").on("click",".initSort",function(){ButtonUtils.disableBtn("initSort");FormUtils.loadData(ctx+"/gl/auth/res/initPinyinAttr.htm",function(b){if(b.success){DialogUtils.success(msgCode.SUCCESS,b.msg);
}else{DialogUtils.error(msgCode.ERROR,"执行失败");}ButtonUtils.enableBtn("initSort");},function(){ButtonUtils.enableBtn("initSort");});});},_beforeDeleteFollow:function(c,b){var a=this;
DialogUtils.confirmWithOptions({title:b,text:"",confirmButtonText:"确定",yesFunc:function(){a._deleteFollow(c);}});},_deleteFollow:function(c){var b=this;
var a=CleanData._CONS_.DELETE_CS_FOLLOW_URL;ButtonUtils.disableBtn("deleteFollowBtn");FormUtils.submit(a,c,function(d){ButtonUtils.enableBtn("deleteFollowBtn");
if(d.success){DialogUtils.success(msgCode.SUCCESS,"删除成功");}else{DialogUtils.error(msgCode.FAIL_MSG,d.msg);}},function(){ButtonUtils.enableBtn("deleteFollowBtn");
DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});},};