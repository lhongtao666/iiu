$(function(){var a=new SysMain();a.init();});function SysMain(){this.datas=[];}SysMain._CONS_={LOAD_DATA_URL:ctx+"/gl/desktop/desktopColumn/loadDesktopColumnData.htm"};
SysMain.prototype={init:function(){this._loadDesktopConfig();this._bindEventHandler();},_ajaxLoadDesktopTab:function(){$("#desktopConfigContainer").find(".desktopTab").each(function(){var a=$(this);
var b=ctx+$(this).attr("srcVal");if(b.indexOf("?")!=-1){b+="&currentPositionId="+$("#changePostion").val();}else{b+="?currentPositionId="+$("#changePostion").val();
}FormUtils.loadData(b,function(c){a.empty().append(c.msg);},function(){},true);});},_bindEventHandler:function(){var a=this;$(document).on("click",".showMore",function(){JTTabUtils.addOrRefreshTab(ctx+$(this).attr("urlVal"),$(this).attr("nameVal"));
});$("body").on("change","#changedesktop",function(){var b=$(this).val();for(var c=0;c<a.datas.length;c++){if(a.datas[c].roleId==b){var d=$(a.datas[c].viewCode);
$("#desktopConfigContainer").empty().append(d);a._ajaxLoadDesktopTab();return;}}});$("body").on("change","#changePostion",function(){a._ajaxLoadDesktopTab();
});},_loadDesktopConfig:function(){var a=this;FormUtils.loadData(ctx+"/gl/desktop/desktopConfig/getUserDesktop.htm",function(d){if(d.success){a.datas=JSON.parse(d.msg);
length=a.datas.length;if(length>0){var c="<label "+(length==1?"style='display:none;'":"")+">角色</label><select "+(length==1?"style='display:none;'":"")+"id='changedesktop'>";
for(var b=0;b<a.datas.length;b++){if("y"==a.datas[b].isDefault){c+="<option value='"+a.datas[b].roleId+"' selected>"+a.datas[b].roleName+"</postion>";$("#desktopConfigContainer").empty().append(a.datas[b].viewCode);
}else{c+="<option value='"+a.datas[b].roleId+"'>"+a.datas[b].roleName+"</postion>";}}c+="</select>";}a._ajaxLoadDesktopTab();}});},};