var UMO={_apihost:"/DeskServer",_bizhost:"",_dom:"",_token:"",_loginok:false,_evtname:"msievent",_lastInitTime:0,_retrydelay:1000,_syncmode:false,_running:false,_pingTimer:null,_evthandler:{onReadyState:function(a){},onCallincome:function(c,a,b){},onTalked:function(c,a,b){},onRingStoped:function(){},onHookChanged:function(a){},onAgentChanged:function(a){},onAsyncFinished:function(c,a,b,d){},onAllBusy:function(a,c,b){},onQuelen:function(b,a){},onSmsincome:function(a,d,b,c){},onOperCallback:function(b,c,a,g,d,f,e){},onSpeedCallback:function(i,e,b,h,f,c,a,g,d){},onTextMessage:function(a,b,c){}},start:function(k,c,i,a,e,b,g,h,f,l){if(UMO._running==true){if((f!=null)&&(f!=undefined)){f("/comm/start",{"errno":UMO.ERR_ALREADYSTART,"errmsg":UMO.MSG_ALREADYSTART});
}return;}if(UMO._pingTimer!=null){clearTimeout(UMO._pingTimer);UMO._pingTimer=null;}jQuery.support.cors=true;UMO._apihost=k;UMO._bizhost=c;UMO._evthandler=i;
UMO._dom=a;UMO._userid=b;var d="/comm/start";var j="dom="+a+"&epwd="+e+"&aid="+b+"&apwd="+g+"&adn="+h;UMO._ajaxcall(d,j,function(n,m){if(m.errno==0){UMO._running=true;
UMO._token=m.token;UMO._initpush();UMO._pinging();}if((f!=null)&&(f!=undefined)){f(n,m);}},l);},exit:function(a,b){UMO._running=false;var d="/comm/exit";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);UMO._dom="";UMO._token="";}},ping:function(a,b){var d="/comm/ping";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},getevent:function(c,a,b){var e="/comm/getevent";var d="dom="+UMO._dom+"&token="+UMO._token+"&evttype="+c;
UMO._ajaxcall(e,d,function(g,f){if((a!=null)&&(a!=undefined)){a(g,f);}},b);},subscribe:function(e,a,b){var d="/comm/subscribe";var c="dom="+UMO._dom+"&token="+UMO._token+"&evttypes="+e;
UMO._ajaxcall(d,c,function(g,f){if((a!=null)&&(a!=undefined)){a(g,f);}},b);},getsysid:function(a,b){var d="/comm/getsysid";var c="dom="+UMO._dom+"&token="+UMO._token;
UMO._ajaxcall(d,c,function(f,e){if((a!=null)&&(a!=undefined)){a(f,e);}},b);},getpos:function(a,b){var d="/comm/getpos";var c="dom="+UMO._dom+"&token="+UMO._token;
UMO._ajaxcall(d,c,function(f,e){if((a!=null)&&(a!=undefined)){a(f,e);}},b);},getuser:function(a,b){var d="/comm/getuser";var c="dom="+UMO._dom+"&token="+UMO._token;
UMO._ajaxcall(d,c,function(f,e){if((a!=null)&&(a!=undefined)){a(f,e);}},b);},getversion:function(a,b){var d="/comm/getversion";var c="dom="+UMO._dom+"&token="+UMO._token;
UMO._ajaxcall(d,c,function(f,e){if((a!=null)&&(a!=undefined)){a(f,e);}},b);},setsyncmode:function(a){UMO._syncmode=a;},speeddial:function(g,k,l,d,b,h,m,f,e,c,j){var a="/tele/call/speeddial";
var i="dom="+UMO._dom+"&token="+UMO._token+"&teleno="+g+"&dispno="+k+"&playfile="+l+"&oper="+d+"&param="+b+"&gid="+h+"&recflag="+m+"&uud="+f+"&backurl="+encodeURIComponent(e);
if(UMO._tokenvalid(a,c)){UMO._ajaxcall(a,i,c,j);}},speedsms:function(e,f,d,h,a,b){var g="/tele/call/speedsms";var c="dom="+UMO._dom+"&token="+UMO._token+"&teleno="+e+"&content="+encodeURIComponent(f)+"&options="+d+"&slot="+h;
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,c,a,b);}},speedplay:function(d,h,i,j,e,b,c,g){var a="/tele/call/speedplay";var f="dom="+UMO._dom+"&token="+UMO._token+"&callid="+d+"&playfile="+encodeURIComponent(h)+"&dtmfcnt="+i+"&termchars="+j+"&loop="+e+"&async="+b;
if(UMO._tokenvalid(a,c)){UMO._ajaxcall(a,f,c,g);}},speedrecord:function(f,a,d,i,g,b,e,j){var c="/tele/call/speedrecord";var h="dom="+UMO._dom+"&token="+UMO._token+"&callid="+f+"&filename="+encodeURIComponent(a)+"&async="+d+"&maxtime="+i+"&termchar="+g+"&append="+b;
if(UMO._tokenvalid(c,e)){UMO._ajaxcall(c,h,e,j);}},speedstop:function(e,c,f,a,b){var g="/tele/call/speedstop";var d="dom="+UMO._dom+"&token="+UMO._token+"&callid="+e+"&taskid="+c+"&type="+f;
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,d,a,b);}},speedhook:function(d,a,b){var e="/tele/call/speedhook";var c="dom="+UMO._dom+"&token="+UMO._token+"&callid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},speedfoward:function(d,e,g,a,b){var f="/tele/call/speedfoward";var c="dom="+UMO._dom+"&token="+UMO._token+"&callid="+d+"&acdno="+e+"&aidplay="+g;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},speedconnect:function(g,f,e,a,b){var d="/tele/call/speedconnect";var c="dom="+UMO._dom+"&token="+UMO._token+"&callid1="+g+"&callid2="+f+"&action="+e;
if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},confnew:function(d,a,b){var e="/tele/conf/new";var c="dom="+UMO._dom+"&token="+UMO._token+"&password="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},confdelete:function(e,d,a,b){var f="/tele/conf/delete";var c="dom="+UMO._dom+"&token="+UMO._token+"&confid="+e+"&password="+d;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},confinvite:function(c,j,h,d,e,f,b,i){var a="/tele/conf/invite";var g="dom="+UMO._dom+"&token="+UMO._token+"&confid="+c+"&password="+j+"&dispno="+h+"&teleno="+d+"&gid="+e+"&attr="+f;
if(UMO._tokenvalid(a,b)){UMO._ajaxcall(a,g,b,i);}},confkick:function(g,e,d,f,a,b){var h="/tele/conf/kick";var c="dom="+UMO._dom+"&token="+UMO._token+"&confid="+g+"&password="+e+"&callid="+d+"&teleno="+f;
if(UMO._tokenvalid(h,a)){UMO._ajaxcall(h,c,a,b);}},confattr:function(c,i,d,e,g,b,h){var a="/tele/conf/attr";var f="dom="+UMO._dom+"&token="+UMO._token+"&confid="+c+"&password="+i+"&callid="+d+"&teleno="+e+"&newattr="+g;
if(UMO._tokenvalid(a,b)){UMO._ajaxcall(a,f,b,h);}},conflist:function(a,b){var d="/tele/conf/list";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},confmember:function(e,d,a,b){var f="/tele/conf/member";var c="dom="+UMO._dom+"&token="+UMO._token+"&confid="+e+"&password="+d;if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);
}},faxsend:function(c,h,e,i,d,b,g){var a="/tele/fax/send";var f="dom="+UMO._dom+"&token="+UMO._token+"&teleno="+c+"&teleno="+c+"&faxfile="+h+"&dtime="+e+"&options="+i;
if(UMO._tokenvalid(a,b)){UMO._ajaxcall(a,f,b,g);}},faxlist:function(a,b){var d="/tele/fax/list";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},faxdelete:function(d,a,b){var e="/tele/fax/delete";var c="dom="+UMO._dom+"&token="+UMO._token+"&faxfile="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},getrecordfile:function(d,a,b){var e="/tele/vox/getrecordfile";var c="dom="+UMO._dom+"&token="+UMO._token+"&cdrsrc="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},g729decode:function(e,f,a,b){var d="/tele/vox/g729decode";var c="dom="+UMO._dom+"&token="+UMO._token+"&srcfile="+e+"&destfile="+f;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},text2wave:function(f,g,d,a,b){var e="/tele/vox/text2wave";var c="dom="+UMO._dom+"&token="+UMO._token+"&text="+f+"&destfile="+g+"&option="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},acdlist:function(d,a,b){var e="/tele/sys/getacdinfolist";var c="dom="+UMO._dom+"&token="+UMO._token+"&acdno="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},acditemlist:function(d,a,b){var e="/tele/sys/getacditemlist";var c="dom="+UMO._dom+"&token="+UMO._token+"&acdno="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},agentlist:function(d,a,b){var e="/tele/sys/getagentinfolist";var c="dom="+UMO._dom+"&token="+UMO._token+"&acdno="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},trunklist:function(a,b){var d="/tele/sys/gettrunkinfolist";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},msilist:function(a,b){var d="/tele/sys/getmsiinfolist";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},calllist:function(a,b){var d="/tele/sys/getcallinfolist";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},flowlist:function(a,b){var d="/tele/sys/getflowinfolist";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},tasklist:function(a,b){var d="/tele/sys/gettaskinfolist";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},sipuserlist:function(d,a,b){var e="/tele/sys/getsipuserlist";
var c="dom="+UMO._dom+"&token="+UMO._token+"&all="+d;if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},sysinfo:function(a,b){var d="/tele/sys/getsysteminfo";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},runstatelist:function(a,b){var d="/tele/sys/getrunstatelist";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},hardchanlist:function(a,b){var d="/tele/sys/gethardchanlist";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},login:function(a,c,h,d,f,e,i){var b="/tele/agent/login";var g="dom="+UMO._dom+"&token="+UMO._token+"&aid="+a+"&acd="+c+"&skill="+h+"&mon="+d+"&silent="+f;
UMO._ajaxcall(b,g,function(k,j){if(j.errno==0){UMO._loginok=true;}if((e!=null)&&(e!=undefined)){e(k,j);}},i);},logout:function(e,a,b){var d="/tele/agent/logout";
var c="dom="+UMO._dom+"&token="+UMO._token+"&aid="+e;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,function(g,f){if(f.errno==0){UMO._loginok=false;}if((a!=null)&&(a!=undefined)){a(g,f);
}},b);}},offhook:function(a,b){var d="/tele/agent/offhook";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},onhook:function(a,b){var d="/tele/agent/onhook";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},setbusy:function(a,b){var d="/tele/agent/setbusy";var c="dom="+UMO._dom+"&token="+UMO._token;
if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},setidle:function(a,b){var d="/tele/agent/setidle";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},dialout:function(d,f,g,e,a,b){var h="/tele/agent/dialout";var c="dom="+UMO._dom+"&token="+UMO._token+"&teleno="+d+"&gid="+f+"&uud="+g+"&async="+e;if(UMO._tokenvalid(h,a)){UMO._ajaxcall(h,c,a,b);
}},initconf:function(d,f,e,a,b){var g="/tele/agent/initconf";var c="dom="+UMO._dom+"&token="+UMO._token+"&teleno="+d+"&uud="+f+"&async="+e;if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,c,a,b);
}},compconf:function(a,b){var d="/tele/agent/compconf";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},inittrans:function(d,f,e,a,b){var g="/tele/agent/inittrans";
var c="dom="+UMO._dom+"&token="+UMO._token+"&teleno="+d+"&uud="+f+"&async="+e;if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,c,a,b);}},comptrans:function(a,b){var d="/tele/agent/comptrans";
var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},hold:function(d,a,b){var e="/tele/agent/hold";var c="dom="+UMO._dom+"&token="+UMO._token+"&mute"+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},retrieve:function(a,b){var d="/tele/agent/retrieve";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},play:function(d,f,g,c,a,b){var h="/tele/agent/play";var e="dom="+UMO._dom+"&token="+UMO._token+"&filename="+d+"&tts="+f+"&async="+g+"&loop="+c;if(UMO._tokenvalid(h,a)){UMO._ajaxcall(h,e,a,b);
}},record:function(a,d,h,f,b,e,i){var c="/tele/agent/record";var g="dom="+UMO._dom+"&token="+UMO._token+"&filename="+a+"&async="+d+"&maxtime="+h+"&termchar="+f+"&append="+b;
if(UMO._tokenvalid(c,e)){UMO._ajaxcall(c,g,e,i);}},getdtmf:function(a,h,d,i,j,f,c,g){var b="/tele/agent/getdtmf";var e="dom="+UMO._dom+"&token="+UMO._token+"&filename="+a+"&tts="+h+"&loop="+d+"&maxdigits="+i+"&timeout="+f;
if(UMO._tokenvalid(b,c)){UMO._ajaxcall(b,e,c,g);}},stopop:function(c,e,a,b){var f="/tele/agent/stopop";var d="dom="+UMO._dom+"&token="+UMO._token+"&taskid="+c+"&type="+e;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,d,a,b);}},setuud:function(d,a,b){var e="/tele/agent/setuud";var c="dom="+UMO._dom+"&token="+UMO._token+"&uud="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},getcdrid:function(a,b){var d="/tele/agent/getcdrid";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);
}},getcallid:function(a,b){var d="/tele/agent/getcallid";var c="dom="+UMO._dom+"&token="+UMO._token;if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},sendtextmessage:function(d,f,g,a,b){var e="/tele/agent/sendtextmessage";
var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d+"&chatmode="+f+"&text="+encodeURIComponent(g);if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);
}},transferex:function(e,f,d,h,a,b){var g="/tele/agent/transferex";var c="dom="+UMO._dom+"&token="+UMO._token+"&destno="+e+"&uud="+f+"&failaction="+d+"&failacd="+h;
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,c,a,b);}},sendmessagetoide:function(e,a,b){var d="/tele/agent/sendmessagetoide";var c="dom="+UMO._dom+"&token="+UMO._token+"&text="+encodeURIComponent(e);
if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},interrupt:function(d,f,a,b){var e="/tele/monitor/interrupt";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d+"&mode="+f;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},intercept:function(d,a,b){var e="/tele/monitor/intercept";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},listen:function(d,f,a,b){var e="/tele/monitor/listen";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d+"&mode="+f;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},forceonhook:function(d,a,b){var e="/tele/monitor/forceonhook";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},joinacd:function(e,f,c,a,b){var g="/tele/monitor/joinacd";var d="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+e+"&acd="+f+"&skill="+c;
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,d,a,b);}},leaveacd:function(d,e,a,b){var f="/tele/monitor/leaveacd";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d+"&acd="+e;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},forcebusy:function(d,a,b){var e="/tele/monitor/forcebusy";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},forceidle:function(d,a,b){var e="/tele/monitor/forceidle";var c="dom="+UMO._dom+"&token="+UMO._token+"&destaid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},datanew:function(f,d,h,g,a,b){var e="/storage/data/new";var c="dom="+UMO._dom+"&token="+UMO._token+"&data="+f+"&flds="+d+"&keyfld="+h+"&indices="+g;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},datadelete:function(e,a,b){var d="/storage/data/delete";var c="dom="+UMO._dom+"&token="+UMO._token+"&data="+e;
if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},dataoper:function(e,h,g,a,j,f,m,c,n,l,d,k){var b="/storage/data/oper";var i="dom="+UMO._dom+"&token="+UMO._token+"&data="+e+"&realm="+h+"&m="+g+"&f="+encodeURIComponent(a)+"&v="+encodeURIComponent(j)+"&w="+encodeURIComponent(f)+"&g="+m+"&o="+c+"&s="+n+"&i="+l;
if(UMO._tokenvalid(b,d)){UMO._ajaxcall(b,i,d,k);}},backupnew:function(d,a,b){var e="/storage/backup/new";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},backuprestore:function(d,e,a,b){var f="/storage/backup/restore";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+d+"&backfile="+e;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},backuplist:function(d,a,b){var e="/storage/backup/list";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},backupdelete:function(d,e,a,b){var f="/storage/backup/delete";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+d+"&backfile="+e;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},procnew:function(c,g,e,a,b){var f="/storage/proc/new";var d="dom="+UMO._dom+"&token="+UMO._token+"&proc="+c+"&parm="+encodeURIComponent(g)+"&code="+encodeURIComponent(e);
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,d,a,b);}},procdelete:function(c,a,b){var e="/storage/proc/delete";var d="dom="+UMO._dom+"&token="+UMO._token+"&proc="+c;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,d,a,b);}},procexec:function(b,d,f,a,c){var g="/storage/proc/exec";var e="dom="+UMO._dom+"&token="+UMO._token+"&realm="+b+"&proc="+d+"&parms="+encodeURIComponent(f);
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,e,a,c);}},fileimport:function(d,g,a,h,b,f,e,j){var c="/storage/file/import";var i="dom="+UMO._dom+"&token="+UMO._token+"&file="+d+"&data="+g+"&flds="+a+"&types="+h+"&option="+b+"&badfile="+f;
if(UMO._tokenvalid(c,e)){UMO._ajaxcall(c,i,e,j);}},fileexport:function(d,h,a,i,e,g,b,f,k){var c="/storage/file/export";var j="dom="+UMO._dom+"&token="+UMO._token+"&file="+d+"&data="+h+"&flds="+encodeURIComponent(a)+"&where="+encodeURIComponent(i)+"&order="+e+"&limit="+g+"&option="+b;
if(UMO._tokenvalid(c,f)){UMO._ajaxcall(c,j,f,k);}},fileupload:function(c,g,e,h,f,d,a,b){$("#"+c).pluploadQueue({runtimes:"html5,flash,silverlight,html4",url:UMO._apihost+"/storage/file/upload",height:"100%",max_file_count:20,chunk_size:"1mb",resize:{width:200,height:200,quality:90,crop:true},filters:{max_file_size:"1000mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png"},{title:"Zip files",extensions:"zip"},{title:"Xls files",extensions:"xls,xlsx"}]},multipart_params:{dom:UMO._dom,token:UMO._token,scope:g,object:e,path:h,exts:f,dest:d},rename:true,sortable:true,dragdrop:true,views:{list:true,thumbs:true,active:"thumbs"},flash_swf_url:"lib/plupload/Moxie.swf",silverlight_xap_url:"lib/plupload/Moxie.xap"},a);
},filedownload:function(f,d,h,e,a,b){var g="/storage/file/download";var c="dom="+UMO._dom+"&token="+UMO._token+"&scope="+f+"&object="+d+"&path="+h+"&file="+e;
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,c,a,b);}},confignew:function(i,e,c,b,g,d,h){var a="/storage/config/new";var f="dom="+UMO._dom+"&token="+UMO._token+"&scope="+i+"&object="+e+"&file="+c+"&node="+b+"&value="+encodeURIComponent(g);
if(UMO._tokenvalid(a,d)){UMO._ajaxcall(a,f,d,h);}},configadd:function(i,e,c,b,g,d,h){var a="/storage/config/add";var f="dom="+UMO._dom+"&token="+UMO._token+"&scope="+i+"&object="+e+"&file="+c+"&node="+b+"&value="+encodeURIComponent(g);
if(UMO._tokenvalid(a,d)){UMO._ajaxcall(a,f,d,h);}},configwrite:function(i,e,c,b,g,d,h){var a="/storage/config/write";var f="dom="+UMO._dom+"&token="+UMO._token+"&scope="+i+"&object="+e+"&file="+c+"&node="+b+"&value="+encodeURIComponent(g);
if(UMO._tokenvalid(a,d)){UMO._ajaxcall(a,f,d,h);}},configread:function(f,d,e,g,a,b){var h="/storage/config/read";var c="dom="+UMO._dom+"&token="+UMO._token+"&scope="+f+"&object="+d+"&file="+e+"&node="+g;
if(UMO._tokenvalid(h,a)){UMO._ajaxcall(h,c,a,b);}},configdelete:function(f,d,e,g,a,b){var h="/storage/config/delete";var c="dom="+UMO._dom+"&token="+UMO._token+"&scope="+f+"&object="+d+"&file="+e+"&node="+g;
if(UMO._tokenvalid(h,a)){UMO._ajaxcall(h,c,a,b);}},resourcelist:function(f,d,h,e,a,b){var g="/storage/resource/list";var c="dom="+UMO._dom+"&token="+UMO._token+"&scope="+f+"&object="+d+"&path="+h+"&exts="+e;
if(UMO._tokenvalid(g,a)){UMO._ajaxcall(g,c,a,b);}},appdownload:function(e,c,a,b){var f="/app/download";var d="dom="+UMO._dom+"&token="+UMO._token+"&appname="+e+"&version="+c;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,d,a,b);}},appinstall:function(e,d,a,b){var f="/app/install";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+e+"&options="+d;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},appconfirm:function(e,g,d,a,b){var f="/app/confirm";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+e+"&action="+g+"&options="+d;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},appstate:function(d,a,b){var e="/app/state";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},appuninstall:function(e,g,d,a,b){var f="/app/uninstall";var c="dom="+UMO._dom+"&token="+UMO._token+"&appname="+e+"&dataclean="+g+"&options="+d;
if(UMO._tokenvalid(f,a)){UMO._ajaxcall(f,c,a,b);}},appinstalled:function(d,a,b){var e="/app/appinstalled";var c="dom="+UMO._dom+"&token="+UMO._token+"&type="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},widgetinstalled:function(a,b){var d="/app/widgetinstalled";var c="dom="+UMO._dom+"&token="+UMO._token;
if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},entdeptlist:function(e,a,b){var d="/ent/deptlist";var c="dom="+UMO._dom+"&token="+UMO._token+"&parentid="+e;
if(UMO._tokenvalid(d,a)){UMO._ajaxcall(d,c,a,b);}},entdeptinfo:function(d,a,b){var e="/ent/deptinfo";var c="dom="+UMO._dom+"&token="+UMO._token+"&deptid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},entuserlist:function(d,a,b){var e="/ent/userlist";var c="dom="+UMO._dom+"&token="+UMO._token+"&deptid="+d;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,c,a,b);}},entuserinfo:function(c,a,b){var e="/ent/userinfo";var d="dom="+UMO._dom+"&token="+UMO._token+"&userid="+c;
if(UMO._tokenvalid(e,a)){UMO._ajaxcall(e,d,a,b);}},_initpush:function(){UMO._lastInitTime=new Date().getTime();UMO.joinListen(UMO._evtname);},joinListen:function(b){var a=b;
$.ajax({url:UMO._apihost+"/puller.srv",type:"POST",data:"dom="+UMO._dom+"&token="+UMO._token,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",error:function(d,c){if(UMO._running==true){UMO.onError(null);
if(UMO._evthandler.onReadyState!=null){UMO._evthandler.onReadyState(0);}}},success:function(c){if(c.errno==0){for(var e=0;e<c.evts.length;e++){var d=c.evts[e];
var f=new UMO.PullerEvent();for(var g in d){f.put(g,d[g]);}UMO.onData(f);}}if(UMO._running==true){if(c.errno!=100){setTimeout("UMO.joinListen('"+a+"')",50);
}else{if(UMO._evthandler.onReadyState!=null){UMO._evthandler.onReadyState(0);}}}}});},_pinging:function(){UMO.ping(function(b,a){if(a.errno==0){UMO._pingTimer=setTimeout("UMO._pinging()",60000);
}else{if(a.error==UMO.ERR_AJAXERR){UMO._pingTimer=setTimeout("UMO._pinging()",10000);}else{if(UMO._evthandler.onReadyState!=null){UMO._evthandler.onReadyState(0);
}}}});},_tokenvalid:function(c,b){if(UMO._token==""){if(b!=null){var a={errno:UMO.ERR_BADTOKEN,errmsg:UMO.MSG_NOTLOGIN};b(c,a);}return false;}return true;
},_ajaxcall:function(d,c,a,b){var h=c;if(b!=undefined){try{var g=b.location.href;h+="&refer="+encodeURIComponent(g);}catch(f){}}$.ajax({url:UMO._apihost+d,type:"POST",data:h,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",async:!UMO._syncmode,error:function(j,i){if(a!=null){var e={errno:UMO.ERR_AJAXERR,errmsg:UMO.MSG_AJAXERR};
a(d,e);}},success:function(e){if(a!=null){a(d,e);}}});},_addEvent:function(c,b,d,a){if(c.addEventListener){c.addEventListener(b,d,a);return true;}else{if(c.attachEvent){return c.attachEvent("on"+b,d);
}else{c["on"+b]=d;}}},PullerEvent:function(){this.arr=[];this.put=function(a,b){return this.arr[a]=b;};this.get=function(a){return this.arr[a];};},onError:function(b){var a=new Date();
var c=a.getTime()-UMO._lastInitTime;if(c>60000){UMO._retrydelay=1000;}setTimeout("UMO._initpush()",UMO._retrydelay);UMO._retrydelay=UMO._retrydelay*2;},onData:function(w){var v=w.get("evttype");
switch(v){case"readystate":if(UMO._evthandler.onReadyState!=null){var q=w.get("status");UMO._evthandler.onReadyState(q);}break;case"callincome":if(UMO._evthandler.onCallincome!=null){var u=w.get("ano");
var h=w.get("bno");var l=w.get("uud");UMO._evthandler.onCallincome(u,h,l,j);}break;case"talked":if(UMO._evthandler.onTalked!=null){var u=w.get("ano");var h=w.get("bno");
var l=w.get("uud");UMO._evthandler.onTalked(u,h,l);}break;case"ringstop":if(UMO._evthandler.onRingStoped!=null){UMO._evthandler.onRingStoped();}break;case"hookchanged":if(UMO._evthandler.onHookChanged!=null){var q=w.get("status");
UMO._evthandler.onHookChanged(q);}break;case"agentchanged":if(UMO._evthandler.onAgentChanged!=null){var q=w.get("status");UMO._evthandler.onAgentChanged(q);
}break;case"asyncfinished":if(UMO._evthandler.onAsyncFinished!=null){var c=w.get("atype");var b=w.get("taskid");var A=w.get("ret");var x=w.get("desc");
UMO._evthandler.onAsyncFinished(c,b,A,x);}break;case"allbusy":if(UMO._evthandler.onAllBusy!=null){var q=w.get("status");var g=w.get("acd");var y=w.get("quelen");
UMO._evthandler.onAllBusy(q,g,y);}break;case"quelen":if(UMO._evthandler.onQuelen!=null){var g=w.get("acd");var y=w.get("quelen");UMO._evthandler.onQuelen(g,y);
}break;case"smsincome":if(UMO._evthandler.onSmsincome!=null){var a=w.get("dtime");var s=w.get("from");var t=w.get("content");var e=w.get("slot");UMO._evthandler.onSmsincome(a,s,t,e);
}break;case"opercallback":if(UMO._evthandler.onOperCallback!=null){var d=w.get("flowid");var j=w.get("callid");var o=w.get("cdrid");var z=w.get("direction");
var n=w.get("teleno");var i=w.get("time");var f=w.get("state");UMO._evthandler.onOperCallback(d,j,o,z,n,i,f);}break;case"speedcallback":if(UMO._evthandler.onSpeedCallback!=null){var d=w.get("flowid");
var j=w.get("callid");var o=w.get("cdrid");var z=w.get("direction");var n=w.get("teleno");var i=w.get("time");var f=w.get("state");var x=w.get("desc");
var r=w.get("sessionid");UMO._evthandler.onSpeedCallback(d,j,o,z,n,i,f,x,r);}break;case"textmessage":if(UMO._evthandler.onTextMessage!=null){var k=w.get("fromaid");
var p=w.get("chatmode");var m=w.get("text");UMO._evthandler.onTextMessage(k,p,m);}break;}},ERR_AJAXERR:-1,ERR_BADTOKEN:-2,ERR_ALREADYSTART:-3,MSG_AJAXERR:"网络错误",MSG_NOTLOGIN:"无效令牌",MSG_ALREADYSTART:"已经启动请先停止",MSG_NONE:"无"};
