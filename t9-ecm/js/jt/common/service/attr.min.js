function Attr(b,a){this.eavAttr=b;this.formName="";if(a){this.isShowTag=true;}else{this.isShowTag=false;}}Attr._CONS_={SINGLE:{READONLY:"single_readonly",INPUT:"single_input",TEXTAREA:"single_textarea",TEXTEDITOR:"single_texteditor",ATTACH_FILE:"single_attach_file",ATTACH_IMG:"single_attach_img",COLOR:"single_color"},OPTION:{RADIO:"option_radio",CHECKBOX:"option_checkbox",SELECTBOX_SINGLE:"option_selectbox_single",SELECTBOX_MULTI:"option_selectbox_multi",},TREE:{SINGLE:"tree_single",MULTI:"multi"}};
Attr.prototype={getValue:function(){if(this.eavAttr&&this.eavAttr.entityId){switch(this.eavAttr.dataType){case"string":return this.eavAttr.varcharVal;case"integer":return this.eavAttr.intVal;
case"decimal":return this.eavAttr.decimalVal;case"text":return this.eavAttr.textVal;case"date":return this.eavAttr.datetimeVal;case"options":return this.eavAttr.opValues;
case"tree":throw new Error("目前不支持tree的数据类型");default:return"";}}else{return"";}},toString:function(a){var b=new StringBuffer();if(this.eavAttr.inputType.startWith("single")){b.append(this.getSingleValueHtml(a));
}else{if(this.eavAttr.inputType.startWith("option")){b.append(this.getOptionValueHtml(a));}else{if(this.eavAttr.inputType.startWith("tree")){b.append(this.getTreeValueHtml(a));
}}}if(a==null){b.append("</div>");}b.append("</div>");return b.toString();},getSingleValueHtml:function(a){var h=new StringBuffer();var f=this.getValue();
var e="eav__"+this.eavAttr.bizType+"__";switch(this.eavAttr.inputType){case Attr._CONS_.SINGLE.READONLY:if(a==null){h.append("<div class='col-sm-3'>");
}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>*</span>").append("</label>");
}else{h.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-8'>");e+="input__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;h.append("<input validateType='default' readonly='readonly' value='"+f+"' name='"+e+"' type='text' class='form-control'>");
break;case Attr._CONS_.SINGLE.INPUT:if(a==null){h.append("<div class='col-sm-3'>");}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{h.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-8'>");e+="input__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;h.append("<input validateType='default' value='"+f+"' name='"+e+"' type='text' class='form-control'>");
break;case Attr._CONS_.SINGLE.TEXTAREA:if(a==null){h.append("<div class='col-sm-12'>");}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-11'>");e+="textarea__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;h.append("<textarea rows='2' validateType='default' name='"+e+"' class='form-control'>"+f+"</textarea>");
break;case Attr._CONS_.SINGLE.TEXTEDITOR:if(a==null){h.append("<div class='col-sm-12'>");}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-11'>");e+="texteditor__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;h.append("<div id='"+e+"Container"+"' class='eavSummernote'>"+f+"</div>");break;case Attr._CONS_.SINGLE.ATTACH_FILE:if(a==null){h.append("<div class='col-sm-12'>");
}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-11'>");e+="attach_file__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;if(f){var c=f.split(Eav.ID_VALUE_SEPERATOR)[1];var b=f.split(Eav.ID_VALUE_SEPERATOR)[0];
var d=[{name:c,url:b}];h.append("<div id='"+e+"Container"+"'>").append(FileUtils.createFileDivStr(d)).append("</div>");}else{h.append("<div id='"+e+"Container"+"'>").append("</div>");
}h.append("<button type='button' containerId='"+e+"Container"+"' class='selectSystemFile btn btn-sm btn-outline btn-primary'>选中附件</button>");break;case Attr._CONS_.SINGLE.ATTACH_IMG:if(a==null){h.append("<div class='col-sm-12'>");
}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{h.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-11'>");e+="attach_img__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;if(f){var c=f.split(Eav.ID_VALUE_SEPERATOR)[1];var b=f.split(Eav.ID_VALUE_SEPERATOR)[0];
var g=[{id:"",name:c,url:b}];h.append("<div id='"+e+"Container"+"'>").append(ImageUtils.createImageDivStr(g)).append("</div>");}else{h.append("<div id='"+e+"Container"+"'>").append("</div>");
}h.append("<button type='button' containerId='"+e+"Container"+"' class='selectImageBtn btn btn-sm btn-outline btn-primary'>选择图片</button>");break;case Attr._CONS_.SINGLE.COLOR:if(a==null){h.append("<div class='col-sm-3'>");
}if(this.eavAttr.validateKey.indexOf("required")!=-1){h.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{h.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("</label>");}h.append("<div class='col-sm-8'>");e+="input__";
e+="color_single__";e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;h.append("<button type='button' containerId='"+e+"Container"+"' class='btn btn-sm btn-outline btn-primary'>选中颜色</button>");
break;}this.formName=e;return h.toString();},getOptionValueHtml:function(g){var f=new StringBuffer();var k=this.getValue();var e="eav__"+this.eavAttr.bizType+"__";
switch(this.eavAttr.inputType){case Attr._CONS_.OPTION.RADIO:if(g==null){f.append("<div class='col-sm-12'>");}if(this.eavAttr.validateKey.indexOf("required")!=-1){f.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{f.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("</label>");}f.append("<div class='col-sm-11'>");e+="radio__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;if(this.eavAttr.eavAttrOptPos&&this.eavAttr.eavAttrOptPos.length>0){for(var c=0;c<this.eavAttr.eavAttrOptPos.length;
c++){var d=this.eavAttr.eavAttrOptPos[c];var l=k==d.value?" checked='checked'":"";var o="_"+new Date().getTime()+""+Math.random()*9+1;f.append("<div class='radio radio-success radio-inline'>");
f.append("<input type='radio' idValue='"+d.id+"' id='"+o+"' "+l+" value='"+d.value+"' name='"+e+"'>");f.append("<label for='"+o+"'>"+d.label+"</label>");
f.append("</div>");}}break;case Attr._CONS_.OPTION.CHECKBOX:if(g==null){f.append("<div class='col-sm-12'>");}if(this.eavAttr.validateKey.indexOf("required")!=-1){f.append("<label class='col-sm-1 control-label' style='font-weight: bold;'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{f.append("<label class='col-sm-1 control-label' style='font-weight: bold;'>").append(this.eavAttr.name).append("</label>");}f.append("<div class='col-sm-10'>");
e+="checkbox__";e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;if(this.eavAttr.eavAttrOptPos&&this.eavAttr.eavAttrOptPos.length>0){var n=this.eavAttr.isMain;
var a=n==="y"?" isMainAttr='y'":" isMainAttr='n'";for(var c=0;c<this.eavAttr.eavAttrOptPos.length;c++){var d=this.eavAttr.eavAttrOptPos[c];var m=k.split(",");
var o="_"+new Date().getTime()+""+Math.random()*9+1;var h=false;for(var b=0;b<m.length;b++){if(m[b]==d.value){h=true;break;}}var l=h?"checked='checked'":"";
f.append("<div class='checkbox checkbox-success checkbox-inline'>");if(this.eavAttr.bizType=="tag"&&this.isShowTag){f.append("<input class='hasFollowUpRecord' "+l+a+" type='checkbox' idValue='"+d.id+"' name='"+e+"' id='"+o+"' value='"+d.value+"'>");
if(h){f.append("<label for='"+o+"'>"+d.label+"&nbsp;&nbsp;<a href='javascript:void(0);' class='viewFollowUpRecordBtn' optVal='"+d.label+"' attrVal='"+this.eavAttr.name+"' attrIdVal='"+this.eavAttr.id+"' optIdVal='"+d.id+"' optTypeVal='"+d.type+"' optOptionsVal='"+d.options+"'>档案记录</a></label>");
}else{f.append("<label for='"+o+"'>"+d.label+"&nbsp;&nbsp;<a href='javascript:void(0);' style='display: none;' class='viewFollowUpRecordBtn' optVal='"+d.label+"' attrVal='"+this.eavAttr.name+"' attrIdVal='"+this.eavAttr.id+"' optIdVal='"+d.id+"' optTypeVal='"+d.type+"' optOptionsVal='"+d.options+"'>档案记录</a></label>");
}}else{f.append("<input "+l+a+" type='checkbox' idValue='"+d.id+"' name='"+e+"' id='"+o+"' value='"+d.value+"'>");f.append("<label for='"+o+"'>"+d.label+"</label>");
}f.append("</div>");}}break;case Attr._CONS_.OPTION.SELECTBOX_SINGLE:if(g==null){f.append("<div class='col-sm-3'>");}if(this.eavAttr.validateKey.indexOf("required")!=-1){f.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{f.append("<label class='col-sm-4 control-label'>").append(this.eavAttr.name).append("</label>");}f.append("<div class='col-sm-8'>");e+="select__";
e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;if(this.eavAttr.eavAttrOptPos&&this.eavAttr.eavAttrOptPos.length>0){f.append("<select validateType='default' name='"+e+"' class='form-control m-b'>");
f.append("<option value=''>请选择</option>");for(var c=0;c<this.eavAttr.eavAttrOptPos.length;c++){var d=this.eavAttr.eavAttrOptPos[c];if(k==d.value){f.append("<option selected='selected' idValue='"+d.id+"' value='"+d.value+"'>"+d.label+"</option>");
}else{f.append("<option idValue='"+d.id+"' value='"+d.value+"'>"+d.label+"</option>");}}f.append("</select>");}else{$.log("no options");}break;case Attr._CONS_.OPTION.SELECTBOX_MULTI:if(g==null){f.append("<div class='col-sm-12'>");
}if(this.eavAttr.validateKey.indexOf("required")!=-1){f.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("<span style='color: red;'>*</span>").append("</label>");
}else{f.append("<label class='col-sm-1 control-label'>").append(this.eavAttr.name).append("</label>");}f.append("<div class='col-sm-11' style='padding-top:6px;'>");
e+="select__";e+=this.eavAttr.id+"__"+this.eavAttr.key+"__"+this.eavAttr.dataType;if(this.eavAttr.eavAttrOptPos&&this.eavAttr.eavAttrOptPos.length>0){f.append("<select validateType='default' name='"+e+"' data-placeholder='请选择' class='chosen-select form-control m-b mutipleSelectEavAttr' multiple='multiple'>");
f.append("<option value=''>请选择</option>");for(var c=0;c<this.eavAttr.eavAttrOptPos.length;c++){var d=this.eavAttr.eavAttrOptPos[c];var m=k.split(",");var h=false;
for(var b=0;b<m.length;b++){if(m[b]==d.value){h=true;break;}}if(h){f.append("<option selected = 'selected' idValue='"+d.id+"' value='"+d.value+"'>"+d.label+"</option>");
}else{f.append("<option idValue='"+d.id+"' value='"+d.value+"'>"+d.label+"</option>");}}f.append("</select>");}break;}this.formName=e;return f.toString();
},getTreeValueHtml:function(a){var b=new StringBuffer();return b.toString();}};