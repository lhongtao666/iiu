var SecureLogService={openEmployeeSecureLog:function(a){if(!ResUtils.canShow("employee.button.showSecureOperLog")){throw new Error("没有权限访问");}if(!a||!a.operatorId){throw new Error("请提供要查询的员工");
}layer.open({type:2,title:"员工日志查询",maxmin:false,shadeClose:true,skin:"cs-opt-layer",btn:["关闭","关闭"],area:["95%","95%"],content:ctx+"/gl/secure/secureOperLog/list.htm"+"?enterType=employee&Q__S__EQ__operator_id_="+a.operatorId,yes:function(c,b){layer.close(c);
},cancel:function(c,b){layer.close(c);}});},openModuleSecureLog:function(c){if(!c||!c.configKeys||!c.linkId){throw new Error("参数错误");}var a=c.openType?a:"dialog";
if("dialog"==a){layer.open({type:2,title:"操作记录",maxmin:false,shadeClose:true,area:["95%","95%"],content:ctx+"/gl/secure/secureOperLog/list.htm"+"?enterType=moduleDetail&configKeys="+c.configKeys+"&linkIds="+c.linkId,});
}else{var d=null;if(c.container){if($.type(c.container)=="string"){d=$(c.container);if(d.length==0){d=$("#"+c.container);if(d.length==0){d=$("."+c.container);
if(d.length==0){throw new Error(c.container+"下拉列表容器不能为空");}}}}else{d=c.container;}}else{throw Error("参数错误:必须传入container");}var b=this;var e=new StringBuffer();
e.append("<div id='secureOperLogDiv'>");e.append("<table class='table table-striped table-bordered' id='secureOperLogTable'>");e.append("<thead><tr>");
e.append("<th>操作名称</th>");e.append("<th>操作人</th>");e.append("<th>部门</th>");e.append("<th>时间</th>");e.append("<th>关联</th>");e.append("<th>关联名称</th>");e.append("<th>类型</th>");
e.append("</tr></thead>");e.append("</table>");e.append("</div>");d.empty().append(e.toString());$("#secureOperLogTable").DataTable({ajax:{url:ctx+"/gl/secure/secureOperLog/listTableData.htm?rows=100000&configKeys="+c.configKeys+"&linkIds="+c.linkId,},columns:[{data:"id",width:"15%",render:function(h,g,f){return f.configName;
}},{data:"operatorAid",width:"15%",render:function(h,g,f){return f.operatorAid+" : "+f.operatorName;}},{data:"groupName",width:"15%"},{data:"createTime",width:"15%"},{data:"linkShowUnique",width:"15%"},{data:"linkNames",width:"15%"},{data:"logType",render:function(i,h,g){var f=null;
if("opertate_type"==i){f="操作日志";}else{f="安全日志";}return f;},width:"15%"},],rowId:"id",lengthMenu:[[20]],paging:true,pagingType:"simple",lengthChange:false,autoWidth:true,ordering:false,searching:false,});
}},};