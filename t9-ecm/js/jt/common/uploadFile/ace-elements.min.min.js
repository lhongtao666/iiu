(function(d,f){var e="multiple" in document.createElement("INPUT");d.fn.ace_file_input=function(c){var b=d.extend({style:false,no_file:"No File ...",no_icon:"icon-upload-alt",btn_choose:"Choose",btn_change:"Change",icon_remove:"icon-remove",droppable:false,thumbnail:false,before_change:null,before_remove:null},c);
var a=!!window.FileList;this.each(function(){var z=this;var x=d(this);var B=!!b.icon_remove;var A=x.attr("multiple")&&e;var t=b.style=="well"?true:false;
x.wrap("<div class='ace-file-input"+(t?" ace-file-multiple":"")+"' />");x.after('<label data-title="'+b.btn_choose+'" for="'+d(this).attr("id")+'"><span data-title="'+b.no_file+'">'+(b.no_icon?'<i class="'+b.no_icon+'"></i>':"")+"</span></label>"+(B?'<a class="remove" href="#"><i class="'+b.icon_remove+'"></i></a>':""));
var w=x.next();if(d.browser.mozilla){w.on("click",function(){if(!z.disabled&&!x.attr("readonly")){x.click();}});}if(B){w.next("a").on("click",function(){var g=true;
if(b.before_remove){g=b.before_remove.call(z);}if(!g){return false;}return D();});}if(b.droppable&&a){var v=this.parentNode;d(v).on("dragenter",function(g){g.preventDefault();
g.stopPropagation();}).on("dragover",function(g){g.preventDefault();g.stopPropagation();}).on("drop",function(m){m.preventDefault();m.stopPropagation();
var g=m.originalEvent.dataTransfer;var h=g.files;if(!A&&h.length>1){var i=[];i.push(h[0]);h=i;}var l=true;if(b.before_change){l=b.before_change.call(z,h,true);
}if(!l||l.length==0){return false;}if(l instanceof Array||(a&&l instanceof FileList)){h=l;}x.data("ace_input_files",h);x.data("ace_input_method","drop");
var j=[];for(var k=0;k<h.length;k++){j.push(h[k].name);}C(j);x.triggerHandler("change",[true]);return true;});}x.on("change.inner_call",function(m,j){if(j===true){return;
}var k=true;if(b.before_change){k=b.before_change.call(z,this.files||this.value,false);}if(!k||k.length==0){if(!x.data("ace_input_files")){s();}return false;
}var g=(k instanceof Array||(a&&k instanceof FileList))?k:this.files;x.data("ace_input_method","select");var h=[];if(g){x.data("ace_input_files",g);for(var i=0;
i<g.length;i++){var l=d.trim(g[i].name);if(!l){continue;}h.push(l);}}else{var l=d.trim(this.value);if(l){h.push(l);}}if(h.length==0){return false;}C(h);
return true;});var C=function(g){var h=x.data("ace_input_files");if(t){w.find("span").remove();if(!b.btn_change){w.addClass("hide-placeholder");}}w.attr("data-title",b.btn_change).addClass("selected");
for(var i=0;i<g.length;i++){var k=g[i];var j=k.lastIndexOf("\\")+1;if(j==0){j=k.lastIndexOf("/")+1;}k=k.substr(j);var l="icon-file";if((/\.(jpe?g|png|gif|svg|bmp|tiff?)$/i).test(k)){l="icon-picture";
}else{if((/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i).test(k)){l="icon-film";}else{if((/\.(mp3|ogg|wav|wma|amr|aac)$/i).test(k)){l="icon-music";
}}}if(!t){w.find("span").attr({"data-title":k}).find('[class*="icon-"]').attr("class",l);}else{w.append('<span data-title="'+k+'"><i class="'+l+'"></i></span>');
var m=b.thumbnail&&h&&h[i].type.match("image")&&!!window.FileReader;if(m){u(h[i],x);}}}return true;};var u=function(g,i){var k=w.find("span:last");var h=50;
if(b.thumbnail=="large"){h=150;}else{if(b.thumbnail=="fit"){h=k.width();}}k.addClass(h>50?"large":"").prepend("<img align='absmiddle' style='display:none;' />");
var j=k.find("img:last").get(0);var l=new FileReader();l.onload=(function(m){return function(n){d(m).one("load",function(){var q=y(m,h,g.type);var o=q.w,p=q.h;
if(b.thumbnail=="small"){o=p=h;}d(m).css({"background-image":"url("+q.src+")",width:o,height:p}).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show();
});m.src=n.target.result;};})(j);l.readAsDataURL(g);l=null;};var D=function(){w.attr({"data-title":b.btn_choose,"class":""}).find("span:first").attr({"data-title":b.no_file,"class":""}).find('[class*="icon-"]').attr("class",b.no_icon).prev("img").remove();
if(!b.no_icon){w.find('[class*="icon-"]').remove();}w.find("span").not(":first").remove();if(x.data("ace_input_files")){x.removeData("ace_input_files");
x.removeData("ace_input_method");}s();return false;};var s=function(){x.wrap("<form>").closest("form").get(0).reset();x.unwrap();};var y=function(j,g,l){var i=document.createElement("canvas");
var k=j.width,m=j.height;if(k>g||m>g){if(k>m){m=parseInt(g/k*m);k=g;}else{k=parseInt(g/m*k);m=g;}}i.width=k;i.height=m;var h=i.getContext("2d");h.drawImage(j,0,0,j.width,j.height,0,0,k,m);
return{src:i.toDataURL(l=="image/jpeg"?l:"image/png",10),w:k,h:m};};});return this;};})(jQuery);(function(d,c){d.fn.ace_spinner=function(a){this.each(function(){var n=a.icon_up||"icon-chevron-up";
var k=a.icon_down||"icon-chevron-down";var o=a.btn_up_class||"";var m=a.btn_down_class||"";var p=a.max||999;p=(""+p).length;var b=d(this).addClass("spinner-input").css("width",(p*10)+"px").wrap('<div class="ace-spinner">').after('<div class="spinner-buttons btn-group btn-group-vertical">						<span class="btn spinner-up btn-mini '+o+'">						<i class="'+n+'"></i>						</span>						<span class="btn spinner-down btn-mini '+m+'">						<i class="'+k+'"></i>						</span>						</div>').closest(".ace-spinner").spinner(a);
d(this).on("mousewheel DOMMouseScroll",function(f){var e=f.originalEvent.detail<0||f.originalEvent.wheelDelta>0?1:-1;b.spinner("step",e>0);b.spinner("triggerChangedEvent");
return false;});var l=d(this);b.on("changed",function(){l.trigger("change");});});return this;};})(jQuery);(function(d,c){d.fn.ace_wizard=function(a){this.each(function(){var j=d(this);
var n=j.find("li");var m=n.length;var l=parseFloat((100/m).toFixed(1))+"%";n.css({"min-width":l,"max-width":l});j.removeClass("hidden").wizard();var k=j.nextAll(".wizard-actions").eq(0);
var b=j.data("wizard");b.$prevBtn=k.find(".btn-prev").eq(0).on("click",function(){j.wizard("previous");});b.$nextBtn=k.find(".btn-next").eq(0).on("click",function(){j.wizard("next");
});b.nextText=b.$nextBtn.text();});return this;};})(jQuery);(function(d,c){d.fn.ace_colorpicker=function(b){var a=d.extend({pull_right:false},b);this.each(function(){var h=d(this);
var j="";var i="";d(this).hide().find("option").each(function(){var e="colorpick-btn";if(this.selected){e+=" selected";i=this.value;}j+='<li><a class="'+e+'" href="#" style="background-color:'+this.value+';" data-color="'+this.value+'"></a></li>';
}).end().on("change.inner_call",function(){d(this).next().find(".btn-colorpicker").css("background-color",this.value);}).after('<div class="dropdown dropdown-colorpicker"><a data-toggle="dropdown" class="dropdown-toggle" href="#"><span class="btn-colorpicker" style="background-color:'+i+'"></span></a><ul class="dropdown-menu dropdown-caret'+(a.pull_right?" pull-right":"")+'">'+j+"</ul></div>").next().find(".dropdown-menu").on("click",function(e){var g=d(e.target);
if(!g.is(".colorpick-btn")){return false;}g.closest("ul").find(".selected").removeClass("selected");g.addClass("selected");var f=g.data("color");h.val(f).change();
e.preventDefault();return true;});});return this;};})(jQuery);