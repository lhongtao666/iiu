function Report(){this.hadInit=false;this.isEdit=false;this.data=null;this.charObject=null;this.grid=null;this.barSeries={type:"bar",barCategoryGap:"20%"};
this.lineSeries={type:"line",smooth:false,symbol:null,barCategoryGap:"20%",barWidth:40};this.pieSeries={type:"pie",center:["70%","55%"],radius:[0,"50%"],clockWise:true};
this.toolbox={show:true,orient:"horizontal",x:"right",y:"top",showTitle:true,feature:{dataZoom:{show:false,title:{dataZoom:"区域缩放",dataZoomReset:"区域缩放-后退"}},magicType:{show:true,title:{line:"动态类型切换-折线图",bar:"动态类型切换-柱形图"},type:["line","bar"]},restore:{show:false,title:"还原",color:"black"},saveAsImage:{show:true,title:"保存为图片",type:"jpeg",lang:["点击本地保存"]}}};
this.legend={show:false,orient:"horizontal",x:"center",y:"top",data:[]};this.tooltip={show:true,position:function(a){return[a[0]+10,a[1]-10];},formatter:"{b}<br>{a} : {c}<br>"};
this.dataZoom={show:false};this.dataZoomShow=true;this.xAxis=null;this.yAxis=null;this.series=null;this.cates=null;this.seriesStyle={normal:{label:{show:false,position:"right",textStyle:{color:"#800080"}}}};
this.textStyle=null;}Report.prototype={setToolboxShow:function(a,b){if(a==false){this.toolbox.show=false;this.dataZoomShow=false;}else{this.toolbox.show=true;
if(b){if(b.dataZoomShow==false){this.toolbox.feature.dataZoom.show=false;this.dataZoomShow=false;}if(b.magicTypeShow==false){this.toolbox.feature.magicType.show=false;
}if(b.restoreShow==false){this.toolbox.feature.restore.show=false;}if(b.saveAsImageShow==false){this.toolbox.feature.saveAsImage.show=false;}}}},setLegend:function(isShow,dataNameArr,colName,position){if(isShow==false){this.legend.show=false;
}else{if(dataNameArr!=null&&dataNameArr!=undefined){this.legend.show=true;this.legend.data=dataNameArr;}else{if(colName!=null&&colName!=undefined){this.legend.show=true;
this.legend.data=[];for(var i=0;i<this.data.length;i++){this.legend.data[i]=eval("this.data[i]."+colName);}}else{this.legend.show=false;}}}if(position=="left"){this.legend.x="left";
this.legend.y="center";this.legend.orient="vertical";}else{if(position=="right"){this.legend.x="right";this.legend.y="center";this.legend.orient="vertical";
}}},setBarSeriesStyle:function(b,a,c){this.seriesStyle.normal.label.show=b;if(b==true){if(a){this.seriesStyle.normal.label.position=a;}if(c){this.seriesStyle.normal.label.formatter=c;
}}},setGridX:function(a){this.grid={x:a};},setGridXY:function(b,a){this.grid={x:b,y:a};},setAxis:function(dataColName,dataArr,type){if(!dataColName&&this.data==null&&!dataArr){return;
}var axisData=[];if(dataColName){for(var i=0;i<this.data.length;i++){if(this.cates!=null){var key=eval("this.data[i]."+dataColName);axisData[i]=this.getDataByCate(key);
}else{axisData[i]=eval("this.data[i]."+dataColName);}}}else{axisData=dataArr;}var axis1=[{type:"value",axisLabel:{show:true}}];var axis2=[{type:"category",axisLabel:{show:true},data:axisData}];
this.xAxis=axis2;this.yAxis=axis1;if(type=="transverse"){this.xAxis=axis1;this.yAxis=axis2;}},setXAxisInfo:function(a,b){this.xAxis[0].name=a;if(b){this.xAxis[0].axisLine=b;
}},setYAxisInfo:function(a,b){this.yAxis[0].name=a;if(b){this.yAxis[0].axisLine=b;}},getDataByCate:function(b){for(var a=0;a<this.cates.length;a++){if(b==this.cates[a].value){return this.cates[a].name;
}}},initSeries:function(seriesSet,axisColName,axisColArr,axisType){var self=this;if(seriesSet==null||seriesSet==undefined){return;}self.series=[];for(var i=0;
i<seriesSet.length;i++){var seriesData=[];if(seriesSet[i].colName){for(var j=0;j<this.data.length;j++){seriesData[j]={value:eval("this.data[j]."+seriesSet[i].colName)};
if(axisColName){if(this.cates!=null){var key=eval("this.data[j]."+axisColName);seriesData[j].name=this.getDataByCate(key);}else{seriesData[j].name=eval("this.data[j]."+axisColName);
}}}}else{for(var j=0;j<seriesSet[i].colNameArr.length;j++){seriesData[j]={value:eval("this.data[i]."+seriesSet[i].colNameArr[j])};if(axisColName){if(this.cates!=null){var key=eval("this.data[j]."+axisColName);
seriesData[j].name=this.getDataByCate(key);}else{seriesData[j].name=eval("this.data[j]."+axisColName);}}}}var blockInt=0;if(seriesSet[i].type=="line"){self.series[i-blockInt]=clone(self.lineSeries);
self.series[i-blockInt].itemStyle=self.seriesStyle;self.series[i-blockInt].name=seriesSet[i].legendName;self.series[i-blockInt].data=seriesData;}else{if(seriesSet[i].type=="bar"){self.series[i-blockInt]=clone(self.barSeries);
self.series[i-blockInt].itemStyle=self.seriesStyle;self.series[i-blockInt].name=seriesSet[i].legendName;self.series[i-blockInt].data=seriesData;}else{if(seriesSet[i].type=="pie"&&i==0){self.series[i-blockInt]=clone(self.pieSeries);
self.series[i-blockInt].name=seriesSet[i].legendName;self.series[i-blockInt].data=seriesData;break;}else{blockInt++;}}}}if(seriesSet[0].type!="pie"){self.setAxis(axisColName,axisColArr,axisType);
}else{self.toolbox.feature.magicType.show=false;}},_initChart:function(o,b,j){var p=this;if(p.xAxis==null&&p.yAxis==null&&this.series==null){return;}var i="left";
var d="top";if(p.series[0].type!="pie"){if(p.xAxis[0].data!=undefined&&p.xAxis[0].data!=null){var m=document.body.clientWidth-80;var n=m/p.xAxis[0].data.length;
var l=40;if(p.legend!=undefined&&p.legend!=null){if(p.legend.show==true){l=p.legend.data.length*40+(p.legend.data.length-1)*40*3/10+48;}}if(n<l&&p.dataZoomShow==true){p.dataZoom.show=true;
p.dataZoom.start=0;var g=Math.floor(m/l);p.dataZoom.end=Math.floor((g)/p.xAxis[0].data.length*100);}if(p.legend.data.length>1&&p.legend.show==true){if(p.dataZoom.show==true){for(var f=0;
f<p.series.length;f++){p.series[f].barCategoryGap="30%";}}else{var c=100-(p.legend.data.length*40+(p.legend.data.length-1)*40*3/10)*100/n;if(c<1){c=1;}var a=""+(c-1);
if(a.indexOf(".")>-1){a=a.substr(0,a.indexOf("."))+"%";}else{a=a+"%";}for(var f=0;f<p.series.length;f++){p.series[f].barCategoryGap=a;}}}}else{if(p.yAxis[0].data!=undefined&&p.yAxis[0].data!=null){for(var f=0;
f<p.series.length;f++){p.series[f].barWidth=20;}}}}else{if(p.legend!=undefined&&p.legend!=null){p.legend.x="left";p.legend.y="top";p.legend.orient="vertical";
}i="center";d="bottom";p.dataZoom=null;}p.charObject=echarts.init(document.getElementById(o),echartTheme);var e=["#2ec7c9","#b6a2de","#5ab1ef","#ED5565","#d87a80","#8d98b3","#408829","#1C84C6","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"];
if(j){e=j;}var h={color:e,backgroundColor:"transparent",title:{text:b,x:i,y:d,padding:10,textStyle:p.textStyle},toolbox:p.toolbox,legend:p.legend,tooltip:p.tooltip,dataZoom:p.dataZoom,xAxis:p.xAxis,yAxis:p.yAxis,series:p.series};
if(p.grid!=null){h.grid=p.grid;}p.charObject.setOption(h);},changeChart:function(){var a=this;var b=null;a.charObject.setSeries(b);},_bindEventHander:function(){var a=this;
$(document).on("check","#searchBtn",function(){a.changeChart();});}};function clone(d){var e;switch(typeof d){case"undefined":break;case"string":e=d+"";
break;case"number":e=d-0;break;case"boolean":e=d;break;case"object":if(d===null){e=null;}else{if(d instanceof Array){e=[];for(var c=0,a=d.length;c<a;c++){e.push(clone(d[c]));
}}else{e={};for(var b in d){e[b]=clone(d[b]);}}}break;default:e=d;break;}return e;}