function CsEntityBatchCall(){this.hadInit=false;this.params=null;this.saveFlag=false;}CsEntityBatchCall._CONS_={CSENTITY_BATCH_CALL:ctx+"/gl/cti/ctiBatcallItem/csEntityBatchCall.htm",FORM:"#csBatchCallForm",};
CsEntityBatchCall.prototype={init:function(b){var a=this;if(!this.hadInit){this.hadInit=true;this._csEntityBatchCall(b.count,b.csIds);}},_csEntityBatchCall:function(b,c){var a=this;
layer.open({type:1,title:'您正在对<font style="color:red;">【'+b+"个】</font>客户进行批量外呼操作。",maxmin:false,shadeClose:false,btn:["保存","取消"],area:["30%","50%"],content:$(".csEntityBatchCallPanel"),success:function(d,e){},yes:function(e,d){a._batchCall(c,b);
if(saveFlag){layer.close(e);FormUtils.clear(CsEntityBatchCall._CONS_.FORM);}},cancel:function(e,d){FormUtils.clear(CsEntityBatchCall._CONS_.FORM);}});},_batchCall:function(e,d){var a={};
var c=$("select[name=subaction]").val();var b=$("input[name=subdata]").val();if(!b){$("input[name=subdata]").addClass("validate_input_error");if(c=="1"){DialogUtils.error("提示","操作数据需要填入文件名");
saveFlag=false;return;}else{if(c=="2"){DialogUtils.error("提示","操作数据需要填入队列号");saveFlag=false;return;}else{DialogUtils.error("提示","操作数据需要填入分机号");saveFlag=false;
return;}}saveFlag=false;return;}a.csIds=e;a.subaction=c;a.subdata=b;saveFlag=true;FormUtils.submit(CsEntityBatchCall._CONS_.CSENTITY_BATCH_CALL,a,function(f){if(f.success){DialogUtils.success(msgCode.INFO,"批量外呼成功");
}else{DialogUtils.error(msgCode.ERROR,"批量外呼失败");}},function(){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});},};