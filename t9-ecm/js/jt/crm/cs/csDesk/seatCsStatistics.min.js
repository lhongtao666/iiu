$(function(){function a(){this.$container=$('div[srcVal="/crm/cs/csDesk/seatCsStatistics.htm"]');}a._CONS_={LIST_DATA_URL:ctx+"/crm/cs/csEntity/seatCsStatistics.htm",};
a.prototype={init:function(){var d=this;d._bindEventHander();var c=new Date();var e="Q__D__BW__create_time_="+c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" 00:00:00,"+c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" 23:59:59";
e+="&startTime="+c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" 00:00:00&endTime="+c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" 23:59:59";
d._loadData(e);},_bindEventHander:function(){var c=this;c.$container.on("click",".yesterday",function(){c.$container.find(".today").attr("disabled",false);
c.$container.find(".yesterday").attr("disabled",true);c.$container.find(".beforeYesterday").attr("disabled",false);c.$container.find(".thisMonth").attr("disabled",false);
c.$container.find(".prevMonth").attr("disabled",false);var d="Q__D__BW__create_time_="+DateUtils.getBeforeDate(1)+" 00:00:00,"+DateUtils.getBeforeDate(1)+" 23:59:59";
d+="&startTime="+DateUtils.getBeforeDate(1)+" 00:00:00&endTime="+DateUtils.getBeforeDate(1)+" 23:59:59";c._loadData(d);});c.$container.on("click",".beforeYesterday",function(){c.$container.find(".today").attr("disabled",false);
c.$container.find(".yesterday").attr("disabled",false);c.$container.find(".beforeYesterday").attr("disabled",true);c.$container.find(".thisMonth").attr("disabled",false);
c.$container.find(".prevMonth").attr("disabled",false);var d="Q__D__BW__create_time_="+DateUtils.getBeforeDate(2)+" 00:00:00,"+DateUtils.getBeforeDate(2)+" 23:59:59";
d+="&startTime="+DateUtils.getBeforeDate(2)+" 00:00:00&endTime="+DateUtils.getBeforeDate(2)+" 23:59:59";c._loadData(d);});c.$container.on("click",".prevMonth",function(){c.$container.find(".today").attr("disabled",false);
c.$container.find(".yesterday").attr("disabled",false);c.$container.find(".beforeYesterday").attr("disabled",false);c.$container.find(".thisMonth").attr("disabled",false);
c.$container.find(".prevMonth").attr("disabled",true);var e=new Date();var f=DateUtils.format(DateUtils.getCurrentMonthFirst(DateUtils.getBeforeMonth(1)),DateUtils._CONS_.DEFAULT_DATE_PATTERN);
var d=DateUtils.format(DateUtils.getCurrentMonthLast(DateUtils.getBeforeMonth(1)),DateUtils._CONS_.DEFAULT_DATE_PATTERN);var g="Q__D__BW__create_time_="+f+" 00:00:00,"+d+" 23:59:59";
g+="&startTime="+f+" 00:00:00&endTime="+d+" 23:59:59";c._loadData(g);});c.$container.on("click",".today",function(){c.$container.find(".today").attr("disabled",true);
c.$container.find(".yesterday").attr("disabled",false);c.$container.find(".beforeYesterday").attr("disabled",false);c.$container.find(".thisMonth").attr("disabled",false);
c.$container.find(".prevMonth").attr("disabled",false);var d=new Date();var e="Q__D__BW__create_time_="+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" 00:00:00,"+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" 23:59:59";
e+="&startTime="+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" 00:00:00&endTime="+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" 23:59:59";
c._loadData(e);});c.$container.on("click",".thisMonth",function(){c.$container.find(".today").attr("disabled",false);c.$container.find(".yesterday").attr("disabled",false);
c.$container.find(".beforeYesterday").attr("disabled",false);c.$container.find(".thisMonth").attr("disabled",true);c.$container.find(".prevMonth").attr("disabled",false);
var d=new Date();var e="Q__D__BW__create_time_="+DateUtils.format(DateUtils.getCurrentMonthFirst(),"yyyy-MM-dd")+" 00:00:00,"+DateUtils.format(DateUtils.getCurrentMonthLast(),"yyyy-MM-dd")+" 23:59:59";
e+="&startTime="+DateUtils.format(DateUtils.getCurrentMonthFirst(),"yyyy-MM-dd")+" 00:00:00&endTime="+DateUtils.format(DateUtils.getCurrentMonthLast(),"yyyy-MM-dd")+" 23:59:59";
c._loadData(e);});},_loadData:function(d){var c=this;c.$container.find("#morris-line-example").empty();d+="&belongEmployee="+currentUserId;var c=this;FormUtils.loadData(a._CONS_.LIST_DATA_URL+"?"+d,function(g){if(g!=null&&g!=""){var h=[];
for(var f=0;f<g.length;f++){var e={time:g[f].createTime.substring(0,10),intention:g[f].intentionCount,meeting:g[f].meetingCount,turnover:g[f].turnoverCount};
h.push(e);}Morris.Bar({element:"morris-line-example",data:h,xkey:"time",ykeys:["intention","meeting","turnover"],labels:["意向客户","面谈客户","成交客户"],resize:true,lineWidth:2,pointSize:3,smooth:false,barColors:["#1ab394","#337ab7","#273a4a"]});
}});},};var b=new a();b.init();});