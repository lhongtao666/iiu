$(function(){function d(){this.hadInit=false;this.isEdit=false;this.isFormDataChange=false;}function c(){}function b(){}d._CONS_={LIST_DATA_URL:ctx+"/crm/cs/csComplain/getCsComplainList.htm",SHOW_MORE:ctx+"/crm/cs/csComplain/showMoreTarget.htm",};
c._CONS_={DETAIL_PAGE_URL:ctx+"/ec/salesorder/soEntity/detail.htm",};b._CONS_={DETAIL_PAGE_URL:ctx+"/crm/ou/employee/employeeDetail.htm",};d.prototype={init:function(e){if(!this.hadInit){this._initTable(e);
this._bindEventHander();}},_bindEventHander:function(){var e=this;$("body").on("click",".soNoTab",function(){var g=$(this).attr("value");var f=$(this).attr("value");
if(f.length>4){g="*"+f.substring(f.length-3,f.length);}JTTabUtils.addOrRefreshTab(c._CONS_.DETAIL_PAGE_URL+"?soNo="+f,"订单["+g+"]明细");});$("body").on("click",".employeeTab",function(){var f=$(this).attr("value");
JTTabUtils.addOrRefreshTab(b._CONS_.DETAIL_PAGE_URL+"?id="+f,"员工管理");});},_initTable:function(g){var e=this;var f=d._CONS_.LIST_DATA_URL;FormUtils.loadData(f,function(l){var k=l.rows;
if(k&&k.length){var m=new StringBuffer();for(var j=0;j<k.length;j++){m.append("<tr>");var n=k[j].csName;var h=k[j].employeeName;var q=k[j].employeeAid;
var o="";if(h==""){o="对订单[<a class='soNoTab' value='"+k[j].soNo+"'>"+k[j].soNo+"]</a>进行了投诉</td>";}else{o="对员工[<a class='employeeTab' value='"+k[j].employeeId+"'>"+q+"："+h+"]</a>进行了投诉</td>";
}m.append("<td>"+"客户<span style='color:red'>"+n+"</span>"+o);var p=k[j].createTime;m.append("<td>"+p+"</td>");m.append("</tr>");}$("#csComplainAboutEmployeeContainer").empty().append(m.toString());
}else{$("#csComplainAboutEmployeeTable").parent().append("<div style='color: red;text-align: center;font-weight: bold;'>没有符合数据！</div>");}IframeUtils.resizeHeight($(parent.document).find('iframe[srcVal="/crm/cs/csComplain/aboutEmployee.htm"]'),$(".panel.panel-default").height());
});}};var a=new d();a.init();});