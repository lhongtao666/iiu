$(function(){var a=new SynYouzanCs();a.init();});function SynYouzanCs(){this.hadInit=false;}SynYouzanCs._CONS_={LIST_DATA_URL:ctx+"/crm/cs/synYouzanCs/listData.htm",SYN_YOUZAN_ORDERS_URL:ctx+"/ec/salesorder/synOrders/synYouzanOrders.htm",EDIT_FORM_ID:"SynYouzanCsForm",GRID:"#SynYouzanCsGrid",PAGER:"#SynYouzanCsPager"};
SynYouzanCs.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;$(".beginTime").val(new Date().currentDate()+" 00:00:00");$(".endTime").val(new Date().currentDate()+" 23:59:59");
this._bindEventHander();}},_confirm:function(){var a=this;if($("#createdAtStart").val()==""){DialogUtils.error("提示","开始时间不能为空");return false;}if($("#createdAtEnd").val()==""){$("#createdAtEnd").val(a._getNowTime());
}var b=$("#synYouzanCs").serialize();DialogUtils.confirmWithOptions({title:"确定要同步选择条件的客户数据吗？",text:"",confirmButtonText:"确定",yesFunc:function(){ButtonUtils.disableBtn("confirmBtn");
FormUtils.loadData(SynYouzanCs._CONS_.LIST_DATA_URL+"?"+b,function(c){ButtonUtils.enableBtn("confirmBtn");$("#sendMessage").html(c.msg);},function(){ButtonUtils.enableBtn("confirmBtn");
DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});}});},_confirmSynYouzanOrders:function(){var a=this;if($("#beginTime").val()==""){DialogUtils.error("提示","开始时间不能为空");
return false;}if($("#beginTime").val()==""){DialogUtils.error("提示","结束时间不能为空");return false;}var b=$("#synYouzanOrders").serialize();DialogUtils.confirmWithOptions({title:"确定要同步有赞订单到T9系统吗？",text:"",confirmButtonText:"确定",yesFunc:function(){ButtonUtils.disableBtn("confirmOrdersBtn");
FormUtils.loadData(SynYouzanCs._CONS_.SYN_YOUZAN_ORDERS_URL+"?"+b,function(c){ButtonUtils.enableBtn("confirmOrdersBtn");$("#sendMessage").empty().append(c.msg);
});}});},_getNowTime:function(){var d=new Date();var e=d.getFullYear();var g=(d.getMonth()+1).toString();var b=(d.getDate()).toString();var a=(d.getHours()).toString();
var h=(d.getMinutes()).toString();var c=(d.getSeconds()).toString();if(g.length==1){g="0"+g;}if(b.length==1){b="0"+b;}if(a.length==1){a="0"+a;}if(h.length==1){h="0"+h;
}if(c.length==1){c="0"+c;}var f=e+"-"+g+"-"+b+" "+a+":"+h+":"+c;return f;},_bindEventHander:function(){var a=this;$("body").on("click",".confirmBtn",function(){a._confirm();
});$("body").on("click",".confirmOrdersBtn",function(){a._confirmSynYouzanOrders();});},};