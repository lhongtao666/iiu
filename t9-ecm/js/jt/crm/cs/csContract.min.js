function CsContract(){this.hadInit=false;}CsContract._CONS_={EDIT_URL:ctx+"/crm/contract/contractEntity/edit.htm",DETAIL_URL:ctx+"/crm/contract/contractEntity/detail.htm",DELETE_URL:ctx+"/crm/contract/contractEntity/delete.htm",SAVE_ADD_URL:ctx+"/crm/contract/contractEntity/saveAdd.htm",SAVE_EDIT_URL:ctx+"/crm/contract/contractEntity/saveEdit.htm",LIST_DATA_URL:ctx+"/crm/contract/contractEntity/listData.htm",GRID_ID:"csContractGrid",PAGER_ID:"csContractPager",GRID:"#csContractGrid",PAGER:"#csContractPager"};
CsContract.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;}this._initJqgrid(a);},clear:function(c){var a=this;function b(){a._showListWrapper();
a.isFormDataChange=false;a.isEdit=false;$(".form_wrapper .saveBtn").show();$("#fileContainer").empty();$("#skuContainer").empty();$("#employeeContainer").empty();
$("input[name='cno']").val("").attr("placeholder","系统生成");$(".nav.nav-tabs").find("li").removeClass("active");$(".tab-content").find(".tab-pane").removeClass("active");
$(".nav.nav-tabs").find("li:eq(0)").addClass("active");$("#tab-0").addClass("active");SummernoteUtils.setCode("","summernote");a.commonEav.setEntityId("");
a.commonEav.clear();$("#selectSkuBtn").removeAttr("disabled");$("#selectFileBtn").removeAttr("disabled");$("#selectEmployeeBtn").removeAttr("disabled");
$("#selectCustomerBtn").removeAttr("disabled");FormUtils.clear(CsContract._CONS_.EDIT_FORM_ID);FormUtils.enableForm(CsContract._CONS_.EDIT_FORM_ID);if(c){a.reloadJqgrid();
}}if(a.isEdit&&a.isFormDataChange){DialogUtils.warning(function(){b();});}else{b();}},_add:function(){},_edit:function(a){},_detail:function(a){},_delete:function(b){var a=this;
DialogUtils.confirm(function(){FormUtils.del(CsContract._CONS_.DELETE_URL,b,function(c){if(c.success){DialogUtils.success(msgCode.INFO,msgCode.DELETE_MSG);
a.reloadJqgrid();}else{DialogUtils.error(msgCode.ERROR,c.msg);}});});},_bindEventHander:function(){var a=this;},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(CsContract._CONS_.GRID,a);
},_getManagerBtns:function(){var a=[];if(ResUtils.canShow("contractEntity.button.add")){a.push({lable:msgCode.DELETE_BTN_TEXT,btnClasses:"btn btn-danger contractEntityAdd",iconClasses:"fa fa-add"});
}if(ResUtils.canShow("contractEntity.button.edit")){a.push({lable:msgCode.EDIT_BTN_TEXT,btnClasses:"btn btn-primary contractEntityEdit",iconClasses:"fa fa-edit"});
}if(ResUtils.canShow("contractEntity.button.detail")){a.push({lable:msgCode.DETAIL_BTN_TEXT,btnClasses:"btn btn-primary contractEntityDetail",iconClasses:"fa fa-list"});
}return a;},_initJqgrid:function(b){var a=this;if(b==null||typeof b==undefined){b={};}$("#csContractGridDiv").empty().append('<table id="'+CsContract._CONS_.GRID_ID+'"></table>                <div id="'+CsContract._CONS_.PAGER_ID+'"></div>');
$.jgrid.defaults.styleUI="Bootstrap";$(CsContract._CONS_.GRID).jqGrid({datatype:"json",url:CsContract._CONS_.LIST_DATA_URL+"?Q__S__EQ__cs_id_="+b.csId,height:200,width:$("."+b.widthWId).width(),shrinkToFit:true,rowNum:10,mtype:"POST",viewrecords:false,multiselect:false,rownumbers:true,pager:CsContract._CONS_.PAGER,colNames:["编号","金额","类型","付款方式","签约日期","状态",],colModel:[{name:"cno",index:"cno_",width:100},{name:"total",index:"total_",width:100},{name:"typeName",index:"type_",width:100,sortable:false},{name:"payTypeName",index:"pay_type_",width:100,classes:"autoHideCol"},{name:"signTime",index:"sign_time_",width:120,formatter:function(c){return c.substring(0,10);
}},{name:"statusName",index:"status_",width:100,formatter:function(c){return"<label class='label label-primary'>"+c+"</label>";}}],gridComplete:function(){var c=$(CsContract._CONS_.GRID).jqGrid("getGridParam","records");
if(c<=0){if($(CsContract._CONS_.GRID).parent().find(".norecords").html()==null){$(CsContract._CONS_.GRID).parent().append('<div class="norecords">没有符合数据！</div>');
$(CsContract._CONS_.GRID).parent().find(".norecords").show();}else{$(CsContract._CONS_.GRID).parent().find(".norecords").show();}}else{$(CsContract._CONS_.GRID).parent().find(".norecords").hide();
}},});$(window).bind("resize",function(){var c;if(b.widthWId){c=$("."+b.widthWId).width();}else{c=$(".jqGrid_wrapper").width();}$(CsContract._CONS_.GRID).setGridWidth(c);
});},};