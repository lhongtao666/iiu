function CsCallRecord(){this.hadInit=false;}CsCallRecord.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;}this._initTable(a);},_generateCode:function(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1);
};return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a());},_initTable:function(d){var a=this;var e=new StringBuffer();e.append("<table id='csCallRecordContainer' class='table table-bordered table-stripped'>");
e.append("<thead><tr>");e.append("<th></th>");e.append("<th>方向</th>");e.append("<th>类型</th>");e.append("<th>分机</th>");e.append("<th>工号</th>");e.append("<th>客户号码</th>");
e.append("<th>开始时间</th>");e.append("<th>通话时长</th>");e.append("<th>呼叫时长</th>");e.append("<th>来源</th>");if(showPJ!="hidden"){e.append("<th>评价</th>");}e.append("<th>录音</th>");
e.append("</tr></thead>");e.append("</table>");$("#callRecordDiv").empty().append(e.toString());var b=ctx+"/gl/cti/tRKSheetRecord/findByCsId.htm?csId="+d.csId;
var c=[{data:"lineNum"},{data:"direction",render:function(g,f,h){if(g==0){return"<label class='label label-success'>呼出</label>";}else{if(g==1){return"<label class='label label-primary'>呼入</label>";
}}}},{data:"isrouteagent",render:function(h,f,g){if(!g.recfile){return"<label class='label label-danger'>未接</label>";}else{return"<label class='label label-primary'>已接</label>";
}}},{data:"adn"},{data:"agentid",render:function(h,g,f){if(h!=-1){return f.employeeAid+":"+f.employeeName;}else{return"-1";}}},{data:"csPhone"},{data:"begtime"},{data:"duration",render:function(g,f,h){if(h.recfile){return DateUtils.toChineseTime(g);
}else{return"";}}},{data:"ringduration",render:function(h,f,g){if(!g.recfile){return DateUtils.toChineseTime(g.duration);}else{return"";}}},{data:"source",}];
if(showPJ!="hidden"){c.push({data:"uud",render:function(g,f,h){if(!g){return"无";}if(g.indexOf("PJ:1")!=-1){return"满意";}else{if(g.indexOf("PJ:2")!=-1){return"一般";
}else{if(g.indexOf("PJ:3")!=-1){return"不满意";}}}return"无";}});}c.push({data:"recfile",render:function(i,h,j){if(i){var k=new StringBuffer();var f=a._generateCode();
var g=j?j.recordid:"";if(d.csType){if("self"==d.csType||(d.permissionType&&"self"==d.permissionType)){if(ResUtils.canShow("csEntity.button.listenCall")){k.append("<button  id-value ='"+g+"' uniqueCode='"+f+"' title='试听' recfileVal='"+i+"' class='listenBtn btn btn-xs btn-primary'><i class='fa fa-caret-square-o-left'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordTranslate")){k.append("<button title='翻译' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordTrans2WordBtn btn btn-xs btn-primary'><i class='fa fa-language'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.downloadCall")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='下载' recfileVal='"+i+"' class='downloadBtn btn btn-xs btn-primary'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordMarkCall")){k.append("<button title='标识' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordMarkBtn btn btn-xs btn-primary'><i class='fa fa-bookmark'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordRecomm")){k.append("<button title='推荐' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordShareBtn btn btn-xs btn-primary'><i class='fa fa-thumbs-o-up'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordHiCall")){k.append("<button title='操作记录' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordHiBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.viewCall")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='记录' recfileVal='"+i+"' class='recordBtn btn btn-xs btn-primary'><i class='fa fa-file-text'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.scoreCall")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='评分' recfileVal='"+i+"' class='evaluateBtn btn btn-xs btn-primary'><i class='fa fa-star'></i></button>");
}}else{if("mysub"==d.csType||(d.permissionType&&"mysub"==d.permissionType)){if(ResUtils.canShow("csEntity.button.listenCallSub")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='试听' recfileVal='"+i+"' class='listenBtn btn btn-xs btn-primary'><i class='fa fa-caret-square-o-left'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordTranslateSub")){k.append("<button title='翻译' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordTrans2WordBtn btn btn-xs btn-primary'><i class='fa fa-language'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.downloadCallSub")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='下载' recfileVal='"+i+"' class='downloadBtn btn btn-xs btn-primary'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordMarkCallSub")){k.append("<button title='标识' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordMarkBtn btn btn-xs btn-primary'><i class='fa fa-bookmark'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordRecommSub")){k.append("<button title='推荐' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordShareBtn btn btn-xs btn-primary'><i class='fa fa-thumbs-o-up'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordHiCallSub")){k.append("<button title='操作记录' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordHiBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.viewCallSub")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='记录' recfileVal='"+i+"' class='recordBtn btn btn-xs btn-primary'><i class='fa fa-file-text'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.scoreCallSub")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='评分' recfileVal='"+i+"' class='evaluateBtn btn btn-xs btn-primary'><i class='fa fa-star'></i></button>");
}}else{if("task"==d.csType){if(ResUtils.canShow("csEntity.button.listenCallTask")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='试听' recfileVal='"+i+"' class='listenBtn btn btn-xs btn-primary'><i class='fa fa-caret-square-o-left'></i></button>&nbsp;&nbsp;");
if(ResUtils.canShow("csEntity.button.operateRecordTranslateTask")){k.append("<button title='翻译' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordTrans2WordBtn btn btn-xs btn-primary'><i class='fa fa-language'></i></button>&nbsp;&nbsp;");
}}if(ResUtils.canShow("csEntity.button.downloadCallTask")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='下载' recfileVal='"+i+"' class='downloadBtn btn btn-xs btn-primary'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordMarkCallTask")){k.append("<button title='标识' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordMarkBtn btn btn-xs btn-primary'><i class='fa fa-bookmark'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordRecommTask")){k.append("<button title='推荐' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordShareBtn btn btn-xs btn-primary'><i class='fa fa-thumbs-o-up'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordHiCallTask")){k.append("<button title='操作记录' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordHiBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.viewCallTask")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='记录' recfileVal='"+i+"' class='recordBtn btn btn-xs btn-primary'><i class='fa fa-file-text'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.scoreCallTask")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='评分' recfileVal='"+i+"' class='evaluateBtn btn btn-xs btn-primary'><i class='fa fa-star'></i></button>");
}}else{if("callRecord"==d.csType){if(ResUtils.canShow("trkSheetRecord.button.listen")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='试听' recfileVal='"+i+"' class='listenBtn btn btn-xs btn-primary'><i class='fa fa-caret-square-o-left'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordTranslate")){k.append("<button title='翻译' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordTrans2WordBtn btn btn-xs btn-primary'><i class='fa fa-language'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.download")){k.append("<button  uniqueCode='"+f+"' title='下载' recfileVal='"+i+"' class='downloadBtn btn btn-xs btn-primary'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordMarkCall")){k.append("<button title='标识' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordMarkBtn btn btn-xs btn-primary'><i class='fa fa-bookmark'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordRecomm")){k.append("<button title='推荐' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordShareBtn btn btn-xs btn-primary'><i class='fa fa-thumbs-o-up'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.operateRecordHi")){k.append("<button title='操作记录' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordHiBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.view")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='记录' recfileVal='"+i+"' class='recordBtn btn btn-xs btn-primary'><i class='fa fa-file-text'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("trkSheetRecord.button.score")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='评分' recfileVal='"+i+"' class='evaluateBtn btn btn-xs btn-primary'><i class='fa fa-star'></i></button>");
}}else{if(ResUtils.canShow("csEntity.button.listenCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='试听' recfileVal='"+i+"' class='listenBtn btn btn-xs btn-primary'><i class='fa fa-caret-square-o-left'></i></button>&nbsp;&nbsp;");
if(ResUtils.canShow("csEntity.button.operateRecordTranslateSearch")){k.append("<button title='翻译' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordTrans2WordBtn btn btn-xs btn-primary'><i class='fa fa-language'></i></button>&nbsp;&nbsp;");
}}if(ResUtils.canShow("csEntity.button.downloadCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='下载' recfileVal='"+i+"' class='downloadBtn btn btn-xs btn-primary'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordMarkCallSearch")){k.append("<button title='标识' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordMarkBtn btn btn-xs btn-primary'><i class='fa fa-bookmark'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordRecommSearch")){k.append("<button title='推荐' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordShareBtn btn btn-xs btn-primary'><i class='fa fa-thumbs-o-up'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordHiCallSearch")){k.append("<button title='操作记录' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordHiBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.viewCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='记录' recfileVal='"+i+"' class='recordBtn btn btn-xs btn-primary'><i class='fa fa-file-text'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.scoreCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='评分' recfileVal='"+i+"' class='evaluateBtn btn btn-xs btn-primary'><i class='fa fa-star'></i></button>");
}}}}}}else{if(ResUtils.canShow("csEntity.button.listenCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='试听' recfileVal='"+i+"' class='listenBtn btn btn-xs btn-primary'><i class='fa fa-caret-square-o-left'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordTranslateSearch")){k.append("<button title='翻译' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordTrans2WordBtn btn btn-xs btn-primary'><i class='fa fa-language'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.downloadCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='下载' recfileVal='"+i+"' class='downloadBtn btn btn-xs btn-primary'><i class='fa fa-download'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordMarkCallSearch")){k.append("<button title='标识' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordMarkBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordRecommSearch")){k.append("<button title='推荐' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordShareBtn btn btn-xs btn-primary'><i class='fa fa-thumbs-o-upi></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.operateRecordHiCallSearch")){k.append("<button title='操作记录' uniqueCode='"+f+"' id-value ='"+g+"' recfileVal='"+i+"' class='operateRecordHiBtn btn btn-xs btn-primary'><i class='fa fa-list'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.viewCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='记录' recfileVal='"+i+"' class='recordBtn btn btn-xs btn-primary'><i class='fa fa-file-text'></i></button>&nbsp;&nbsp;");
}if(ResUtils.canShow("csEntity.button.scoreCallSearch")){k.append("<button  id-value ='"+g+"'  uniqueCode='"+f+"' title='评分' recfileVal='"+i+"' class='evaluateBtn btn btn-xs btn-primary'><i class='fa fa-star'></i></button>");
}}return k.toString();}else{return"";}}});$("#csCallRecordContainer").DataTable({ajax:{url:b},searching:false,columns:c,rowId:"id",lengthMenu:[[20]],paging:true,pagingType:"simple",lengthChange:false,ordering:true,order:[[6,"desc"]]});
}};