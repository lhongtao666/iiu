var weixinFaces={"[微笑]":'<a title="微笑" type="qq" class="face qqface conten-face qqface0 ">[微笑]</a>',"[撇嘴]":'<a title="撇嘴" type="qq" class="face qqface conten-face qqface1">[撇嘴]</a>',"[色]":'<a title="色" type="qq" class="face qqface conten-face qqface2">[色]</a>',"[发呆]":'<a title="发呆" type="qq" class="face qqface conten-face qqface3">[发呆]</a>',"[得意]":'<a title="得意" type="qq" class="face qqface conten-face qqface4">[得意]</a>',"[流泪]":'<a title="流泪" type="qq" class="face qqface conten-face qqface5">[流泪]</a>',"[害羞]":'<a title="害羞" type="qq" class="face qqface conten-face qqface6">[害羞]</a>',"[闭嘴]":'<a title="闭嘴" type="qq" class="face qqface conten-face qqface7">[闭嘴]</a>',"[睡]":'<a title="睡" type="qq" class="face qqface conten-face qqface8">[睡]</a>',"[大哭]":'<a title="大哭" type="qq" class="face qqface conten-face qqface9">[大哭]</a>',"[尴尬]":'<a title="尴尬" type="qq" class="face qqface conten-face qqface10">[尴尬]</a>',"[发怒]":'<a title="发怒" type="qq" class="face qqface conten-face qqface11">[发怒]</a>',"[调皮]":'<a title="调皮" type="qq" class="face qqface conten-face qqface12">[调皮]</a>',"[呲牙]":'<a title="呲牙" type="qq" class="face qqface conten-face qqface13">[呲牙]</a>',"[惊讶]":'<a title="惊讶" type="qq" class="face qqface conten-face qqface14">[惊讶]</a>',"[难过]":'<a title="难过" type="qq" class="face qqface conten-face qqface15">[难过]</a>',"[酷]":'<a title="酷" type="qq" class="face qqface conten-face qqface16">[酷]</a>',"[冷汗]":'<a title="冷汗" type="qq" class="face qqface conten-face qqface17">[冷汗]</a>',"[抓狂]":'<a title="抓狂" type="qq" class="face qqface conten-face qqface18">[抓狂]</a>',"[吐]":'<a title="吐" type="qq" class="face qqface conten-face qqface19">[吐]</a>',"[偷笑]":'<a title="偷笑" type="qq" class="face qqface conten-face qqface20">[偷笑]</a>',"[愉快]":'<a title="愉快" type="qq" class="face qqface conten-face qqface21">[愉快]</a>',"[白眼]":'<a title="白眼" type="qq" class="face qqface conten-face qqface22">[白眼]</a>',"[傲慢]":'<a title="傲慢" type="qq" class="face qqface conten-face qqface23">[傲慢]</a>',"[饥饿]":'<a title="饥饿" type="qq" class="face qqface conten-face qqface24">[饥饿]</a>',"[困]":'<a title="困" type="qq" class="face qqface conten-face qqface25">[困]</a>',"[惊恐]":'<a title="惊恐" type="qq" class="face qqface conten-face qqface26">[惊恐]</a>',"[流汗]":'<a title="流汗" type="qq" class="face qqface conten-face qqface27">[流汗]</a>',"[憨笑]":'<a title="憨笑" type="qq" class="face qqface conten-face qqface28">[憨笑]</a>',"[悠闲]":'<a title="悠闲" type="qq" class="face qqface conten-face qqface29">[悠闲]</a>',"[奋斗]":'<a title="奋斗" type="qq" class="face qqface conten-face qqface30">[奋斗]</a>',"[咒骂]":'<a title="咒骂" type="qq" class="face qqface conten-face qqface31">[咒骂]</a>',"[疑问]":'<a title="疑问" type="qq" class="face qqface conten-face qqface32">[疑问]</a>',"[嘘]":'<a title="嘘" type="qq" class="face qqface conten-face qqface33">[嘘]</a>',"[晕]":'<a title="晕" type="qq" class="face qqface conten-face qqface34">[晕]</a>',"[疯了]":'<a title="疯了" type="qq" class="face qqface conten-face qqface35">[疯了]</a>',"[衰]":'<a title="衰" type="qq" class="face qqface conten-face qqface36">[衰]</a>',"[骷髅]":'<a title="骷髅" type="qq" class="face qqface conten-face qqface37">[骷髅]</a>',"[敲打]":'<a title="敲打" type="qq" class="face qqface conten-face qqface38">[敲打]</a>',"[再见]":'<a title="再见" type="qq" class="face qqface conten-face qqface39">[再见]</a>',"[擦汗]":'<a title="擦汗" type="qq" class="face qqface conten-face qqface40">[擦汗]</a>',"[抠鼻]":'<a title="抠鼻" type="qq" class="face qqface conten-face qqface41">[抠鼻]</a>',"[鼓掌]":'<a title="鼓掌" type="qq" class="face qqface conten-face qqface42">[鼓掌]</a>',"[糗大了]":'<a title="糗大了" type="qq" class="face qqface conten-face qqface43">[糗大了]</a>',"[坏笑]":'<a title="坏笑" type="qq" class="face qqface conten-face qqface44">[坏笑]</a>',"[左哼哼]":'<a title="左哼哼" type="qq" class="face qqface conten-face qqface45">[左哼哼]</a>',"[右哼哼]":'<a title="右哼哼" type="qq" class="face qqface conten-face qqface46">[右哼哼]</a>',"[哈欠]":'<a title="哈欠" type="qq" class="face qqface conten-face qqface47">[哈欠]</a>',"[鄙视]":'<a title="鄙视" type="qq" class="face qqface conten-face qqface48">[鄙视]</a>',"[委屈]":'<a title="委屈" type="qq" class="face qqface conten-face qqface49">[委屈]</a>',"[快哭了]":'<a title="快哭了" type="qq" class="face qqface conten-face qqface50">[快哭了]</a>',"[阴险]":'<a title="阴险" type="qq" class="face qqface conten-face qqface51">[阴险]</a>',"[亲亲]":'<a title="亲亲" type="qq" class="face qqface conten-face qqface52">[亲亲]</a>',"[吓]":'<a title="吓" type="qq" class="face qqface conten-face qqface53">[吓]</a>',"[可怜]":'<a title="可怜" type="qq" class="face qqface conten-face qqface54">[可怜]</a>',"[菜刀]":'<a title="菜刀" type="qq" class="face qqface conten-face qqface55">[菜刀]</a>',"[西瓜]":'<a title="西瓜" type="qq" class="face qqface conten-face qqface56">[西瓜]</a>',"[啤酒]":'<a title="啤酒" type="qq" class="face qqface conten-face qqface57">[啤酒]</a>',"[篮球]":'<a title="篮球" type="qq" class="face qqface conten-face qqface58">[篮球]</a>',"[乒乓]":'<a title="乒乓" type="qq" class="face qqface conten-face qqface59">[乒乓]</a>',"[咖啡]":'<a title="咖啡" type="qq" class="face qqface conten-face qqface60">[咖啡]</a>',"[饭]":'<a title="饭" type="qq" class="face qqface conten-face qqface61">[饭]</a>',"[猪头]":'<a title="猪头" type="qq" class="face qqface conten-face qqface62">[猪头]</a>',"[玫瑰]":'<a title="玫瑰" type="qq" class="face qqface conten-face qqface63">[玫瑰]</a>',"[凋谢]":'<a title="凋谢" type="qq" class="face qqface conten-face qqface64">[凋谢]</a>',"[嘴唇]":'<a title="嘴唇" type="qq" class="face qqface conten-face qqface65">[嘴唇]</a>',"[爱心]":'<a title="爱心" type="qq" class="face qqface conten-face qqface66">[爱心]</a>',"[心碎]":'<a title="心碎" type="qq" class="face qqface conten-face qqface67">[心碎]</a>',"[蛋糕]":'<a title="蛋糕" type="qq" class="face qqface conten-face qqface68">[蛋糕]</a>',"[闪电]":'<a title="闪电" type="qq" class="face qqface conten-face qqface69">[闪电]</a>',"[炸弹]":'<a title="炸弹" type="qq" class="face qqface conten-face qqface70">[炸弹]</a>',"[刀]":'<a title="刀" type="qq" class="face qqface conten-face qqface71">[刀]</a>',"[足球]":'<a title="足球" type="qq" class="face qqface conten-face qqface72">[足球]</a>',"[瓢虫]":'<a title="瓢虫" type="qq" class="face qqface conten-face qqface73">[瓢虫]</a>',"[便便]":'<a title="便便" type="qq" class="face qqface conten-face qqface74">[便便]</a>',"[月亮]":'<a title="月亮" type="qq" class="face qqface conten-face qqface75">[月亮]</a>',"[太阳]":'<a title="太阳" type="qq" class="face qqface conten-face qqface76">[太阳]</a>',"[礼物]":'<a title="礼物" type="qq" class="face qqface conten-face qqface77">[礼物]</a>',"[拥抱]":'<a title="拥抱" type="qq" class="face qqface conten-face qqface78">[拥抱]</a>',"[强]":'<a title="强" type="qq" class="face qqface conten-face qqface79">[强]</a>',"[弱]":'<a title="弱" type="qq" class="face qqface conten-face qqface80">[弱]</a>',"[握手]":'<a title="握手" type="qq" class="face qqface conten-face qqface81">[握手]</a>',"[胜利]":'<a title="胜利" type="qq" class="face qqface conten-face qqface82">[胜利]</a>',"[抱拳]":'<a title="抱拳" type="qq" class="face qqface conten-face qqface83">[抱拳]</a>',"[勾引]":'<a title="勾引" type="qq" class="face qqface conten-face qqface84">[勾引]</a>',"[拳头]":'<a title="拳头" type="qq" class="face qqface conten-face qqface85">[拳头]</a>',"[差劲]":'<a title="差劲" type="qq" class="face qqface conten-face qqface86">[差劲]</a>',"[爱你]":'<a title="爱你" type="qq" class="face qqface conten-face qqface87">[爱你]</a>',"[NO]":'<a title="NO" type="qq" class="face qqface conten-face qqface88">[NO]</a>',"[OK]":'<a title="OK" type="qq" class="face qqface conten-face qqface89">[OK]</a>',"[爱情]":'<a title="爱情" type="qq" class="face qqface conten-face qqface90">[爱情]</a>',"[飞吻]":'<a title="飞吻" type="qq" class="face qqface conten-face qqface91">[飞吻]</a>',"[跳跳]":'<a title="跳跳" type="qq" class="face qqface conten-face qqface92">[跳跳]</a>',"[发抖]":'<a title="发抖" type="qq" class="face qqface conten-face qqface93">[发抖]</a>',"[怄火]":'<a title="怄火" type="qq" class="face qqface conten-face qqface94">[怄火]</a>',"[转圈]":'<a title="转圈" type="qq" class="face qqface conten-face qqface95">[转圈]</a>',"[磕头]":'<a title="磕头" type="qq" class="face qqface conten-face qqface96">[磕头]</a>',"[回头]":'<a title="回头" type="qq" class="face qqface conten-face qqface97">[回头]</a>',"[跳绳]":'<a title="跳绳" type="qq" class="face qqface conten-face qqface98">[跳绳]</a>',"[投降]":'<a title="投降" type="qq" class="face qqface conten-face qqface99">[投降]</a>',"[激动]":'<a title="激动" type="qq" class="face qqface conten-face qqface100">[激动]</a>',"[乱舞]":'<a title="乱舞" type="qq" class="face qqface conten-face qqface101">[乱舞]</a>',"[献吻]":'<a title="献吻" type="qq" class="face qqface conten-face qqface102">[献吻]</a>',"[左太极]":'<a title="左太极" type="qq" class="face qqface conten-face qqface103">[左太极]</a>',"[右太极]":'<a title="右太极" type="qq" class="face qqface conten-face qqface104">[右太极]</a>',"[嘿哈]":'<a title="嘿哈" type="qq" class="emoji  conten-face emoji8">[嘿哈]</a>',"[捂脸]":'<a title="捂脸" type="qq" class="emoji  conten-face emoji9">[捂脸]</a>',"[奸笑]":'<a title="奸笑" type="qq" class="emoji  conten-face emoji10">[奸笑]</a>',"[机智]":'<a title="机智" type="qq" class="emoji  conten-face emoji11">[机智]</a>',"[皱眉]":'<a title="皱眉" type="qq" class="emoji  conten-face emoji12">[皱眉]</a>',"[耶]":'<a title="耶" type="qq" class="emoji  conten-face emoji13">[耶]</a>',"[鸡]":'<a title="鸡" type="qq" class="emoji  conten-face emoji20">[鸡]</a>',};
var WeiXinUtil={replaceFace:function(a){if(typeof a=="object"){a=JSON.stringify(a);}a=a.replace(/\[[A-Z\u4E00-\u9FA5]*\]/g,function(c,b){if(weixinFaces.hasOwnProperty(c)){return weixinFaces[c];
}return c;});return this._markRed(a);},_markRed:function(b){var a=/([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})/g;b=b.replace(a,function(d,c){return"<span style='color:red;'>"+d+"</span>";
});return b;},getIsRevoke:function(a){if(a.status&&a.status==1){return"<span class='msg-revoke'>撤</span>";}else{if(a.status&&a.status==5){return"<span class='msg-revoke'>撤回中...</span>";
}else{return"";}}},getFileMsg:function(c){var a=[];if(c.content.indexOf("_;_")!=-1){a=c.content.split("_;_");}else{if(c.content.indexOf(";")!=-1){a=c.content.split(";");
}else{if(c.content.indexOf("/UploadedFile/bucket/")!=-1){a=c.content.split(";");}else{return c.content;}}}var e=new StringBuffer();var d=(a.length>=2?a[1]:"未知文件");
var b=(a.length>=3?a[2]:0);e.append("<div class='attach'>").append("<div class='attach_bd'>").append("<div class='cover'>").append("<img class='no' src='"+ImageUtils.getFileCoverUrl(a[0])+"' class='icon-unknown ng-scope'></img>").append("</div>").append("<div class='cont'>").append("<p class='title'>"+d+"</p>").append("<div class='opr'>").append("<span >"+this._getFileSize(b)+"</span>").append("<a class='download-file' name-value='"+d+"' url-value='"+a[0]+"'><img class='no' src='"+ctx+"/img/jt/wx/images/download.png' /></a>").append("</div>").append("</div>").append("</div>").append("</div>");
return e.toString();},_getFileSize:function(a){if(a==0){return"";}else{if(a<1024){return a+"B";}else{if(a<1024*1024){return(a/1024).toFixed(2)+"KB";}else{if(a<1024*1024*1024){return(a/(1024*1024)).toFixed(2)+"MB";
}else{return"";}}}}},getAudioSpan:function(d,b,c){var a=d.content.split(";");var f=new StringBuffer();var e=ctx+"/crm/components/upload/download.htm?dname=123.mp3&durl="+ctx+a[0];
f.append("<div  class='jt-audio-box jt-audio-element'><div class='jt-audio' id-value='"+d.id+"' createtime='"+d.createTime+"'><i class='jt-audio-element' style='background: transparent url(").append(ctx).append("/img/jt/wx/images/yuyin.png) no-repeat 0 0;background-size: 74px 25px;background-position: -4px center;' src-value='").append(e).append("'></i>");
if(a.length<=1&&d.type=="in"){f.append('<div idVal="'+d.id+'" class="web_wechat_noread" style=""></div>');}f.append("<span class='jt-audio-element' style='float:right;margin-right:9px;'>点击播放</span>");
f.append("<audio style='display:none;'></audio>");f.append("</div></div>");if(b){if(d.voiceTranslateResult){f.append('<div class="translateToWord" createTime="'+d.createTime+'"  idVal="'+d.id+'" title="'+d.voiceTranslateResult+'" style="line-height:34px;cursor: copy;padding-left:20px;" >！</div>');
}else{f.append('<div class="translateToWord" createTime="'+d.createTime+'" idVal="'+d.id+'" title="点击？翻译" style="" >？</div>');}}else{if(c&&d.voiceTranslateResult){f.append('<div class="translateToWord" createTime="'+d.createTime+'"  idVal="'+d.id+'" title="'+d.voiceTranslateResult+'" style="line-height:34px;cursor: copy;padding-left:20px;" >！</div>');
}}return f.toString();},getNameCard:function(a){if(a.type=="in"){return"向你推荐了"+a.content.nickname;}else{return"你推荐了"+a.content.nickname;}},getTransfer:function(d){var b=d.content.money;
var c="";var a="";if(d.content.paysubtype=="1"){if(d.type=="in"){c="转账给你";a="wx-transfer-take";}else{c="转账给对方";}}else{c="已收钱";}var e=new StringBuffer();
e.append("<div class='"+a+"' data-json_msg='"+JSON.stringify(d.content)+"'>").append("<div class='wx-transfer-1'>").append("<p>"+c+"</p>").append("<p>￥"+b+"</p>").append("</div>").append("<div class='wx-transfer-2'>").append("微信转账").append("</div>").append("</div>");
return e.toString();},getVideoMsg:function(a){var b=new StringBuffer();if(a.content&&(a.content.indexOf(".mp4")>0||a.content.indexOf(".MP4")>0)){b.append("<img class='jt-video'src='"+ctx+"/img/jt/wx/images/video.jpg' src-data='"+ctx+a.content+"'>").append("</img>");
}else{b.append(a.content);}return b.toString();},getNewFriendMsg:function(b){var a=b.content.split(";");var c=new StringBuffer();c.append("<p class='new-friend'>朋友验证请求 "+((a[4]==1)?"<span class='pull-right glyphicon glyphicon-plus add-new-friend ' title='添加好友'></span>":"")+"</p>").append("<img class='avatar' style='height:40px;width:40px;'  src-val='/t9-ecm/img/jt/wx/images/head_default.jpg' src='/t9-ecm/img/jt/wx/images/head_default.jpg'>").append("<p style='display: inline-block;line-height:1.6;'>"+this._getNewInfo(a)+"</p>");
return c.toString();},getNewFriendMsg2:function(b){var a=b.content.split(";");return a[1];},_getNewInfo:function(a){var b=new StringBuffer();if(a.length<5){return"";
}b.append("<span class='new-nick-name' user-name='"+a[2]+"' verify-ticket='"+a[3]+"' is-add='"+a[4]+"''>"+a[0]+"</span>").append("<br>").append(a[0]+":"+a[1]);
return b.toString();},showPlayVideotLayer:function(b){var a=this;layer.open({type:1,title:"视频",maxmin:false,move:false,scrollbar:false,shadeClose:false,area:["600px","530px"],content:$(".jt-wx-play-video"),success:function(c,d){var e=ctx+"/crm/components/upload/download.htm?dname=123.mp4&durl="+b;
$("#jt-wx-video").attr("src",e);$("#download-mp4").attr("url-value",b);},yes:function(d,c){layer.close(d);},});},changeTypeToCN:function(a){if(a.lastReplyType==1||a.lastReplyType==4||a.lastReplyType=="1"||a.lastReplyType=="4"){return"[图片]";
}else{if(a.lastReplyType==2||a.lastReplyType=="2"){return"[语音]";}else{if(a.lastReplyType==7||a.lastReplyType=="7"){return"[文件]";}else{if(a.lastReplyType==8){return"[视频]";
}else{if(a.lastReplyType==5||a.lastReplyType=="5"){if(typeof a.lastReplyContent=="object"){return a.lastReplyContent.content;}else{return JSON.parse(a.lastReplyContent).content;
}}else{if(a.lastReplyType==10||a.lastReplyType=="10"){if(typeof a.lastReplyContent=="object"){return"推荐了"+a.lastReplyContent.nickname;}else{return"推荐了"+JSON.parse(a.lastReplyContent).nickname;
}}else{if(a.lastReplyType==12||a.lastReplyType=="12"){return"[转账]";}else{return WeiXinUtil.replaceFace(a.lastReplyContent);}}}}}}}},};