function CsEntitySeaManager(){}CsEntitySeaManager.prototype={_initMySea:function(){this.csEntityMySea=new CsEntitySea({pager:"csEntitySeaPager",grid:"csEntitySeaGrid",tabContainer:"tabMySea",type:"self"});
},_initWaitSea:function(){this.csEntityWaitSea=new CsEntitySea({pager:"csEntityWaitSeaPager",grid:"csEntityWaitSeaGrid",tabContainer:"tabWaitSea",type:"mysub"});
},init:function(){this._initMySea();this._initWaitSea();this._initSearch();this._buildEmployeeOption("");this._bindEventHandler();this.csEntityMySea.init();
},_initSearch:function(){CateUtils.getOptions([{typeKey:"system",pKey:"CsBizTypes",container:"bizTypeSearch",emptyOption:"noBizTypes"},{typeKey:"system",pKey:"CsFollowType",container:"followSearch"},{typeKey:"system",pKey:"CsGenderType",container:"genderSearch"},{typeKey:"system",pKey:"CsEntryType",container:"entrySearch"},{typeKey:"system",pKey:"income",container:"incomeSearch"},{typeKey:"system",pKey:"CsInterestType",container:"interestSearch",emptyOption:"noInterests"},]);
this._buildLevelOption();this._buildEavSearchCondition();ChannelUtils.getOptions({container:"srcSearch",caption:"全部",emptyOptions:"null"});},_buildLevelOption:function(){FormUtils.loadData(ctx+"/crm/point/levelDef/findActived.htm",function(b){if(b&&b.length>0){var c=new StringBuffer();
for(var a=0;a<b.length;a++){c.append("<option value='"+b[a].level+"'>"+b[a].name+"</option>");}$(".levelSearch").append(c.toString());}});},_buildEavSearchCondition:function(){var a=this;
FormUtils.loadData(ctx+"/crm/cs/csEntity/getEavSetPo.htm",function(e){if(e&&e.eavAttrPos&&e.eavAttrPos.length>0){var d=e.eavAttrPos;var f=new StringBuffer();
for(var c=0;c<d.length;c++){f.append("<optgroup label='"+d[c].name+"'>");if(d[c].eavAttrOptPos&&d[c].eavAttrOptPos.length>0){for(var b=0;b<d[c].eavAttrOptPos.length;
b++){f.append("<option value='"+d[c].eavAttrOptPos[b].value+"'>"+d[c].eavAttrOptPos[b].label+"</option>");}}f.append("</optgroup>");}$(".eavSearch").empty().append(f.toString());
}});},_buildEmployeeOption:function(b){var a=CsEntitySea._CONS_.EMPLOYEE_LIST_URL+"?groupId="+b+"&type=dept_manager";FormUtils.loadData(a,function(d){$("#belongEmployeeSearch").empty();
if(d&&d.length>0){var e=new StringBuffer();e.append("<option value=''>请选择</option>");for(var c=0;c<d.length;c++){e.append("<option value='"+d[c].id+"'>"+d[c].aid+":"+d[c].name+"</option>");
}$("#belongEmployeeSearch").append(e.toString()).select2();}},null,true);},_bindEventHandler:function(){var a=this;$(".tabs-container").on("click",".tabli",function(){var b=$(this).attr("id");
switch(b){case"mySeaTabLi":if(!a.csEntityMySea.isInit){a.csEntityMySea.init();}break;case"waitSeaTabLi":if(!a.csEntityWaitSea.isInit){a.csEntityWaitSea.init();
}break;}});$("#groupName").on("click",function(){var b={isMultiple:0,selectedGroupId:$("input[name='groupId']").val(),container:"groupName",nolimit:true,positionType:"dept_manager,cs_search",fn:function(c){$("input[name=groupId]").val(c);
}};GroupUtils.selectGroupTreeBox(b);});$("#belongOgnName").on("click",function(){var b={isMultiple:0,selectedGroupId:$("input[name='belongOgn']").val(),container:"belongOgnName",nolimit:true,positionType:"dept_manager,cs_search",fn:function(c){$("input[name=belongOgn]").val(c);
a._buildEmployeeOption(c);}};GroupUtils.selectGroupTreeBox(b);});}};$(function(){var a=new CsEntitySeaManager();a.init();});