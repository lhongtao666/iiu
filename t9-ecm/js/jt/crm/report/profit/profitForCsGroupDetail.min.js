$(function(){var a=new ProfitForCsGroupDetail();a.init();});function ProfitForCsGroupDetail(){this.hadInit=false;this.isEdit=false;this.sortColumn="";this.sortorder="";
}ProfitForCsGroupDetail._CONS_={LIST_DATA_URL:ctx+"/ec/rp/reportProfit/csDetail.htm",DETAIL_CS_PAGE_URL:ctx+"/crm/cs/csEntity/detail.htm",GRID:"#profitForCsGroupDetailGrid",PAGER:"#profitForCsGroupDetailPager"};
ProfitForCsGroupDetail.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;this._bindEventHander();a._initJqgrid();if(paramsDetail.type=="newcs"){$(".timeRange").text("时间: "+timeStart+" 至 "+timeEnd+"　　"+paramsDetail.timeFrame+"-"+(parseInt(paramsDetail.timeFrame)+1)+"点");
}else{$(".timeRange").text("时间: "+timeStart+" 至 "+timeEnd);}}},_bindEventHander:function(){$("body").on("click",".csTab",function(){var a=$(this).attr("value");
var c=$(this).attr("valueCsName");var b=$(this).attr("valueCsId");if(c.length>4){c="*"+c.substring(c.length-3,c.length);}JTTabUtils.addOrRefreshTab(ProfitForCsGroupDetail._CONS_.DETAIL_CS_PAGE_URL+"?csId="+b,"客户["+c+"]明细");
});},_initJqgrid:function(){var b=paramsDetail;b.timeStart=timeStart+" 00:00:00";b.timeEnd=timeEnd+" 23:59:59";var a=this;$(ProfitForCsGroupDetail._CONS_.GRID).JTJqgrid({url:ProfitForCsGroupDetail._CONS_.LIST_DATA_URL,postData:b,multiselect:false,footerrow:true,rowNum:-1,colNames:["客户名称","客户编号","进线方式","进线时间",],colModel:[{name:"csName",width:60,sortable:false},{name:"csNo",width:60,sortable:false,formatter:function(c,d,e){if(e.csNo.indexOf("记录")>-1){return e.csNo;
}else{return"<a href='#'  class='csTab' value='"+e.csNo+"' valueCsId = '"+e.csId+"' valueCsName = '"+e.csName+"'>"+e.csNo+"</a>";}}},{name:"csEntry",width:60,sortable:false},{name:"placeTime",width:70,sortable:false},],});
}};