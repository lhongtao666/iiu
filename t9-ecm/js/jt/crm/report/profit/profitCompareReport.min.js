$(function(){var a=new ProfitCompareReport();a.init();});function ProfitCompareReport(){this.hadInit=false;this.baseUrl=ctx+"/crm/report/profitCompareReport/listData.htm";
}ProfitCompareReport._CONS_={EXPORT_URL:ctx+"/crm/report/profitCompareReport/export.htm",GRID:"#profitCompareReportGrid",};ProfitCompareReport.prototype={init:function(b){var a=this;
if(!a.hadInit){a.hadInit=true;a._bindEventHander();$("#timeTypeSearch").val("day");ReportDateUtil.initDate(".report-content");$("#timeTypeSearch").change();
$(".simple-time-select").hide();this._initChar(this.toPostParamStr());this._initJqgrid(this.toPostParam());}},_bindEventHander:function(){var a=this;$(".report-content").off("click","#searchBtn");
$(".report-content").on("click","#searchBtn",function(){a.reloadJqgrid(a.toPostParam());a._initChar(a.toPostParamStr());});$(".report-content").off("click",".exportExcel");
$(".report-content").on("click",".exportExcel",function(){ButtonUtils.disableBtn("exportExcel");FormUtils.submit(ProfitCompareReport._CONS_.EXPORT_URL,a.toPostParam(),function(b){ButtonUtils.enableBtn("exportExcel");
if(b.success){DialogUtils.success(msgCode.INFO,b.msg+"成功");}else{DialogUtils.error(msgCode.FAIL_MSG,b.msg);}},function(){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);
});});},_initChar:function(a){FormUtils.loadData(this.baseUrl+"?"+a,function(c){var b=c.rows;if(b&&b.length>0){$(".placeAmount").empty().text(b[0].placeAmount);
$(".completeAmount").empty().text(b[0].completeAmount);$(".dayPlaceAmount").empty().text(b[0].dayPlaceAmount);if(b[0].dayPlacePercent.indexOf("-")>-1){$(".dayPlacePercent").addClass("text-danger");
$(".dayPlacePercent").empty().append(b[0].dayPlacePercent+"<i class='fa fa-level-down'></i>");}else{$(".dayPlacePercent").addClass("text-success");$(".dayPlacePercent").empty().append(b[0].dayPlacePercent+"<i class='fa fa fa-level-up'></i>");
}$(".dayCompleteAmount").text(b[0].dayCompleteAmount);if(b[0].dayCompletePercent.indexOf("-")>-1){$(".dayCompletePercent").addClass("text-danger");$(".dayCompletePercent").empty().append(b[0].dayCompletePercent+"<i class='fa fa-level-down'></i>");
}else{$(".dayCompletePercent").addClass("text-success");$(".dayCompletePercent").empty().append(b[0].dayCompletePercent+"<i class='fa fa fa-level-up'></i>");
}$(".yearPlaceAmount").text(b[0].yearPlaceAmount);if(b[0].yearPlacePercent.indexOf("-")>-1){$(".yearPlacePercent").addClass("text-danger");$(".yearPlacePercent").empty().append(b[0].yearPlacePercent+"<i class='fa fa-level-down'></i>");
}else{$(".yearPlacePercent").addClass("text-info");$(".yearPlacePercent").empty().append(b[0].yearPlacePercent+"<i class='fa fa fa-level-up'></i>");}$(".monthPlacePercent").text(b[0].monthPlacePercent);
if(b[0].monthPlacePercent.indexOf("-")>-1){$(".monthPlacePercentChar").empty().append("<div style='width: "+b[0].monthPlacePercent+";' class='progress-bar progress-bar-danger'></div>");
}else{$(".monthPlacePercentChar").empty().append("<div style='width: "+b[0].monthPlacePercent+";' class='progress-bar'></div>");}$(".monthCompletePercent").text(b[0].monthCompletePercent);
if(b[0].monthPlacePercent.indexOf("-")>-1){$(".monthCompletePercentChar").empty().append("<div style='width: "+b[0].monthCompletePercent+";' class='progress-bar progress-bar-danger'></div>");
}else{$(".monthCompletePercentChar").empty().append("<div style='width: "+b[0].monthCompletePercent+";' class='progress-bar'></div>");}}});},_initJqgrid:function(a){$(ProfitCompareReport._CONS_.GRID).JTJqgrid({url:this.baseUrl,postData:a,multiselect:false,rowNum:-1,colNames:["下单额","签收额","同天数下单额","同天数下单增长率","同天数签收额","同天数签收增长率","上月下单额增长率","上月签收额增长率","半年下单额","半年下单额增长率"],colModel:[{name:"placeAmount",width:100},{name:"completeAmount",width:100},{name:"dayPlaceAmount",width:120},{name:"dayPlacePercent",width:150},{name:"dayCompleteAmount",width:120},{name:"dayCompletePercent",width:150},{name:"monthPlacePercent",width:150},{name:"monthCompletePercent",width:150},{name:"yearPlaceAmount",width:120},{name:"yearPlacePercent",width:150},],});
},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(ProfitCompareReport._CONS_.GRID,a);},toPostParam:function(){var a=ReportDateUtil.getDateTimeRangeStr().split(",");
var b={beginTime:a[0],endTime:a[1]};return b;},toPostParamStr:function(){var a=ReportDateUtil.getDateTimeRangeStr().split(",");var b="beginTime="+a[0]+"&endTime="+a[1];
return b;},};