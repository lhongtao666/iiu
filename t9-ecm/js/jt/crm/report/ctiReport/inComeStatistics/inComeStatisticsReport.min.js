$(function(){var a=new InComeStatisticsReport();a.init();});function InComeStatisticsReport(){this.hadInit=false;this.isEdit=false;}InComeStatisticsReport._CONS_={LIST_DATA_URL:ctx+"/crm/report/InComeStatisticsReport/listData.htm",GRID:"#inComeStatisticsReportGrid",PAGER:"#inComeStatisticsReportPager",};
InComeStatisticsReport.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initJqgrid();}},_bindEventHander:function(){var a=this;
$(document).on("click",".inComeStatisticsReportSearch",function(){var b={startTime:$("input[name='startTime']").val(),endTime:$("input[name='endTime']").val(),timeType:$("#timeType option:selected").val()};
a._reloadJqgird(b);});},_reloadJqgird:function(a){JTJqgridUtils.reloadJqgrid(InComeStatisticsReport._CONS_.GRID,a);},_initJqgrid:function(){var b=this;
var c=new Date().currentDate()+" 00:00:00";var a=new Date().currentDate()+" 23:59:59";$("input[name=startTime]").val(c);$("input[name=endTime]").val(a);
var d={startTime:c,endTime:a};$(InComeStatisticsReport._CONS_.GRID).JTJqgrid({url:InComeStatisticsReport._CONS_.LIST_DATA_URL,postData:d,rowNum:10000,viewrecords:true,footerrow:true,multiselect:false,userDataOnFooter:true,colNames:[" ","日期","时间","IVR接入总量","请求转人工总量","接通量","时段接通率"],colModel:[{name:"id",width:10,index:""},{modelName:"dayStr",name:"dayStr",index:"dayStr",width:100},{modelName:"timeStr",name:"timeStr",index:"timeStr",width:100},{modelName:"ivrTotal",name:"ivrTotal",index:"ivrTotal",width:100},{modelName:"routeAgentTotal",name:"routeAgentTotal",index:"routeAgentTotal",width:100},{modelName:"isOkRouteAgent",name:"isOkRouteAgent",index:"isOkRouteAgent",width:100},{modelName:"timeRangePercent",name:"timeRangePercent",index:"timeRangePercent",width:100,formatter:function(e,f,g){if(!parseInt(g.routeAgentTotal)){return 0;
}return parseFloat((parseInt(g.isOkRouteAgent)/parseInt(g.routeAgentTotal))*100).toFixed(2)+"%";}},],beforeProcessing:function(e){console.log(e);b.footData=e.footData;
},gridComplete:function(){if(b.footData){var e=b.footData;$(InComeStatisticsReport._CONS_.GRID).footerData("set",{id:"总计:",ivrTotal:e.ivrTotal,routeAgentTotal:e.routeAgentTotal,isOkRouteAgent:e.isOkRouteAgent},false);
}},});}};