$(function(){var a=new CallInDataStatisticsReport();a.init();});function CallInDataStatisticsReport(){this.hadInit=false;this.isEdit=false;}CallInDataStatisticsReport._CONS_={LIST_DATA_URL:ctx+"/crm/report/CallInDataStatisticsReport/listData.htm",GRID:"#callInDataStatisticsReportGrid",PAGER:"#callInDataStatisticsReportPager",};
CallInDataStatisticsReport.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initJqgrid();}},_bindEventHander:function(){var a=this;
$(document).on("click",".callInDataStatisticsReportSearch",function(){var b={startTime:$("input[name='startTime']").val(),endTime:$("input[name='endTime']").val(),searchbno:$("input[name='bno']").val()};
a._reloadJqgird(b);});},_reloadJqgird:function(a){JTJqgridUtils.reloadJqgrid(CallInDataStatisticsReport._CONS_.GRID,a);},_initJqgrid:function(){var b=this;
var c=new Date().currentDate()+" 00:00:00";var a=new Date().currentDate()+" 23:59:59";$("input[name=startTime]").val(c);$("input[name=endTime]").val(a);
var d={startTime:c,endTime:a};$(CallInDataStatisticsReport._CONS_.GRID).JTJqgrid({url:CallInDataStatisticsReport._CONS_.LIST_DATA_URL,postData:d,width:"100%",rowNum:10000,multiselect:false,autowidth:true,footerrow:true,autoScroll:true,shrinkToFit:false,colNames:[" ","被叫号码","呼入记录","IVR接入总量","请求转人工总量","IVR转接率","接通总量","接通率","IVR放弃量","IVR放弃率","排队放弃量","排队放弃率","振铃放弃量","振铃放弃率","10s通话量","10s通话率","20s服务水平","IVR服务总时长","通话总时长","等待总时长","排队总时长","平均应答速度","平均排队放弃时长","平均振铃时长","平均通话时长","平均处理总时长","最长排队时长","最长等待时长","最长通话时长","最长放弃排队时长"],colModel:[{name:"id",width:1,index:""},{modelName:"bnoNumber",name:"bnoNumber",index:"bnoNumber",width:80},{modelName:"bnoRecordCount",name:"bnoRecordCount",index:"bnoRecordCount",width:100},{modelName:"ivrTotalCount",name:"ivrTotalCount",index:"ivrTotalCount",width:100},{modelName:"ivr2AgentCount",name:"ivr2AgentCount",index:"ivr2AgentCount",width:120},{modelName:"ivrTotalCoutRate",name:"ivrTotalCoutRate",index:"ivrTotalCoutRate",width:100,formatter:function(e,f,g){if(!parseInt(g.bnoRecordCount)){return 0;
}return parseFloat((parseInt(g.ivrTotalCount)/parseInt(g.bnoRecordCount))*100).toFixed(2)+"%";}},{modelName:"agentLinkedCount",name:"agentLinkedCount",index:"agentLinkedCount",width:100},{modelName:"agentLinkedCountRate",name:"agentLinkedCountRate",index:"agentLinkedCountRate",width:100,formatter:function(e,f,g){if(!parseInt(g.bnoRecordCount)){return 0;
}return parseFloat((parseInt(g.agentLinkedCount)/parseInt(g.bnoRecordCount))*100).toFixed(2)+"%";}},{modelName:"ivrGiveupCount",name:"ivrGiveupCount",index:"ivrGiveupCount",width:100},{modelName:"ivrGiveupCountRate",name:"ivrGiveupCountRate",index:"ivrGiveupCountRate",width:100,formatter:function(e,f,g){if(!parseInt(g.ivrTotalCount)){return 0;
}return parseFloat((parseInt(g.ivrGiveupCount)/parseInt(g.ivrTotalCount))*100).toFixed(2)+"%";}},{modelName:"acdGiveupCount",name:"acdGiveupCount",index:"acdGiveupCount",width:100},{modelName:"acdGiveupCountRate",name:"acdGiveupCountRate",index:"acdGiveupCountRate",width:100,formatter:function(e,f,g){if(!parseInt(g.acdTotalCount)){return 0;
}return parseFloat((parseInt(g.acdGiveupCount)/parseInt(g.acdTotalCount))*100).toFixed(2)+"%";}},{modelName:"ringGiveupCount",name:"ringGiveupCount",index:"ringGiveupCount",width:100},{modelName:"ringGiveupCountRate",name:"ringGiveupCountRate",index:"ringGiveupCountRate",width:100,formatter:function(e,f,g){if(!parseInt(g.bnoRecordCount)){return 0;
}return parseFloat((parseInt(g.ringGiveupCount)/parseInt(g.bnoRecordCount))*100).toFixed(2)+"%";}},{modelName:"tenSecondCount",name:"tenSecondCount",index:"tenSecondCount",width:100},{modelName:"tenSecondCountRate",name:"tenSecondCountRate",index:"tenSecondCountRate",width:100,formatter:function(e,f,g){if(!parseInt(g.bnoRecordCount)){return 0;
}return parseFloat((parseInt(g.tenSecondCount)/parseInt(g.bnoRecordCount))*100).toFixed(2)+"%";}},{modelName:"linkedIn20SecondCount",name:"linkedIn20SecondCount",index:"linkedIn20SecondCount",width:100},{modelName:"ivrTotalTimeLength",name:"ivrTotalTimeLength",index:"ivrTotalTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"linkedTotalTimeLength",name:"linkedTotalTimeLength",index:"linkedTotalTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"waitingTotalTimeLength",name:"waitingTotalTimeLength",index:"waitingTotalTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"acdTotalTimeLenth",name:"acdTotalTimeLenth",index:"acdTotalTimeLenth",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"answerTimeLength",name:"answerTimeLength",index:"answerTimeLength",width:100,formatter:function(e,f,g){if(!parseInt(g.agentLinkedCount)){return 0;
}return DateUtils.toChineseTime(parseFloat(parseInt(e)/parseInt(g.agentLinkedCount)).toFixed(0));}},{modelName:"acdGiveTImeLenght",name:"acdGiveTImeLenght",index:"acdGiveTImeLenght",width:100,formatter:function(e,f,g){if(!parseInt(g.acdGiveupCount)){return 0;
}return DateUtils.toChineseTime(parseFloat(parseInt(g.acdGiveTImeLenght)/parseInt(g.acdGiveupCount)).toFixed(0));}},{modelName:"avgRingTimeLength",name:"avgRingTimeLength",index:"avgRingTimeLength",width:100,formatter:function(e,f,g){if(!parseInt(g.bnoRecordCount)){return 0;
}return DateUtils.toChineseTime(parseFloat(parseInt(g.avgRingTimeLength)/parseInt(g.bnoRecordCount)).toFixed(0));}},{modelName:"avgLinkedTimeLength",name:"avgLinkedTimeLength",index:"avgLinkedTimeLength",width:100,formatter:function(e,f,g){if(!parseInt(g.agentLinkedCount)){return 0;
}return DateUtils.toChineseTime(parseFloat(parseInt(g.linkedTotalTimeLength)/parseInt(g.agentLinkedCount)).toFixed(0));}},{modelName:"avgDealTimeLength",name:"avgDealTimeLength",index:"avgDealTimeLength",width:100,formatter:function(e,f,g){if(!parseInt(g.agentLinkedCount)){return 0;
}return DateUtils.toChineseTime(parseFloat(parseInt(g.linkedTotalTimeLength)/parseInt(g.agentLinkedCount)).toFixed(0));}},{modelName:"maxAcdTimeLength",name:"maxAcdTimeLength",index:"maxAcdTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"maxWaitingTimeLength",name:"maxWaitingTimeLength",index:"maxWaitingTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"maxLinkedTimeLength",name:"maxLinkedTimeLength",index:"maxLinkedTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},{modelName:"maxAcdGiveupTimeLength",name:"maxAcdGiveupTimeLength",index:"maxAcdGiveupTimeLength",width:100,formatter:function(e,f,g){return DateUtils.toChineseTime(e);
}},],beforeProcessing:function(e){b.footData=e.footData;},gridComplete:function(){$(CallInDataStatisticsReport._CONS_.GRID).closest(".ui-jqgrid-bdiv").css({"overflow-x":"scroll"});
if(b.footData){var e=b.footData;$(CallInDataStatisticsReport._CONS_.GRID).footerData("set",{bnoNumber:"总计:",bnoRecordCount:e.bnoRecordCount,ivrTotalCount:e.ivrTotalCount,ivr2AgentCount:e.ivr2AgentCount,agentLinkedCount:e.agentLinkedCount,ivrGiveupCount:e.ivrGiveupCount,acdGiveupCount:e.acdGiveupCount,ringGiveupCount:e.ringGiveupCount,tenSecondCount:e.tenSecondCount,linkedIn20SecondCount:e.linkedIn20SecondCount,ivrTotalTimeLength:DateUtils.toChineseTime(e.ivrTotalTimeLength),linkedTotalTimeLength:DateUtils.toChineseTime(e.linkedTotalTimeLength),waitingTotalTimeLength:DateUtils.toChineseTime(e.waitingTotalTimeLength),acdTotalTimeLenth:DateUtils.toChineseTime(e.acdTotalTimeLenth),serviceTotalTimeLength:DateUtils.toChineseTime(e.serviceTotalTimeLength),answerTimeLength:DateUtils.toChineseTime(e.answerTimeLength),acdGiveTImeLenght:DateUtils.toChineseTime(e.acdGiveTImeLenght),avgRingTimeLength:DateUtils.toChineseTime(e.avgRingTimeLength),avgLinkedTimeLength:DateUtils.toChineseTime(e.avgLinkedTimeLength),avgDealAfterLinkedTimeLength:DateUtils.toChineseTime(e.avgDealAfterLinkedTimeLength),avgDealTimeLength:DateUtils.toChineseTime(e.avgDealTimeLength),maxAcdTimeLength:DateUtils.toChineseTime(e.maxAcdTimeLength),maxWaitingTimeLength:DateUtils.toChineseTime(e.maxWaitingTimeLength),maxLinkedTimeLength:DateUtils.toChineseTime(e.maxLinkedTimeLength),maxAcdGiveupTimeLength:DateUtils.toChineseTime(e.maxAcdGiveupTimeLength),},false);
}},});}};