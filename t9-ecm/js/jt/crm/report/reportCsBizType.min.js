$(function(){var a=new ReportCsBizType();a.init();});function ReportCsBizType(){this.hadInit=false;this.isEdit=false;this.isFormDataChange=false;}ReportCsBizType._CONS_={LIST_DATA_URL:ctx+"/crm/report/reportCsBizType/listData.htm",EMPLOYEE_LIST_URL:ctx+"/crm/ou/employee/listEmployees.htm",EXPORT_URL:ctx+"/crm/report/reportCsBizType/exportExcel.htm",EDIT_FORM_ID:"reportCsBizTypeForm",GRID:"#reportCsBizTypeGrid",PAGER:"#reportCsBizTypePager"};
ReportCsBizType.prototype={init:function(d){var a=this;if(!this.hadInit){this.hadInit=true;if(d==null||typeof d==undefined){d={};}var c=a._getQueryString("employeeId");
d.belongEmployee=c;var b=decodeURIComponent(a._getQueryString("bizType"));d.bizType=b;var e=a._getQueryString("createTime");d.Q__D__BW__create_time_=e;
this._initJqgrid(d);}},_getQueryString:function(b){var c=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");var a=decodeURI(window.location.search);var d=a.substr(1).match(c);
if(d!=null){return unescape(d[2]);}return null;},_initJqgrid:function(a){if(a==null||typeof a==undefined){a={};}$(ReportCsBizType._CONS_.GRID).JTJqgrid({url:ReportCsBizType._CONS_.LIST_DATA_URL,postData:a,multiselect:false,rowNum:-1,footerrow:true,sortable:true,rownumbers:false,colNames:["部门","员工","客户","客户分类","创建时间"],colModel:[{name:"groupName",index:"group_key_",sortable:false,width:100},{name:"employeeName",index:"employee_name_",sortable:false,width:100,formatter:function(b,c,d){if(d.employeeAid){return d.employeeName+":"+d.employeeAid;
}return d.employeeName;}},{name:"csName",index:"cs_name_",sortable:false,width:100,formatter:function(b,c,d){if(d.csCode){return d.csName+":"+d.csCode;
}return d.csName;}},{name:"csBizType",index:"cs_biz_type_",sortable:false,width:120},{name:"createTimeStr",index:"create_time_",sortable:false,width:100}],gridComplete:function(){var b=$(ReportCsBizType._CONS_.GRID).jqGrid("getGridParam","records");
$(ReportCsBizType._CONS_.GRID).jqGrid("footerData","set",{"groupName":"总计：<span style='color:red;'>"+b+"</span>条","csBizType":"<span style='color:red;'>"+b+"</span>"});
},});}};