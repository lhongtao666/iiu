$(function(){var a=new LogisticsStatReportDetail();a.init();});function LogisticsStatReportDetail(){this.hadInit=false;this.isEdit=false;}LogisticsStatReportDetail._CONS_={LIST_DATA_URL:ctx+"/crm/report/logisticsStatReport/logisticsStatDetail.htm",DETAIL_CS_PAGE_URL:ctx+"/crm/cs/csEntity/detail.htm",FIND_BY_SONO_URL:ctx+"/ec/salesorder/soEntity/findCsBySoNo.htm",SO_DETAIL_PAGE_URL:ctx+"/ec/salesorder/soEntity/detail.htm",GRID:"#logisticsStatReportDetailGrid",PAGER:"#logisticsStatReportDetailPager"};
LogisticsStatReportDetail.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;this._bindEventHander();a._initJqgrid();$(".timeRange").text("时间: "+timeStart+" 至 "+timeEnd);
}},_bindEventHander:function(){$("body").on("click",".soTab",function(){var b=$(this).attr("value");var c=$(this).attr("valueCsName");var a=LogisticsStatReportDetail._CONS_.FIND_BY_SONO_URL;
JTTabUtils.addOrRefreshTab(LogisticsStatReportDetail._CONS_.SO_DETAIL_PAGE_URL+"?soNo="+b,c+"的订单明细");});$("body").on("click",".csTab",function(){var a=$(this).attr("value");
var c=$(this).attr("valueCsName");var b=$(this).attr("valueCsId");if(c.length>4){c="*"+c.substring(c.length-3,c.length);}JTTabUtils.addOrRefreshTab(LogisticsStatReportDetail._CONS_.DETAIL_CS_PAGE_URL+"?csId="+b,"客户["+c+"]明细");
});},_initJqgrid:function(){var a=this;var c={};var b="";if(timeStart){b=timeStart+" 00:00:00";}if(timeEnd){b+=","+timeEnd+" 23:59:59";}c="Q__S__EQ__ship.sc_code="+scCode;
c+="&Q__S__IN__entity.status_="+status;if(b!=""){c+="&Q__D__BW__ship.create_time_="+b;}if(groupId!=""){c+="&Q__S__EQ__entity.group_id_="+groupId;}$(LogisticsStatReportDetail._CONS_.GRID).JTJqgrid({url:LogisticsStatReportDetail._CONS_.LIST_DATA_URL,postData:c,multiselect:false,footerrow:true,rowNum:-1,colNames:["订单编号","客户编号","下单时间","订单金额","已收","代收","快递单号","发货日期","签收时间"],colModel:[{name:"soNo",width:60,sortable:false,formatter:function(d,e,f){return"<a href='#' class='soTab' value='"+f.soNo+"' valueCsName= '"+f.csName+"'>"+f.soNo+"</a>";
}},{name:"csCode",width:60,sortable:false,formatter:function(d,e,f){if(f.csCode){return f.csName+":"+"<a href='#'  class='csTab' value='"+f.csCode+"' valueCsName = '"+f.csName+"' valueCsId = '"+f.csId+"'>"+f.csCode+"</a>";
}}},{name:"placeTime",width:60,sortable:false},{name:"totalAmount",width:60,sortable:false},{name:"payedAmount",width:60,sortable:false},{name:"proxyAmount",width:60,sortable:false},{name:"scTrackingNo",width:60,sortable:false},{name:"shipTime",width:60,sortable:false},{name:"completeTime",width:60,sortable:false}]});
}};