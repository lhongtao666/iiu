$(function(){var a=new CsComplainType();a.init();});function CsComplainType(){this.hadInit=false;}CsComplainType._CONS_={LIST_DATA_URL:ctx+"/crm/report/csReport/getComplainTypeReport.htm",GRID:"#complainTypeListGrid",PAGER:"#complainTypePager",};
CsComplainType.prototype={init:function(b){var a=this;if(!a.hadInit){ReportDateUtil.initDate(".report-content");$("select[name=yearSearch]").val(new Date().getFullYear());
$("select[name=monthSearch]").val(new Date().getMonth()+1);a.hadInit=true;a._bindEventHander();ComplainTypeOption.getTypeOption(function(c){$("#complainTypeDiv").append(c);
});var b=a._handleParams();a._initJqgrid(b);}},_bindEventHander:function(){var a=this;$("#complainTypeSearchForm").on("click",".findByCondition",function(){var b=a._handleParams();
a.reloadJqgrid(b);});},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(CsComplainType._CONS_.GRID,a);},_initJqgrid:function(b){var a=this;$(CsComplainType._CONS_.GRID).JTJqgrid({postData:b,pager:CsComplainType._CONS_.PAGER,url:CsComplainType._CONS_.LIST_DATA_URL,multiselect:false,colNames:["投诉类型","投诉数量","投诉比例","完成数量","完成率","及时完成数量","及时完成率","全额退款","部分退款","退货","换货"],colModel:[{name:"complainType",index:"complainType_",width:200,sortable:false},{name:"complainNumber",width:150,index:"complainNumber_",sortable:false},{name:"complainRate",width:150,index:"complainRate_",sortable:false},{name:"completeNumber",width:120,index:"completeNumber_",sortable:false},{name:"completeRate",width:120,index:"completeRate_",sortable:false},{name:"timelyCompleteNumber",width:180,index:"timelyCompleteNumber_",sortable:false},{name:"timelyCompleteRate",index:"timelyCompleteRate_",width:150},{name:"fullRefund",index:"fullRefund_",width:120},{name:"fundPart",index:"fundPart_",width:120},{name:"refund",index:"refund_",width:120},{name:"barter",index:"barter_",width:120},]});
},_handleParams:function(b){if(b==null||typeof b==undefined){b={};}var h=$("#complainTypeDiv").find("option:selected").val();if("allType"!=h){var f=$("#complainTypeDiv").find("option:selected").attr("secondcateid");
var a=$("#complainTypeDiv").find("option:selected").attr("firstcateid");var g=new Array();if(!f||f==null){var c=$("#complainTypeDiv option");$(c).each(function(){var j=$(this).attr("firstcateid");
if(j==a){g.push($(this).val());}});}else{g.push(f);}b.typeArray=g;}var i=$("#yearSearch").val();var d=$("#monthSearch").val();if(d.length==1){d="0"+d;}var e=i+"-"+d;
b.createTimeYm=e;return b;},};