$(function(){function b(){var c=null;var d=null;}b._CONS_={INDEX_URL:ctx+"/crm/cs/csEntity/getTypePieData.htm"};b.prototype={init:function(d){var c=this;
c._bindEventHander();c._getData("first");},_bindEventHander:function(){var c=this;$(document).on("click","[name=csType]",function(){var d=$(this).val();
c._getData(d);});},createReport:function(f){var d=this;$("#noCsTip").hide();$("#pieReportDiv").show();$("#pieReportDiv").empty().append("<div id='csTypeStatisticReportChart' style='height:240px;'></div>");
var c=new Report();for(var e=0;e<f.length;e++){f[e].type=f[e].type+"("+f[e].percent+"%)";}c.data=f;c.setLegend(false,null,"type");c.initSeries([{type:"pie",colName:"count",legendName:"数量"}],"type");
c._initChart("csTypeStatisticReportChart","");},_getData:function(c){var d=this;$.ajax({type:"GET",url:b._CONS_.INDEX_URL+"?type="+type+"&currentPositionId="+currentPositionId,data:"",contentType:"application/json",dataType:"json",success:function(e){if(e){d.firstTypeStatistics=e.firstTypeStatistics;
d.secondTypeStatistics=e.secondTypeStatistics;if("first"==c){if(d.firstTypeStatistics&&d.firstTypeStatistics.length>0){d.createReport(d.firstTypeStatistics);
}else{$("#noCsTip").show();$("#pieReportDiv").hide();}}else{if(d.secondTypeStatistics&&d.secondTypeStatistics.length>0){d.createReport(d.secondTypeStatistics);
}else{$("#noCsTip").show();$("#pieReportDiv").hide();}}}else{$("#noCsTip").show();$("#pieReportDiv").hide();}},error:function(e){alert(e);}});}};console.log("init ");
var a=new b();a.init();});