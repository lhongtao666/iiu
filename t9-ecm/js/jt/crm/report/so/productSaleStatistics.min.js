$(function(){var a=new ProductSaleStatistics();a.init();});function ProductSaleStatistics(){this.hadInit=false;this.isEdit=false;this.isHide=false;}ProductSaleStatistics._CONS_={LIST_DATA:ctx+"/crm/report/productSaleStatistics/listData.htm",GRID:"#productSaleStatisticsListGrid",PAGER:"#productSaleStatisticsPager"};
ProductSaleStatistics.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;a._bindEventHander();$("#timeTypeSearch").val("month");ReportDateUtil.initDate(".report-content");
$("#timeTypeSearch").change();a._buildGroupOption();var b=a._handleParams();a._initJqgrid(b);}},_bindEventHander:function(){var a=this;$(".report-content").on("click","#searchBtn",function(){a.setSearchShow();
a.reloadJqgrid(a.toPostParam($(this).closest("form").serialize()));a._getData(a.toPostParam($(this).closest("form").serialize()));return false;});$(".partySearchImg").on("click",function(){var b=$("#prodTypeSearch").val();
var d="category";if(b=="point"){d="prodPoint";}var e={options:{initParentId:"0",selectedMulti:false,noShowIds:"1",rootKey:d},callBack:function(f){if(f.length>0){$("#prodDetType").val(f[0].name);
$("#cateIdSearch").val(f[0].id);}}};var c=new ProdTypeSelect();c.init(e);});$(".productSaleStatisticsSearchBtn").on("click",function(){var b=a._handleParams();
a.reloadJqgrid(b);});},_initJqgrid:function(a){$(ProductSaleStatistics._CONS_.GRID).JTJqgrid({url:ProductSaleStatistics._CONS_.LIST_DATA,postData:a,pager:ProductSaleStatistics._CONS_.PAGER,colNames:["sku编码","sku简称","确认/金额","发货/金额","收货/金额","上架时间",],colModel:[{name:"code",index:"code",width:120},{name:"shortName",index:"shortName",width:120},{name:"cofirmPrice",index:"cofirmPrice",width:120},{name:"deliverPrice",index:"deliverPrice",width:120},{name:"consigneePrice",index:"consigneePrice",width:120},{name:"onSaleTime",index:"onSaleTime",width:120},]});
$(window).bind("resize",function(){$(ProductSaleStatistics._CONS_.GRID).setGridWidth($(".report-content").width()-4);});},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(ProductSaleStatistics._CONS_.GRID,a);
},_loadProdCateTree:function(){var a=this;var b={treeId:"prodEntityCateTree",cateTypeKey:"product_catalog",rootKey:"category",onClick:function(c){var d=c.id;
$("#cateIdSearch").val(d);}};ZtreeUtils.init(b);},_buildGroupOption:function(){GroupUtils.loadGroupOptions({container:"groupSearch",nolimit:type!="org"});
},_handleParams:function(d){if(d==null||typeof d==undefined){d={};}var b=ReportDateUtil.getDateRangeStr();d.createTimeRangeStr=b;var a=$("#cateIdSearch").val();
var c=$("#groupSearch").val();if(a){d.cateIdSearch=a;}if(c){d.groupSearch=c;}return d;}};