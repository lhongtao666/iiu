$(function(){var a=new ExpressRateReport();a.init();});function ExpressRateReport(){this.hadInit=false;}ExpressRateReport._CONS_={GRID:"#expressRateReportGrid",PAGER:"#expressRateReportPager",URL_LIST_DATA:ctx+"/crm/report/reportEntity/expressRateReport.htm",};
ExpressRateReport.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initJqgrid(a);this._initSelect();}},_initSelect:function(){},_bindEventHander:function(){var a=this;
$("body").on("click","[name=groupName]",function(){GroupUtils.selectGroupTreeBox({selectedGroupId:$('input[name="groupId"]').val(),container:"groupName",fn:function(c,b){$('input[name="groupId"]').val(c);
$('input[name="groupKey"]').val(b);}});});$("body").on("click",".export",function(){if(!$('input[name="startTime"]').val()){var b=new Date();var c=b.currentDate()+" 00:00:00";
$('input[name="startTime"]').val(c);}var d=$("#searchForm").closest("form").serialize();FormUtils.submit(ctx+"/crm/report/reportEntity/exportExpressRateReport.htm",d,function(e){if(e.success){DialogUtils.success(msgCode.SUCCESS,e.msg);
}else{DialogUtils.error(msgCode.ERROR,e.msg);}},function(){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});});$(".list_wrapper").on("click",".saleStockSearch",function(){if(!$('input[name="startTime"]').val()){var b=new Date();
var c=b.currentDate()+" 00:00:00";$('input[name="startTime"]').val(c);}var d=$(this).closest("form").serialize();a.reloadJqgrid(d);});$("#searchForm").on("keypress",function(b){if(b.keyCode=="13"){$(".saleStockSearch").trigger("click");
}});$("body").on("click",".openDetail",function(){var e=$(this).attr("startTime");var c=$(this).attr("endTime");var b=$(this).attr("groupKey");var d=$(this).attr("type");
var g="明细";if("deban"===d){g="德邦快递";}else{if("shunfeng"===d){g="顺丰快递";}else{if("ems"===d){g="EMS";}else{if("other"===d){g="其它";}}}}var f="startTime="+e+"&endTime="+c+"&groupKey="+b+"&type="+d;
JTTabUtils.addOrRefreshTab(ctx+"/crm/report/reportEntity/openSaleStockDetail.htm?"+f,g);});},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(ExpressRateReport._CONS_.GRID,a);
},_decorateData:function(c,e,f){var b=e.split("/");var d=b[0];var a=b[1];return"<a startTime='"+f.startTime+"' groupKey='"+(f.groupKey?f.groupKey:"")+"' href='javascript: void(0);' endTime='"+f.endTime+"' type='"+c+"' class='openDetail'>"+"<span style='color:red;'>"+d+"</span>"+"/<span style='color:blue;'>"+a+"</span>"+"</a>";
},_initJqgrid:function(d){var b=this;if(d==null||typeof d==undefined){d={};}var a=new Date();var c=a.currentDate()+" 00:00:00";$('input[name="startTime"]').val(c);
$(ExpressRateReport._CONS_.GRID).JTJqgrid({url:ExpressRateReport._CONS_.URL_LIST_DATA,postData:{startTime:c,},pager:ExpressRateReport._CONS_.PAGER,multiselect:false,colNames:["德邦快递","顺丰快递","EMS","其它",],colModel:[{name:"debanExpressCount",width:120,sortable:false,formatter:function(g,f,e){return b._decorateData("deban",e.debanExpressRate,e);
}},{name:"shunfengExpressCount",width:120,sortable:false,formatter:function(g,f,e){return b._decorateData("shunfeng",e.shunfengExpressRate,e);}},{name:"emsExpressCount",width:120,sortable:false,formatter:function(g,f,e){return b._decorateData("ems",e.emsExpressRate,e);
}},{name:"otherExpressCount",width:120,sortable:false,formatter:function(g,f,e){return b._decorateData("other",e.otherExpressRate,e);}},],gridComplete:function(){console.log("complete");
},});console.log("end");}};