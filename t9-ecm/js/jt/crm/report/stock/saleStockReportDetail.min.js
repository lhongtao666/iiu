function SaleStockReportDetail(){this.hadInit=false;}SaleStockReportDetail._CONS_={GRID:"#saleStockReportDetailGrid",PAGER:"#saleStockReportDetailPager",SO_LIST_URL:ctx+"/crm/report/reportEntity/getSaleStockDetail.htm",DETAIL_PAGE_URL:ctx+"/ec/salesorder/soEntity/detail.htm",DETAIL_CS_PAGE_URL:ctx+"/crm/cs/csEntity/detail.htm",};
SaleStockReportDetail.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initJqgrid(a);}},_bindEventHander:function(){var a=this;
$("body").on("click",".soTab",function(){var c=$(this).attr("csNameVal");var b=$(this).attr("value");JTTabUtils.addOrRefreshTab(SaleStockReportDetail._CONS_.DETAIL_PAGE_URL+"?soNo="+b,c+"的订单明细");
});$("body").on("click",".csTab",function(){var c=$(this).text();var b=$(this).attr("value");if(c.length>4){c="*"+c.substring(c.length-3,c.length);}JTTabUtils.addOrRefreshTab(SaleStockReportDetail._CONS_.DETAIL_CS_PAGE_URL+"?csId="+b,"客户["+c+"]明细");
});},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(SaleStockReportDetail._CONS_.GRID,a);},_initJqgrid:function(a){$(SaleStockReportDetail._CONS_.GRID).JTJqgrid({url:SaleStockReportDetail._CONS_.SO_LIST_URL,postData:a,pager:SaleStockReportDetail._CONS_.PAGER,multiselect:false,footerrow:true,hidegrid:false,colNames:["订单编号","客户","订单类型","订单状态","货款方式","产品总数量","产品金额","总金额","渠道","下单人","下单时间","发货时间"],colModel:[{name:"soNo",width:90,index:"entity.so_no_",formatter:function(b,c,d){if(d.soNo!=null&&d.soNo!=""){return"<a href='#'  class='soTab' csNameVal ='"+d.csName+"' value='"+d.soNo+"' >"+d.soNo+"</a>";
}return d.csName;}},{name:"csName",width:90,index:"cs.name_",formatter:function(b,c,d){if(d.csName!=null&&d.csName!=""){return"<a href='#'  class='csTab' value='"+d.csId+"' >"+d.csName+"</a>";
}return d.csName;}},{name:"soType",width:90,index:"entity.so_type_",formatter:function(b,d,e){var c=e.soType;if(c=="firstBuy"){c="<span>初购</span>";}else{if(c=="repeatBuy"){c="<span>复购</span>";
}else{if(e.soType=="common"){c="<span>普通订单</span>";}else{if(e.soType=="change"){c="<span>换货单</span>";}else{if(e.soType=="repeat"){c="<span>重发单</span>";
}else{if(e.soType=="point"){c="<span>积分订单</span>";}else{if(e.soType=="twice"){c="二次单";}}}}}}}return c;}},{name:"status",width:90,index:"entity.status_",formatter:function(b,d,e){var c=e.status;
if(e.status=="awaiting_pay"){c="<span>等待支付</span>";}else{if(e.status=="awaiting_post"){c="<span>待提交</span>";}else{if(e.status=="awaiting_comfirm"){c="<span>待审核</span>";
}else{if(e.status=="comfirm"){c="<span>待发货</span>";}else{if(e.status=="shipping"){c="<span>已发货</span>";}else{if(e.status=="complete"){c="<span>已签收</span>";
}else{if(e.status=="close"){c="<span>订单关闭</span>";}else{if(e.status=="close_reject"){c="<span>拒收</span>";}else{if(e.status=="close_lost"){c="<span>包裹丢失</span>";
}}}}}}}}}return c;}},{name:"cashType",width:90,index:"entity.cash_type_",formatter:function(b,d,e){var c=e.cashType;if(e.cashType=="pay"){c="<span>款到发货</span>";
}else{if(e.cashType=="pay_sub"){c="<span>支付订金</span>";}else{if(e.cashType=="cod"){c="<span>货到付款</span>";}else{if(e.cashType=="free"){c="<span>免费已付</span>";
}else{if(e.cashType=="green"){c="<span>绿色通道</span>";}}}}}return c;}},{name:"prodQty",width:90,index:"entity.prod_qty_"},{name:"prodAmount",width:90,index:"entity.prod_amount_"},{name:"totalAmount",width:90,index:"entity.total_amount_"},{name:"channelName",width:80},{name:"placerName",width:90,index:"entity.placer_id_"},{name:"createTime",width:120,formatter:function(b){return DateUtils.miniTime(b);
}},{name:"shipTime",index:"entity.ship_time_",width:120,formatter:function(b){return DateUtils.miniTime(b);}},],});},};