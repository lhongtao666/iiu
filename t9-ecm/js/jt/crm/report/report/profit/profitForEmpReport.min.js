$(function(){var a=new PerformanceForEmpReport();a.init();});function PerformanceForEmpReport(){this.hadInit=false;this.isEdit=false;this.sortColumn="";
this.sortorder="";this.beginDate=beginDate;this.endDate=endDate;}PerformanceForEmpReport._CONS_={LIST_DATA_URL:ctx+"/ec/rp/reportProfit/listData.htm",EMPLOYEE_LIST_URL:ctx+"/crm/ou/employee/listEmployees.htm",};
PerformanceForEmpReport.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;a._buildEmployeeOption();a._bindEventHander();a._loadData();
}},_bindEventHander:function(){var a=this;$("#selectEmployee").on("change",function(){var b="&Q__S__EQ__employee_id_="+$(this).val();a._loadData(b);});
window.onmessage=function(f){var c=JSON.parse(f.data);if(c&&c.messageType=="reloadIframe"){var b=c.beginDate;var d=c.endDate;a.beginDate=b;a.endDate=d;
a._loadData();}};$(".showMoreInfo").on("click",function(){JTTabUtils.addOrRefreshTab(ctx+"/crm/report/performanceForEmpReport/list.htm?reportKey=no","员工业绩统计");
});},_buildEmployeeOption:function(a,b){FormUtils.loadData(PerformanceForEmpReport._CONS_.EMPLOYEE_LIST_URL,function(d){var e=new StringBuffer();for(var c=0;
c<d.length;c++){if(c==0){e.append("<option selected='selected' value='"+d[c].id+"'>"+d[c].name+":"+d[c].aid+"</option>");}else{e.append("<option value='"+d[c].id+"'>"+d[c].name+":"+d[c].aid+"</option>");
}}$("#selectEmployee").empty().append(e.toString());});},_loadData:function(a){a+="&Q__D__BW__create_time_ ="+this.beginDate+","+this.endDate;FormUtils.submit(PerformanceForEmpReport._CONS_.LIST_DATA_URL,a,function(c){if(c.rows.length<=0){$("#profitForEmpReportContent #newCsCount").text(0);
$("#profitForEmpReportContent #auditCount").text(0);$("#profitForEmpReportContent #auditAmount").text(0);$("#profitForEmpReportContent #signCount").text(0);
$("#profitForEmpReportContent #signAmount").text(0);$("#profitForEmpReportContent #placeCount").text(0);$("#profitForEmpReportContent #placeAmount").text(0);
$("#profitForEmpReportContent #shipCount").text(0);$("#profitForEmpReportContent #shipAmount").text(0);$("#profitForEmpReportContent #rejectCount").text(0);
$("#profitForEmpReportContent #rejectAmount").text(0);}for(var b=0;b<c.rows.length;b++){if(c.rows[b]!=""||c.rows[b]!=null||c.rows[b]!=undefined){$("#profitForEmpReportContent #newCsCount").text(c.rows[b].newCsCount);
$("#profitForEmpReportContent #auditCount").text(c.rows[b].auditCount.toFixed(1));$("#profitForEmpReportContent #auditAmount").text(parseFloat(c.rows[b].auditAmount).toFixed(2));
$("#profitForEmpReportContent #signCount").text(c.rows[b].signCount.toFixed(1));$("#profitForEmpReportContent #signAmount").text(parseFloat(c.rows[b].signAmount).toFixed(2));
$("#profitForEmpReportContent #placeCount").text(c.rows[b].placeCount.toFixed(1));$("#profitForEmpReportContent #placeAmount").text(parseFloat(c.rows[b].placeAmount).toFixed(2));
$("#profitForEmpReportContent #shipCount").text(c.rows[b].shipCount.toFixed(1));$("#profitForEmpReportContent #shipAmount").text(parseFloat(c.rows[b].shipAmount).toFixed(2));
$("#profitForEmpReportContent #rejectCount").text(c.rows[b].rejectCount.toFixed(1));$("#profitForEmpReportContent #rejectAmount").text(parseFloat(c.rows[b].rejectAmount).toFixed(2));
}}});},};