$(function(){var a=new ProfitTimeReport();a.init();});function ProfitTimeReport(){this.hadInit=false;this.isEdit=false;this.beginDate=beginDate;this.endDate=endDate;
}ProfitTimeReport._CONS_={PIE_REPORT_URL:ctx+"/ec/rp/reportProfit/profitTimePieData.htm",};ProfitTimeReport.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;
a._bindEventHander();a._getData(a.toPostParam());}},_getData:function(a){var b=this;$.ajax({type:"GET",url:ProfitTimeReport._CONS_.PIE_REPORT_URL,data:a,contentType:"application/json",dataType:"json",success:function(c){b.createBarReport(c);
},error:function(c){DialogUtils.error(msgCode.ERROR,c);}});},createBarReport:function(c){var a=new Report();for(var b=0;b<c.length;b++){c[b].timeFrame=c[b].timeFrame+"-"+(c[b].timeFrame+1)+"点";
}a.data=c;a.setLegend(true,null,"timeFrame");a.setBarSeriesStyle(true,"right","{c}");a.setGridX(100);a.initSeries([{type:"bar",colName:"auditAmount",legendName:"审单金额(元)"},{type:"bar",colName:"newCsCount",legendName:"新进客户(个)"},{type:"bar",colName:"timeFrame",legendName:"时段"}],"timeFrame",null,null);
a._initChart("profitTimeReportChart","业绩时段分布图");},_bindEventHander:function(){var a=this;$(".showMoreInfo").on("click",function(){JTTabUtils.addOrRefreshTab(ctx+"/crm/report/profitTimeReport/list.htm?reportKey=no","业绩时段统计");
});window.onmessage=function(f){var c=JSON.parse(f.data);if(c&&c.messageType=="reloadIframe"){var b=c.beginDate;var d=c.endDate;a.beginDate=b;a.endDate=d;
a._getData(a.toPostParam());}};},toPostParam:function(){var a={};a["Q__D__BW__create_time_"]=this.beginDate+","+this.endDate;return a;}};