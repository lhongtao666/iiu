$(function(){var a=new CsLevelStatistic();a.init();});function CsLevelStatistic(){this.hadInit=false;this.isEdit=false;this.soTypeCatePos=null;this.type="pie";
this.beginDate=beginDate;this.endDate=endDate;}CsLevelStatistic._CONS_={LIST_URL:ctx+"/crm/report/levelStatisticReport/listData.htm",};CsLevelStatistic.prototype={init:function(b){var a=this;
if(!a.hadInit){a.hadInit=true;a._bindEventHander();a._initJqgrid();}},_initJqgrid:function(){var b=$("input[name=groupId]").val();if(b){b=b;}var c=$("#selectMember option:selected").text();
var a=CsLevelStatistic._CONS_.LIST_URL+"?authPartyName="+b+"&Q__D__BW__create_time_="+this.beginDate+","+this.endDate;FormUtils.loadData(a,function(d){var h=new StringBuffer();
var g=$("#selectMember option:selected").val();for(var f=0;f<1;f++){if(d[f].employeePos.length!=0){if(d[f].employeePos.length<11){for(var e=0;e<d[f].employeePos.length;
e++){h.append("<tr style='font-size:15px;'>").append("<td>"+d[f].name+"</td>");h.append("<td>"+d[f].employeePos[e].aid+":"+d[f].employeePos[e].name+"</td>");
if(g=="One"){h.append("<td class='defaultLevel'>"+d[f].employeePos[e].levelCountOne+"</td>");}else{if(g=="Two"){h.append("<td >"+d[f].employeePos[e].levelCountTwo+"</td>");
}else{if(g=="Three"){h.append("<td >"+d[f].employeePos[e].levelCountThree+"</td>");}else{if(g=="Four"){h.append("<td >"+d[f].employeePos[e].levelCountFour+"</td>");
}else{if(g=="Five"){h.append("<td >"+d[f].employeePos[e].levelCountFive+"</td>");}else{if(g=="Six"){h.append("<td >"+d[f].employeePos[e].levelCountSix+"</td>");
}else{if(g=="Seven"){h.append("<td >"+d[f].employeePos[e].levelCountSeven+"</td>");}}}}}}}h.append("</tr>");}}else{for(var e=0;e<11;e++){h.append("<tr style='font-size:15px;'>").append("<td>"+d[f].name+"</td>");
h.append("<td>"+d[f].employeePos[e].aid+":"+d[f].employeePos[e].name+"</td>");if(g=="One"){h.append("<td class='defaultLevel'>"+d[f].employeePos[e].levelCountOne+"</td>");
}else{if(g=="Two"){h.append("<td >"+d[f].employeePos[e].levelCountTwo+"</td>");}else{if(g=="Three"){h.append("<td >"+d[f].employeePos[e].levelCountThree+"</td>");
}else{if(g=="Four"){h.append("<td >"+d[f].employeePos[e].levelCountFour+"</td>");}else{if(g=="Five"){h.append("<td >"+d[f].employeePos[e].levelCountFive+"</td>");
}else{if(g=="Six"){h.append("<td >"+d[f].employeePos[e].levelCountSix+"</td>");}else{if(g=="Seven"){h.append("<td >"+d[f].employeePos[e].levelCountSeven+"</td>");
}}}}}}}h.append("</tr>");}}}}$("#csLevelStatisticTbody").empty().append(h.toString());});},_bindEventHander:function(){var a=this;window.onmessage=function(f){var c=JSON.parse(f.data);
if(c&&c.messageType=="reloadIframe"){var b=c.beginDate;var d=c.endDate;a.beginDate=b;a.endDate=d;a._initJqgrid();}};$("#groupName").on("click",function(){var b={isMultiple:0,selectedGroupId:$("#groupId").val(),container:"groupName",nolimit:true,positionType:"statistics,dept_manager",fn:function(c){$("#groupId").val(c);
a._initJqgrid();}};GroupUtils.selectGroupTreeBox(b);});$(document).on("change","#selectMember",function(){$("#choseMember").empty().text($("#selectMember option:selected").text());
a._initJqgrid();});$(document).on("click",".chk",function(){var b=$("#groupId").val();a._initJqgrid(b);});$("body").on("click","#searchBtn",function(){a._initJqgrid();
return false;});$(".showMoreInfo").on("click",function(){JTTabUtils.addOrRefreshTab(ctx+"/crm/report/csReport/levelStatistic.htm?reportKey=no","客户级别统计报表");
});},};