$(function(){var a=new CsSleepList();a.init();});function CsSleepList(){this.hadInit=false;this.isEdit=false;this.soTypeCatePos=null;this.type="pie";this.beginDate=beginDate;
this.endDate=endDate;}CsSleepList._CONS_={LIST_URL:ctx+"/crm/report/csSleepList/listData.htm",};CsSleepList.prototype={init:function(b){var a=this;if(!a.hadInit){a.hadInit=true;
a._bindEventHander();a._initJqgrid();}},_initJqgrid:function(){var a="";var c="";var b=$("input[name=groupId]").val();if(b){c=b;}a=CsSleepList._CONS_.LIST_URL+"?type="+type+"&reportType="+reportType+"&groupId="+c;
FormUtils.loadData(a,function(e){var h=new StringBuffer();var d=e.rows;if(d.length<11){for(var f=0;f<d.length;f++){var g=d[f];h.append("<tr style='font-size:15px;'>").append("<td>").append(g.groupName).append("</td>").append("<td>").append(g.employeeName);
if((g.employeeName!=null&&g.employeeName!="")&&(g.employeeAid!=null&&g.employeeAid!="")){h.append("&nbsp;&nbsp;&nbsp;"+":"+"&nbsp;&nbsp;&nbsp;");}h.append(g.employeeAid).append("</td>");
h.append("<td>").append(g.csName+":"+g.csCode).append("</td>").append("<td>").append(g.sleepDays).append("</td>").append("<td >").append(g.soCount).append("</td>").append("</tr>");
}}else{for(var f=0;f<11;f++){var g=d[f];h.append("<tr style='font-size:15px;'>").append("<td>").append(g.groupName).append("</td>").append("<td>").append(g.employeeName);
if((g.employeeName!=null&&g.employeeName!="")&&(g.employeeAid!=null&&g.employeeAid!="")){h.append("&nbsp;&nbsp;&nbsp;"+":"+"&nbsp;&nbsp;&nbsp;");}h.append(g.employeeAid).append("</td>");
h.append("<td>").append(g.csName+":"+g.csCode).append("</td>").append("<td>").append(g.sleepDays).append("</td>").append("<td >").append(g.soCount).append("</td>").append("</tr>");
}}$("#csSleepListGrid").find("tbody").empty().append(h.toString());});},_bindEventHander:function(){var a=this;window.onmessage=function(f){var c=JSON.parse(f.data);
if(c&&c.messageType=="reloadIframe"){var b=c.beginDate;var d=c.endDate;a.beginDate=b;a.endDate=d;}};$("#groupName").on("click",function(){var b={isMultiple:0,selectedGroupId:$("#groupId").val(),container:"groupName",nolimit:true,positionType:"statistics,dept_manager",fn:function(c){$("#groupId").val(c);
a._initJqgrid();}};GroupUtils.selectGroupTreeBox(b);});$(document).on("click",".chk",function(){var b=$("#groupId").val();a._initJqgrid(b);});$("body").on("click","#searchBtn",function(){a._initJqgrid();
return false;});$(".showMoreInfo").on("click",function(){JTTabUtils.addOrRefreshTab(ctx+"/crm/report/csReport/sleepList.htm?reportKey=no","公司员工沉睡客户列表");
});},};