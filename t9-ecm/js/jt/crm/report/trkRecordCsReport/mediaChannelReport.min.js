$(function(){var a=new MediaChannelReport();a.init();});function MediaChannelReport(){this.hadInit=false;}MediaChannelReport._CONS_={GRID:"#mediaChannelReportGrid",PAGER:"#mediaChannelReportPager",URL_LIST_DATA:ctx+"/gl/cti/trkRecordCsReport/mediaChannelReport.htm",};
MediaChannelReport.prototype={init:function(a){if(!this.hadInit){this.hadInit=true;this._bindEventHander();this._initJqgrid(a);this._initSelect();}},_initSelect:function(){ChannelUtils.getOptions({container:"srcSearch",caption:"全部"});
},_bindEventHander:function(){var a=this;$("body").on("click",".export",function(){if(!$('input[name="startTime"]').val()){var b=new Date();var c=b.currentDate()+"";
$('input[name="startTime"]').val(c);}var d=$("#searchForm").closest("form").serialize();FormUtils.submit(ctx+"/gl/cti/trkRecordCsReport/exportMediaChannelReport.htm",d,function(e){if(e.success){DialogUtils.success(msgCode.SUCCESS,e.msg);
}else{DialogUtils.error(msgCode.ERROR,e.msg);}},function(){DialogUtils.error(msgCode.ERROR,msgCode.ERROR_MSG);});});$(".list_wrapper").on("click",".saleStockSearch",function(){if(!$('input[name="startTime"]').val()){var b=new Date();
var c=b.currentDate()+"";$('input[name="startTime"]').val(c);}var d=$(this).closest("form").serialize();a.reloadJqgrid(d);});$("#searchForm").on("keypress",function(b){if(b.keyCode=="13"){$(".saleStockSearch").trigger("click");
}});$("body").on("click",".openDetail",function(){});},_decorateData:function(c,e,f){var b=e.split("/");var d=b[0];var a=b[1];return"<a startTime='"+f.startTime+"' groupKey='"+(f.groupKey?f.groupKey:"")+"' href='javascript: void(0);' endTime='"+f.endTime+"' type='"+c+"' class='openDetail'>"+"<span style='color:red;'>"+d+"</span>"+"/<span style='color:blue;'>"+a+"</span>"+"</a>";
},reloadJqgrid:function(a){JTJqgridUtils.reloadJqgrid(MediaChannelReport._CONS_.GRID,a);},_initJqgrid:function(d){var b=this;if(d==null||typeof d==undefined){d={};
}var a=new Date();var c=a.currentDate()+"";$('input[name="startTime"]').val(c);$(MediaChannelReport._CONS_.GRID).JTJqgrid({url:MediaChannelReport._CONS_.URL_LIST_DATA,postData:{startTime:c,},rowNum:1000,pager:MediaChannelReport._CONS_.PAGER,multiselect:false,footerrow:true,colNames:["进线日期","新进客户","新进客户呼损","老客户进线","老客户呼损","非广告号客户进线呼损",],colModel:[{name:"name",width:120,sortable:false,formatter:function(f,e,g){return g.name;
}},{name:"allNewIncome",width:120,sortable:false,formatter:function(g,e,f){return f.allNewIncome;}},{name:"allNewLostIncome",width:120,sortable:false,formatter:function(g,e,f){return f.allNewLostIncome;
}},{name:"allOldIncome",width:120,sortable:false,formatter:function(g,e,f){return f.allOldIncome;}},{name:"allOldLostIncome",width:120,sortable:false,formatter:function(g,e,f){return f.allOldLostIncome;
}},{name:"allLostNotMediaChannel",width:120,sortable:false,formatter:function(g,e,f){return f.allLostNotMediaChannel;}},],});}};