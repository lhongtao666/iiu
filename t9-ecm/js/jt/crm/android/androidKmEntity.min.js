$(function(){});function AndroidKmEntity(){this.hadInit=false;this.layerDetail;}AndroidKmEntity._CONS_={QAENTITY_LISTDATA_URL:ctx+"/gl/qa/qaEntity/listData.htm",DETAILCONTENT_URL:ctx+"/gl/qa/qaEntity/detailContent.htm",};
AndroidKmEntity.prototype={init:function(b){if(!this.hadInit){this._bindEventHander();this._initKmList();var a=window.localStorage.getItem("closeCurrentArticleDocument");
if(!a){window.localStorage.setItem("closeCurrentArticleDocument","true");$(".androidKmEntityLayer").find("input[name=closeCurrentArticleDocument]").prop("checked",true);
}else{if("true"==a){$(".androidKmEntityLayer").find("input[name=closeCurrentArticleDocument]").prop("checked",true);}else{$(".androidKmEntityLayer").find("input[name=closeCurrentArticleDocument]").prop("checked",false);
}}}},_initKmList:function(a){if(!a){a="type=content&isWeixin=true";}FormUtils.submit(AndroidKmEntity._CONS_.QAENTITY_LISTDATA_URL,a,function(e){if(e.rows&&e.rows.length>0){var d=e.rows;
var c="";for(var b=0;b<d.length;b++){c+='<div class="panel panel-default">'+'<div class="panel-heading" role="tab" id="heading'+d[b].id+'">'+'<h4 class="panel-title">'+'<a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse'+d[b].id+'" aria-expanded="true" aria-controls="collapse'+d[b].id+'">'+d[b].question+"</a>"+"</h4>"+"</div>";
if(0==b){c+='<div id="collapse'+d[b].id+'" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading'+d[b].id+'">';}else{c+='<div id="collapse'+d[b].id+'" class="panel-collapse collapse " role="tabpanel" aria-labelledby="heading'+d[b].id+'">';
}c+='<div class="panel-body articleIntroduction" data-value="'+d[b].id+'">'+"<p >";pContentArr=d[b].content.split("</p>");c+=pContentArr[0].replace("<p>","");
c+="</p>"+"</div>"+"</div>"+"</div>";}$("#accordion").empty().append(c);}else{$("#accordion").empty();}});return false;},_bindEventHander:function(){var a=this;
$("#cateName").on("click",function(){var b={isMultiple:0,typeKey:"system",pKey:"qa",selectedCateIds:$("input[name='Q__S__EQ__cate_id_']").val(),container:"cateName",fn:function(c){$('input[name="Q__S__EQ__cate_id_"]').val(c);
}};CateUtils.selectCateTreeBox(b);$("#menuContentForCateContainer").width("180px");$("#menuContentForCate").css("width","");});$(".kmEntitySearch").on("click",function(){var b="Q__S__EQ__cate_id_="+$("input[name=Q__S__EQ__cate_id_]").val()+"&likeContent="+$("input[name=likeContent]").val()+"&type=content&isWeixin=true";
a._initKmList(b);});$("#kmEntitySearchForm").on("keyup",function(b){if(b.keyCode=="13"){$(".kmEntitySearch").trigger("click");}});$(document).on("click",".articleIntroduction",function(){var b=$(this).attr("data-value");
$(".articleIntroduction").attr("disabled",true);FormUtils.loadData(AndroidKmEntity._CONS_.DETAILCONTENT_URL+"?id="+b,function(c){$("input[name=id]").val(c.id);
$(".titleDetail").text(c.question);$(".timeDetail").text(c.createTime);$(".authorDetail").text(c.createBy);var d=new StringBuffer();d.append(c.content);
$(".contentDetail").empty().append(d.toString());});a.layerDetail=layer.open({type:1,title:["文章明细（可进行双击段落）","background-color:#2ac1ac;font-size:1.2em;color:white;"],shade:false,btn:["关闭",],area:["51%","65%"],content:$(".androidKmEntityLayer"),scrollbar:false,skin:"my-skin",offset:"65px",success:function(c,d){},yes:function(d,c){layer.close(d);
},on:function(d,c){layer.close(d);},cancel:function(){layer.close(a.layerDetail);}});$(".articleIntroduction").attr("disabled",false);});$(".contentDetail").unbind("click").on("click",".getArticleParat",function(){var d=$(".articleEditParat").val();
var c=$("#chat-textarea").text();$("#chat-textarea").text(c+d);var b=window.localStorage.getItem("closeCurrentArticleDocument");if("true"==b){layer.close(a.layerDetail);
}});$(".contentDetail").on("dblclick","p",function(e){$(".articleEditParat").each(function(){$(this).remove();});$(".getArticleParat").each(function(){$(this).parent().remove();
});var d=$(this).css("height");var b=$(this).attr("style");var c=$(this).find("span").attr("style");if(!c){c="";}if(!b){b="";}$(this).after('<p><button type="button" style="font-size: 15px !important;" class="btn btn-sm btn-default btn-warning  getArticleParat">采纳</button></p>').after("<p>").after("<textarea class='articleEditParat' style='"+b+c+"width: 100%; border: 1px solid red;height:calc("+d+" + 10px);' >"+$(this).text()+"</textarea>").after("</p>");
});$(".androidKmEntityLayer").on("change",".columnCheckBox",function(){var b=$(this).is(":checked");if(b){window.localStorage.setItem("closeCurrentArticleDocument","true");
}else{window.localStorage.setItem("closeCurrentArticleDocument","false");}});},};